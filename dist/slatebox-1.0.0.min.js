/*! slatebox 2017-08-26 1.0.0
http://dev.slatebox.com
(c) 2009-2017 Tim Heckel, Slatebox LLC
Slatebox.js may be freely distributed under the MIT license.

Raphael 2.1.0 - JavaScript Vector Library
Copyright ? 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)
Copyright ? 2008-2012 Sencha Labs (http://sencha.com)
Licensed under the MIT (http://raphaeljs.com/license.html) license.

Eve 0.3.4 - JavaScript Events Library
Copyright (c) 2008-2011 Dmitry Baranovskiy (http://dmitry.baranovskiy.com/)
Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.

emile.js (c) 2009 Thomas Fuchs
Licensed under the terms of the MIT license. */



!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){var o,i;(function(){var n=this,r=n._,a=Array.prototype,s=Object.prototype,l=Function.prototype,c=a.push,u=a.slice,d=a.concat,h=s.toString,f=s.hasOwnProperty,p=Array.isArray,v=Object.keys,g=l.bind,y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};void 0!==t&&t.exports&&(e=t.exports=y),e._=y,y.VERSION="1.7.0";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,i){return t.call(e,n,o,i)};case 4:return function(n,o,i,r){return t.call(e,n,o,i,r)}}return function(){return t.apply(e,arguments)}};y.iteratee=function(t,e,n){return null==t?y.identity:y.isFunction(t)?_(t,e,n):y.isObject(t)?y.matches(t):y.property(t)},y.each=y.forEach=function(t,e,n){if(null==t)return t;e=_(e,n);var o,i=t.length;if(i===+i)for(o=0;o<i;o++)e(t[o],o,t);else{var r=y.keys(t);for(o=0,i=r.length;o<i;o++)e(t[r[o]],r[o],t)}return t},y.map=y.collect=function(t,e,n){if(null==t)return[];e=y.iteratee(e,n);for(var o,i=t.length!==+t.length&&y.keys(t),r=(i||t).length,a=Array(r),s=0;s<r;s++)o=i?i[s]:s,a[s]=e(t[o],o,t);return a};var m="Reduce of empty array with no initial value";y.reduce=y.foldl=y.inject=function(t,e,n,o){null==t&&(t=[]),e=_(e,o,4);var i,r=t.length!==+t.length&&y.keys(t),a=(r||t).length,s=0;if(arguments.length<3){if(!a)throw new TypeError(m);n=t[r?r[s++]:s++]}for(;s<a;s++)n=e(n,t[i=r?r[s]:s],i,t);return n},y.reduceRight=y.foldr=function(t,e,n,o){null==t&&(t=[]),e=_(e,o,4);var i,r=t.length!==+t.length&&y.keys(t),a=(r||t).length;if(arguments.length<3){if(!a)throw new TypeError(m);n=t[r?r[--a]:--a]}for(;a--;)n=e(n,t[i=r?r[a]:a],i,t);return n},y.find=y.detect=function(t,e,n){var o;return e=y.iteratee(e,n),y.some(t,function(t,n,i){if(e(t,n,i))return o=t,!0}),o},y.filter=y.select=function(t,e,n){var o=[];return null==t?o:(e=y.iteratee(e,n),y.each(t,function(t,n,i){e(t,n,i)&&o.push(t)}),o)},y.reject=function(t,e,n){return y.filter(t,y.negate(y.iteratee(e)),n)},y.every=y.all=function(t,e,n){if(null==t)return!0;e=y.iteratee(e,n);var o,i,r=t.length!==+t.length&&y.keys(t),a=(r||t).length;for(o=0;o<a;o++)if(i=r?r[o]:o,!e(t[i],i,t))return!1;return!0},y.some=y.any=function(t,e,n){if(null==t)return!1;e=y.iteratee(e,n);var o,i,r=t.length!==+t.length&&y.keys(t),a=(r||t).length;for(o=0;o<a;o++)if(i=r?r[o]:o,e(t[i],i,t))return!0;return!1},y.contains=y.include=function(t,e){return null!=t&&(t.length!==+t.length&&(t=y.values(t)),y.indexOf(t,e)>=0)},y.invoke=function(t,e){var n=u.call(arguments,2),o=y.isFunction(e);return y.map(t,function(t){return(o?e:t[e]).apply(t,n)})},y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matches(e))},y.findWhere=function(t,e){return y.find(t,y.matches(e))},y.max=function(t,e,n){var o,i,r=-1/0,a=-1/0;if(null==e&&null!=t)for(var s=0,l=(t=t.length===+t.length?t:y.values(t)).length;s<l;s++)(o=t[s])>r&&(r=o);else e=y.iteratee(e,n),y.each(t,function(t,n,o){((i=e(t,n,o))>a||i===-1/0&&r===-1/0)&&(r=t,a=i)});return r},y.min=function(t,e,n){var o,i,r=1/0,a=1/0;if(null==e&&null!=t)for(var s=0,l=(t=t.length===+t.length?t:y.values(t)).length;s<l;s++)(o=t[s])<r&&(r=o);else e=y.iteratee(e,n),y.each(t,function(t,n,o){((i=e(t,n,o))<a||i===1/0&&r===1/0)&&(r=t,a=i)});return r},y.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:y.values(t),o=n.length,i=Array(o),r=0;r<o;r++)(e=y.random(0,r))!==r&&(i[r]=i[e]),i[e]=n[r];return i},y.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,e))},y.sortBy=function(t,e,n){return e=y.iteratee(e,n),y.pluck(y.map(t,function(t,n,o){return{value:t,index:n,criteria:e(t,n,o)}}).sort(function(t,e){var n=t.criteria,o=e.criteria;if(n!==o){if(n>o||void 0===n)return 1;if(n<o||void 0===o)return-1}return t.index-e.index}),"value")};var x=function(t){return function(e,n,o){var i={};return n=y.iteratee(n,o),y.each(e,function(o,r){var a=n(o,r,e);t(i,o,a)}),i}};y.groupBy=x(function(t,e,n){y.has(t,n)?t[n].push(e):t[n]=[e]}),y.indexBy=x(function(t,e,n){t[n]=e}),y.countBy=x(function(t,e,n){y.has(t,n)?t[n]++:t[n]=1}),y.sortedIndex=function(t,e,n,o){for(var i=(n=y.iteratee(n,o,1))(e),r=0,a=t.length;r<a;){var s=r+a>>>1;n(t[s])<i?r=s+1:a=s}return r},y.toArray=function(t){return t?y.isArray(t)?u.call(t):t.length===+t.length?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:t.length===+t.length?t.length:y.keys(t).length},y.partition=function(t,e,n){e=y.iteratee(e,n);var o=[],i=[];return y.each(t,function(t,n,r){(e(t,n,r)?o:i).push(t)}),[o,i]},y.first=y.head=y.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:e<0?[]:u.call(t,0,e)},y.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},y.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:u.call(t,Math.max(t.length-e,0))},y.rest=y.tail=y.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},y.compact=function(t){return y.filter(t,y.identity)};var b=function(t,e,n,o){if(e&&y.every(t,y.isArray))return d.apply(o,t);for(var i=0,r=t.length;i<r;i++){var a=t[i];y.isArray(a)||y.isArguments(a)?e?c.apply(o,a):b(a,e,n,o):n||o.push(a)}return o};y.flatten=function(t,e){return b(t,e,!1,[])},y.without=function(t){return y.difference(t,u.call(arguments,1))},y.uniq=y.unique=function(t,e,n,o){if(null==t)return[];y.isBoolean(e)||(o=n,n=e,e=!1),null!=n&&(n=y.iteratee(n,o));for(var i=[],r=[],a=0,s=t.length;a<s;a++){var l=t[a];if(e)a&&r===l||i.push(l),r=l;else if(n){var c=n(l,a,t);y.indexOf(r,c)<0&&(r.push(c),i.push(l))}else y.indexOf(i,l)<0&&i.push(l)}return i},y.union=function(){return y.uniq(b(arguments,!0,!0,[]))},y.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,o=0,i=t.length;o<i;o++){var r=t[o];if(!y.contains(e,r)){for(var a=1;a<n&&y.contains(arguments[a],r);a++);a===n&&e.push(r)}}return e},y.difference=function(t){var e=b(u.call(arguments,1),!0,!0,[]);return y.filter(t,function(t){return!y.contains(e,t)})},y.zip=function(t){if(null==t)return[];for(var e=y.max(arguments,"length").length,n=Array(e),o=0;o<e;o++)n[o]=y.pluck(arguments,o);return n},y.object=function(t,e){if(null==t)return{};for(var n={},o=0,i=t.length;o<i;o++)e?n[t[o]]=e[o]:n[t[o][0]]=t[o][1];return n},y.indexOf=function(t,e,n){if(null==t)return-1;var o=0,i=t.length;if(n){if("number"!=typeof n)return o=y.sortedIndex(t,e),t[o]===e?o:-1;o=n<0?Math.max(0,i+n):n}for(;o<i;o++)if(t[o]===e)return o;return-1},y.lastIndexOf=function(t,e,n){if(null==t)return-1;var o=t.length;for("number"==typeof n&&(o=n<0?o+n+1:Math.min(o,n+1));--o>=0;)if(t[o]===e)return o;return-1},y.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var o=Math.max(Math.ceil((e-t)/n),0),i=Array(o),r=0;r<o;r++,t+=n)i[r]=t;return i};var w=function(){};y.bind=function(t,e){var n,o;if(g&&t.bind===g)return g.apply(t,u.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");return n=u.call(arguments,2),o=function(){if(!(this instanceof o))return t.apply(e,n.concat(u.call(arguments)));w.prototype=t.prototype;var i=new w;w.prototype=null;var r=t.apply(i,n.concat(u.call(arguments)));return y.isObject(r)?r:i}},y.partial=function(t){var e=u.call(arguments,1);return function(){for(var n=0,o=e.slice(),i=0,r=o.length;i<r;i++)o[i]===y&&(o[i]=arguments[n++]);for(;n<arguments.length;)o.push(arguments[n++]);return t.apply(this,o)}},y.bindAll=function(t){var e,n,o=arguments.length;if(o<=1)throw new Error("bindAll must be passed function names");for(e=1;e<o;e++)t[n=arguments[e]]=y.bind(t[n],t);return t},y.memoize=function(t,e){var n=function(o){var i=n.cache,r=e?e.apply(this,arguments):o;return y.has(i,r)||(i[r]=t.apply(this,arguments)),i[r]};return n.cache={},n},y.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},y.defer=function(t){return y.delay.apply(y,[t,1].concat(u.call(arguments,1)))},y.throttle=function(t,e,n){var o,i,r,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:y.now(),a=null,r=t.apply(o,i),a||(o=i=null)};return function(){var c=y.now();s||!1!==n.leading||(s=c);var u=e-(c-s);return o=this,i=arguments,u<=0||u>e?(clearTimeout(a),a=null,s=c,r=t.apply(o,i),a||(o=i=null)):a||!1===n.trailing||(a=setTimeout(l,u)),r}},y.debounce=function(t,e,n){var o,i,r,a,s,l=function(){var c=y.now()-a;c<e&&c>0?o=setTimeout(l,e-c):(o=null,n||(s=t.apply(r,i),o||(r=i=null)))};return function(){r=this,i=arguments,a=y.now();var c=n&&!o;return o||(o=setTimeout(l,e)),c&&(s=t.apply(r,i),r=i=null),s}},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,o=t[e].apply(this,arguments);n--;)o=t[n].call(this,o);return o}},y.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},y.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},y.once=y.partial(y.before,2),y.keys=function(t){if(!y.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)y.has(t,n)&&e.push(n);return e},y.values=function(t){for(var e=y.keys(t),n=e.length,o=Array(n),i=0;i<n;i++)o[i]=t[e[i]];return o},y.pairs=function(t){for(var e=y.keys(t),n=e.length,o=Array(n),i=0;i<n;i++)o[i]=[e[i],t[e[i]]];return o},y.invert=function(t){for(var e={},n=y.keys(t),o=0,i=n.length;o<i;o++)e[t[n[o]]]=n[o];return e},y.functions=y.methods=function(t){var e=[];for(var n in t)y.isFunction(t[n])&&e.push(n);return e.sort()},y.extend=function(t){if(!y.isObject(t))return t;for(var e,n,o=1,i=arguments.length;o<i;o++){e=arguments[o];for(n in e)f.call(e,n)&&(t[n]=e[n])}return t},y.pick=function(t,e,n){var o,i={};if(null==t)return i;if(y.isFunction(e)){e=_(e,n);for(o in t){var r=t[o];e(r,o,t)&&(i[o]=r)}}else{var a=d.apply([],u.call(arguments,1));t=new Object(t);for(var s=0,l=a.length;s<l;s++)(o=a[s])in t&&(i[o]=t[o])}return i},y.omit=function(t,e,n){if(y.isFunction(e))e=y.negate(e);else{var o=y.map(d.apply([],u.call(arguments,1)),String);e=function(t,e){return!y.contains(o,e)}}return y.pick(t,e,n)},y.defaults=function(t){if(!y.isObject(t))return t;for(var e=1,n=arguments.length;e<n;e++){var o=arguments[e];for(var i in o)void 0===t[i]&&(t[i]=o[i])}return t},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t};var k=function(t,e,n,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var i=h.call(t);if(i!==h.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]===t)return o[r]===e;var a=t.constructor,s=e.constructor;if(a!==s&&"constructor"in t&&"constructor"in e&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(s)&&s instanceof s))return!1;n.push(t),o.push(e);var l,c;if("[object Array]"===i){if(l=t.length,c=l===e.length)for(;l--&&(c=k(t[l],e[l],n,o)););}else{var u,d=y.keys(t);if(l=d.length,c=y.keys(e).length===l)for(;l--&&(u=d[l],c=y.has(e,u)&&k(t[u],e[u],n,o)););}return n.pop(),o.pop(),c};y.isEqual=function(t,e){return k(t,e,[],[])},y.isEmpty=function(t){if(null==t)return!0;if(y.isArray(t)||y.isString(t)||y.isArguments(t))return 0===t.length;for(var e in t)if(y.has(t,e))return!1;return!0},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=p||function(t){return"[object Array]"===h.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){y["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),y.isFunction=function(t){return"function"==typeof t||!1},y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){return null!=t&&f.call(t,e)},y.noConflict=function(){return n._=r,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=function(t){return function(e){return e[t]}},y.matches=function(t){var e=y.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var o=0;o<n;o++){var i=e[o],r=i[0];if(i[1]!==t[r]||!(r in t))return!1}return!0}},y.times=function(t,e,n){var o=Array(Math.max(0,t));e=_(e,n,1);for(var i=0;i<t;i++)o[i]=e(i);return o},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},S=y.invert(P),C=function(t){var e=function(e){return t[e]},n="(?:"+y.keys(t).join("|")+")",o=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,o.test(t)?t.replace(i,e):t}};y.escape=C(P),y.unescape=C(S),y.result=function(t,e){if(null!=t){var n=t[e];return y.isFunction(n)?t[e]():n}};var A=0;y.uniqueId=function(t){var e=++A+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,z=function(t){return"\\"+B[t]};y.template=function(t,e,n){!e&&n&&(e=n),e=y.defaults({},e,y.templateSettings);var o=RegExp([(e.escape||M).source,(e.interpolate||M).source,(e.evaluate||M).source].join("|")+"|$","g"),i=0,r="__p+='";t.replace(o,function(e,n,o,a,s){return r+=t.slice(i,s).replace(T,z),i=s+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?r+="'+\n((__t=("+o+"))==null?'':__t)+\n'":a&&(r+="';\n"+a+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var a=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var s=function(t){return a.call(this,t,y)},l=e.variable||"obj";return s.source="function("+l+"){\n"+r+"}",s},y.chain=function(t){var e=y(t);return e._chain=!0,e};var L=function(t){return this._chain?y(t).chain():t};y.mixin=function(t){y.each(y.functions(t),function(e){var n=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),L.call(this,n.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];y.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],L.call(this,n)}}),y.each(["concat","join","slice"],function(t){var e=a[t];y.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},o=[],void 0!==(i=function(){return y}.apply(e,o))&&(t.exports=i)}).call(this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=e,i=t;return!o.default.isArray(e)&&o.default.isString(e)&&(n=[e]),o.default.each(n,function(t){i=Raphael.transformPath(i,t).toString()}),i};var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.x-5,o=t.x+e.width/2,i=t.y+e.height/2;return"ellipse"===e.vectorPath&&(n=t.cx-5,o=t.cx,i=t.cy),{lx:n,tx:o,ty:i}}},function(t,e,n){(function(t,n){function o(t,e){return t.set(e[0],e[1]),t}function i(t,e){return t.add(e),t}function r(t,e){for(var n=-1,o=t?t.length:0;++n<o&&!1!==e(t[n],n,t););return t}function a(t,e){for(var n=-1,o=e.length,i=t.length;++n<o;)t[i+n]=e[n];return t}function s(t,e,n,o){var i=-1,r=t?t.length:0;for(o&&r&&(n=t[++i]);++i<r;)n=e(n,t[i],i,t);return n}function l(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}function c(t,e){return null==t?void 0:t[e]}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function d(t){var e=-1,n=Array(t.size);return t.forEach(function(t,o){n[++e]=[o,t]}),n}function h(t,e){return function(n){return t(e(n))}}function f(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function p(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function v(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function g(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function y(t){this.__data__=new v(t)}function _(t,e){var n=be(t)||J(t)?l(t.length,String):[],o=n.length,i=!!o;for(var r in t)!e&&!Yt.call(t,r)||i&&("length"==r||q(r,o))||n.push(r);return n}function m(t,e,n){var o=t[e];Yt.call(t,e)&&G(o,n)&&(void 0!==n||e in t)||(t[e]=n)}function x(t,e){for(var n=t.length;n--;)if(G(t[n][0],e))return n;return-1}function b(t,e){return t&&F(e,ot(e),t)}function w(t,e,n,o,i,a,s){var l;if(o&&(l=a?o(t,i,a,s):o(t)),void 0!==l)return l;if(!et(t))return t;var c=be(t);if(c){if(l=W(t),!e)return D(t,l)}else{var d=xe(t),h=d==ut||d==dt;if(we(t))return A(t,e);if(d==pt||d==st||h&&!a){if(u(t))return a?t:{};if(l=H(h?{}:t),!e)return O(t,b(l,t))}else{if(!Nt[d])return a?t:{};l=U(t,d,w,e)}}s||(s=new y);var f=s.get(t);if(f)return f;if(s.set(t,l),!c)var p=n?j(t):ot(t);return r(p||t,function(i,r){p&&(i=t[r=i]),m(l,r,w(i,e,n,o,r,t,s))}),l}function k(t){return et(t)?te(t):{}}function P(t,e,n){var o=e(t);return be(t)?o:a(o,n(t))}function S(t){return!(!et(t)||$(t))&&(Q(t)||u(t)?Gt:Lt).test(X(t))}function C(t){if(!Y(t))return re(t);var e=[];for(var n in Object(t))Yt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function A(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function M(t){var e=new t.constructor(t.byteLength);return new Kt(e).set(new Kt(t)),e}function B(t,e){var n=e?M(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function T(t,e,n){return s(e?n(d(t),!0):d(t),o,new t.constructor)}function z(t){var e=new t.constructor(t.source,zt.exec(t));return e.lastIndex=t.lastIndex,e}function L(t,e,n){return s(e?n(f(t),!0):f(t),i,new t.constructor)}function E(t){return _e?Object(_e.call(t)):{}}function N(t,e){var n=e?M(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function D(t,e){var n=-1,o=t.length;for(e||(e=Array(o));++n<o;)e[n]=t[n];return e}function F(t,e,n,o){n||(n={});for(var i=-1,r=e.length;++i<r;){var a=e[i],s=o?o(n[a],t[a],a,n,t):void 0;m(n,a,void 0===s?t[a]:s)}return n}function O(t,e){return F(t,me(t),e)}function j(t){return P(t,ot,me)}function R(t,e){var n=t.__data__;return V(e)?n["string"==typeof e?"string":"hash"]:n.map}function I(t,e){var n=c(t,e);return S(n)?n:void 0}function W(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Yt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function H(t){return"function"!=typeof t.constructor||Y(t)?{}:k(Qt(t))}function U(t,e,n,o){var i=t.constructor;switch(e){case mt:return M(t);case lt:case ct:return new i(+t);case xt:return B(t,o);case bt:case wt:case kt:case Pt:case St:case Ct:case At:case Mt:case Bt:return N(t,o);case ht:return T(t,o,n);case ft:case yt:return new i(t);case vt:return z(t);case gt:return L(t,o,n);case _t:return E(t)}}function q(t,e){return!!(e=null==e?at:e)&&("number"==typeof t||Et.test(t))&&t>-1&&t%1==0&&t<e}function V(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function $(t){return!!Vt&&Vt in t}function Y(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ut)}function X(t){if(null!=t){try{return $t.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function G(t,e){return t===e||t!==t&&e!==e}function J(t){return K(t)&&Yt.call(t,"callee")&&(!ee.call(t,"callee")||Xt.call(t)==st)}function Z(t){return null!=t&&tt(t.length)&&!Q(t)}function K(t){return nt(t)&&Z(t)}function Q(t){var e=et(t)?Xt.call(t):"";return e==ut||e==dt}function tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=at}function et(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function nt(t){return!!t&&"object"==typeof t}function ot(t){return Z(t)?_(t):C(t)}var it=200,rt="__lodash_hash_undefined__",at=9007199254740991,st="[object Arguments]",lt="[object Boolean]",ct="[object Date]",ut="[object Function]",dt="[object GeneratorFunction]",ht="[object Map]",ft="[object Number]",pt="[object Object]",vt="[object RegExp]",gt="[object Set]",yt="[object String]",_t="[object Symbol]",mt="[object ArrayBuffer]",xt="[object DataView]",bt="[object Float32Array]",wt="[object Float64Array]",kt="[object Int8Array]",Pt="[object Int16Array]",St="[object Int32Array]",Ct="[object Uint8Array]",At="[object Uint8ClampedArray]",Mt="[object Uint16Array]",Bt="[object Uint32Array]",Tt=/[\\^$.*+?()[\]{}|]/g,zt=/\w*$/,Lt=/^\[object .+?Constructor\]$/,Et=/^(?:0|[1-9]\d*)$/,Nt={};Nt[st]=Nt["[object Array]"]=Nt[mt]=Nt[xt]=Nt[lt]=Nt[ct]=Nt[bt]=Nt[wt]=Nt[kt]=Nt[Pt]=Nt[St]=Nt[ht]=Nt[ft]=Nt[pt]=Nt[vt]=Nt[gt]=Nt[yt]=Nt[_t]=Nt[Ct]=Nt[At]=Nt[Mt]=Nt[Bt]=!0,Nt["[object Error]"]=Nt[ut]=Nt["[object WeakMap]"]=!1;var Dt="object"==typeof t&&t&&t.Object===Object&&t,Ft="object"==typeof self&&self&&self.Object===Object&&self,Ot=Dt||Ft||Function("return this")(),jt="object"==typeof e&&e&&!e.nodeType&&e,Rt=jt&&"object"==typeof n&&n&&!n.nodeType&&n,It=Rt&&Rt.exports===jt,Wt=Array.prototype,Ht=Function.prototype,Ut=Object.prototype,qt=Ot["__core-js_shared__"],Vt=function(){var t=/[^.]+$/.exec(qt&&qt.keys&&qt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),$t=Ht.toString,Yt=Ut.hasOwnProperty,Xt=Ut.toString,Gt=RegExp("^"+$t.call(Yt).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jt=It?Ot.Buffer:void 0,Zt=Ot.Symbol,Kt=Ot.Uint8Array,Qt=h(Object.getPrototypeOf,Object),te=Object.create,ee=Ut.propertyIsEnumerable,ne=Wt.splice,oe=Object.getOwnPropertySymbols,ie=Jt?Jt.isBuffer:void 0,re=h(Object.keys,Object),ae=I(Ot,"DataView"),se=I(Ot,"Map"),le=I(Ot,"Promise"),ce=I(Ot,"Set"),ue=I(Ot,"WeakMap"),de=I(Object,"create"),he=X(ae),fe=X(se),pe=X(le),ve=X(ce),ge=X(ue),ye=Zt?Zt.prototype:void 0,_e=ye?ye.valueOf:void 0;p.prototype.clear=function(){this.__data__=de?de(null):{}},p.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},p.prototype.get=function(t){var e=this.__data__;if(de){var n=e[t];return n===rt?void 0:n}return Yt.call(e,t)?e[t]:void 0},p.prototype.has=function(t){var e=this.__data__;return de?void 0!==e[t]:Yt.call(e,t)},p.prototype.set=function(t,e){return this.__data__[t]=de&&void 0===e?rt:e,this},v.prototype.clear=function(){this.__data__=[]},v.prototype.delete=function(t){var e=this.__data__,n=x(e,t);return!(n<0||(n==e.length-1?e.pop():ne.call(e,n,1),0))},v.prototype.get=function(t){var e=this.__data__,n=x(e,t);return n<0?void 0:e[n][1]},v.prototype.has=function(t){return x(this.__data__,t)>-1},v.prototype.set=function(t,e){var n=this.__data__,o=x(n,t);return o<0?n.push([t,e]):n[o][1]=e,this},g.prototype.clear=function(){this.__data__={hash:new p,map:new(se||v),string:new p}},g.prototype.delete=function(t){return R(this,t).delete(t)},g.prototype.get=function(t){return R(this,t).get(t)},g.prototype.has=function(t){return R(this,t).has(t)},g.prototype.set=function(t,e){return R(this,t).set(t,e),this},y.prototype.clear=function(){this.__data__=new v},y.prototype.delete=function(t){return this.__data__.delete(t)},y.prototype.get=function(t){return this.__data__.get(t)},y.prototype.has=function(t){return this.__data__.has(t)},y.prototype.set=function(t,e){var n=this.__data__;if(n instanceof v){var o=n.__data__;if(!se||o.length<it-1)return o.push([t,e]),this;n=this.__data__=new g(o)}return n.set(t,e),this};var me=oe?h(oe,Object):function(){return[]},xe=function(t){return Xt.call(t)};(ae&&xe(new ae(new ArrayBuffer(1)))!=xt||se&&xe(new se)!=ht||le&&"[object Promise]"!=xe(le.resolve())||ce&&xe(new ce)!=gt||ue&&"[object WeakMap]"!=xe(new ue))&&(xe=function(t){var e=Xt.call(t),n=e==pt?t.constructor:void 0,o=n?X(n):void 0;if(o)switch(o){case he:return xt;case fe:return ht;case pe:return"[object Promise]";case ve:return gt;case ge:return"[object WeakMap]"}return e});var be=Array.isArray,we=ie||function(){return!1};n.exports=function(t){return w(t,!0,!0)}}).call(e,n(7),n(8)(t))},function(t,e,n){n(5),n(6),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(2),n(1),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),t.exports=n(40)},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(){var t=function t(e){var n=this;if(!(n instanceof t))return new t(e);void 0===n.slate&&alert("You have not included a reference to Slatebox.slate.js!"),n.slates=new Array,n._options=e,window.Slatebox.instance=n};t.windowSize=function(){var t=0,e=0;return window.innerWidth?(t=window.innerWidth,e=window.innerHeight):0!=document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.body.clientWidth,e=document.body.clientHeight),{width:t,height:e}},t.isElement=function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":o(HTMLElement))?t instanceof HTMLElement:"object"===(void 0===t?"undefined":o(t))&&1===t.nodeType&&"string"==typeof t.nodeName},t.el=function(t){return document.getElementById(t)},t.select=function(t){var e=t.indexOf(".");if(-1!=e){var n=t.slice(0,e)||"*",o=t.slice(e+1,t.length),r=[];return i.default.each(document.getElementsByTagName(n),function(t){t.className&&-1!=t.className.indexOf(o)&&r.push(t)}),r}},t.getKey=function(t){var e=0;try{e=t.keyCode}catch(n){e=t.which}return e},t.stopEvent=function(t){return(t=t||window.event).preventDefault?(t.stopPropagation(),t.preventDefault()):(t.returnValue=!1,t.cancelBubble=!0),!1},t.toShortDateString=function(t){var e=t;try{var n=new Date(parseInt(t.substr(6)));e=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()}catch(t){}return e},t.addEvent=function(t,e,n){t.attachEvent?(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n])):t.addEventListener(e,n,!1)},t.removeEvent=function(t,e,n){t.detachEvent?(t.detachEvent("on"+e,t[e+n]),t[e+n]=null):t.removeEventListener(e,n,!1)},t.bind=function(t,e,n){t[e]=t[e]||[],t[e].push(n)},t.imageExists=function(e,n,o){var i="temp_"+t.guid(),r=document.body.appendChild(document.createElement("img"));r.style.position="absolute",r.style.top="-10000px",r.style.left="-10000px",r.setAttribute("src",e),r.setAttribute("id",i),t.addEvent(r,"load",function(e){var i=t.getDimensions(r);document.body.removeChild(r),n.apply(this,[!0,i.width,i.height,o])}),t.addEvent(r,"error",function(t){document.body.removeChild(r),n.apply(this,[!1,0,0,o])})},t.urlExists=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),200==e.status},t.ajax=function(e,n,o,r,a,s){a=this.ActiveXObject,e=[e,-1===e.indexOf("?")?"?":"&","guid="+t.guid()].join(""),a=new(a||XMLHttpRequest)("Microsoft.XMLHTTP");var l=o?r||"POST":r||"GET";a.open(l,e,1),a.setRequestHeader("Content-type","application/json; charset=utf-8"),s&&i.default.each(s,function(t){a.setRequestHeader(t.n,t.v)}),a.onreadystatechange=function(){a.readyState>3&&n&&n(a.responseText,a)},a.send(o)};var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};t.guid=function(){return e()+e()+e()},t.number=function(){return Math.floor(9999*Math.random())+999};var n=document.getElementsByTagName("head")[0],r=window;t.getJSON=function(t,o){var i=e()+e(),a=document.createElement("script");r["__jsonp"+i]=o,a.src=t.replace(/\?(&|$)/,"__jsonp"+i+"$1"),a.onload=function(){a=null},n.appendChild(a)},t.positionedOffset=function(t){var e=0,n=0;if(t.offsetParent)do{e+=t.offsetLeft,n+=t.offsetTop}while(t=t.offsetParent);return{left:e,top:n}},t.getDimensions=function(t){var e=0,n=0;return void 0!==t.clip?(e=t.clip.width,n=t.clip.height):t.style.pixelWidth?(e=t.style.pixelWidth,n=t.style.pixelHeight):(e=t.offsetWidth,n=t.offsetHeight),{width:e,height:n}},t.isIE=function(){var t=999;return-1!==navigator.appVersion.indexOf("MSIE")&&-1===navigator.appVersion.indexOf("chromeframe")&&(t=parseFloat(navigator.appVersion.split("MSIE")[1])),t},t.isIpad=function(){return null!==navigator.userAgent.match(/iPad/i)},t.mousePos=function(t){if(document.all)mouseX=window.event.clientX,mouseY=window.event.clientY;else if(t.targetTouches){if(t.targetTouches.length){var e=t.targetTouches[0];mouseX=e.clientX,mouseY=e.clientY;var n=[];for(var o in t.targetTouches)n.push({x:t.targetTouches[o].clientX,y:t.targetTouches[o].clientY})}}else mouseX=t.pageX,mouseY=t.pageY;return{x:mouseX,y:mouseY,allTouches:n}},t.ensureEle=function(t){return"string"==typeof t?document.getElementById(t):t},t.onOff=function(e,n,o){var i=t.guid().replace("-","").substring(0,8);return t.ensureEle(n).innerHTML="<div style='cursor:pointer;overflow:hidden;width:53px;height:20px;'><img id='"+i+"' style='margin-top:0px;' src='"+e+"/public/images/checkbox-switch-stateful.png' alt='toggle'/>",t.el(i).onclick=function(t){o.apply(this,[i])},i},t.isOn=function(e){return"0px"!==t.ensureEle(e).style.marginTop},t.toggleOnOff=function(e){var n=t.ensureEle(e);"0px"===n.style.marginTop?n.style.marginTop="-22px":n.style.marginTop="0px"},t.div=function(e,n,o,i,r){var a="temp_"+t.guid(),s=e.appendChild(document.createElement("div"));return s.style.position="absolute",s.style.top=o+"px",s.style.left=n+"px",s.style.width=i+"px",s.style.height=r+"px",s.style.border="1px solid red",s.style.backgroundColor="#f8f8f8",s.setAttribute("id",a),a},t._transformPath=function(t,e){return Raphael.transformPath(t,e).toString()},t.transformPath=function(t,e){var n=Raphael.transformPath(t.vect.attr("path").toString(),e).toString().split(","),o=[];i.default.each(n,function(t){var e=i.default.isFinite(t)?parseInt(t,10):t;o.push(e)}),t.options.vectorPath=o.join(","),t.vect.transform(""),t.vect.attr({path:t.options.vectorPath});var r=t.vect.getBBox(),a={point:{x:r.cx,y:r.cy}};i.default.extend(t.options.rotate,a);var s=t.getTransformString();t.vect.transform(s)},t.fn=t.prototype={initNode:function(){var t=this;i.default.each($s.fn.node.fn,function(e){i.default.isFunction(e)&&"_"===arguments[1].substring(0,1)&&e.apply(t)})}},Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var o=[],i=arguments[1],r=0;r<n;r++)if(r in e){var a=e[r];t.call(i,a,r,e)&&o.push(a)}return o}),window.Slatebox=t}()},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=o(n(0)),r=o(n(3));!function(t){t.fn.slate=function(e){function n(t,e,n,o){var i=n.split("@"),r=i[1];switch(i[0]){case"zoom":s=i.length>2?parseFloat(i[2]):t.defaultDuration;e.zoom(r,s,o);break;case"position":var a=i.length>2?i[2]:t.defaultEasing,s=i.length>3?parseFloat(i[3]):t.defaultDuration;e.position(r,o,a,s)}}if(!(this instanceof t.fn.slate))return new t.fn.slate(e);var o=this;o.options={id:t.guid(),container:"",instance:"",name:"",description:"",containerStyle:{width:"auto",height:"auto"},viewPort:{allowDrag:!0,originalWidth:5e4,width:5e4,height:5e4,left:5e3,top:5e3,zoom:{w:5e4,h:5e4,r:1}},events:{onNodeDragged:null,onCanvasClicked:null,onImagesRequested:null,onRequestSave:null},enabled:!0,showBirdsEye:!0,sizeOfBirdsEye:200,showMultiSelect:!0,showZoom:!0,showUndoRedo:!0,showStatus:!0,showLocks:!0,collaboration:{allow:!0,localizedOnly:!1,userIdOverride:null,onCollaboration:null},isPublic:!1,isFeatured:!1,isCommunity:!1};var a=o.options.viewPort,s=o.options.containerStyle,l=o.options.events,c=o.options.collaboration;i.default.extend(o.options,e),i.default.extend(o.options.collaboration,i.default.extend(c,e.collaboration||{})),i.default.extend(o.options.viewPort,i.default.extend(a,e.viewPort||{})),i.default.extend(o.options.events,i.default.extend(l,e.events||{})),i.default.extend(o.options.containerStyle,i.default.extend(s,e.containerStyle||{})),t.isElement(o.options.container)||(o.options.container=t.el(o.options.container));var u=[];o.glow=function(t){u.push(t.glow())},o.unglow=function(){i.default.each(u,function(t){t.remove()}),u=[]};var d=[];return o.addtip=function(t){t&&d.push(t)},o.untooltip=function(){i.default.each(d,function(t){t&&t.remove()})},o.zoom=function(t,e,n,o,i){this.nodes.closeAllLineOptions(),this.paper.setViewBox(t,e,n,o,i)},o.svg=function(e){var n=o.getOrientation(),r=JSON.parse(o.exportJSON());i.default.each(r.nodes,function(e){e.options.yPos=e.options.yPos-n.top,e.options.xPos=e.options.xPos-n.left,e.options.rotate&&(e.options.rotate.point.x=e.options.rotate.point.x-n.left,e.options.rotate.point.y=e.options.rotate.point.y-n.top);var o=t._transformPath(e.options.vectorPath,["T",-1*n.left,",",-1*n.top].join(""));e.options.vectorPath=o});var a=$("<div id='tempSvgSlate'/>").css("width","1000px").css("height","1000px").css("visibility","hidden");$(document.body).append(a);var s=Math.max(n.width,n.height);i.default.each(["block","classic","oval","diamond","open","none","wide","narrow","long","short"],function(t){$("#raphael-marker-"+t).hide()});var l=(new t).slate({container:"tempSvgSlate",containerStyle:{backgroundColor:r.options.containerStyle.backgroundColor},defaultLineColor:r.options.defaultLineColor,viewPort:{allowDrag:!1,originalWidth:s,width:s,height:s,left:0,top:0,zoom:{w:s,h:s,r:1}},name:r.options.name,description:r.options.description,showBirdsEye:!1,showMultiSelect:!1,showUndoRedo:!1,showZoom:!1});l.init(),l.loadJSON(JSON.stringify(r),void 0,!0),l.nodes.refreshAllRelationships(),setTimeout(function(){e({svg:l.canvas.rawSVG(),orient:n}),a.remove(),i.default.each(["block","classic","oval","diamond","open","none","wide","narrow","long","short"],function(t){$("#raphael-marker-"+t).show()})},100)},o.present=function(t){var e=[],r=null;!function a(){if(0===e.length&&t.nodes.length>0){var s=t.nodes.shift();r=i.default.detect(o.nodes.allNodes,function(t){return t.options.name==s.name}),e=s.operations,t.nodeChanged&&t.nodeChanged(s)}if(e.length>0){var l=e.shift();t.opChanged&&t.opChanged(l),n(t,r,l,function(e){var n=void 0!==t.sync&&t.sync[e.operation];switch(e.operation){case"zoom":n&&o.collab&&o.collab.send({type:"onZoom",data:{id:e.id,zoomLevel:e.zoomLevel}});break;case"position":n&&o.collab&&o.collab.send({type:"onNodePositioned",data:{id:e.id,location:e.location,easing:e.easing}})}a()})}else t.complete&&t.complete()}()},o.loadJSON=function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.options.enabled;void 0===n&&(this.paper.clear(),o.nodes.allNodes=[]);var s=JSON.parse(e),l=this.options.collaboration;i.default.extend(this.options,s.options),this.options.collaboration=l;var c=[];if(i.default.each(s.nodes,function(e){var n=t.instance.node(e.options);o.nodes.add(n,a),c.push({bt:n,json:e})}),i.default.each(c,function(t){var e=t;e.bt.addRelationships(e.json,function(t){i.default.invoke(t,"toFront"),e.bt.vect.toFront(),e.bt.text.toFront(),e.bt.link.toFront()})}),!r){var u=Math.max(this.options.viewPort.zoom.w,this.options.viewPort.zoom.h);this.zoom(0,0,u,u,!1),this.canvas.resize(u)}o.options.showLocks&&o.displayLocks(),i.default.each(o.nodes.allNodes,function(t){t.relationships.updateAssociationsWith({activeNode:t.options.id,currentDx:0,currentDy:0})}),o.nodes.refreshAllRelationships()},o.displayLocks=function(){o.nodes.allNodes.forEach(function(t){t.initLock()})},o.hideLocks=function(){o.nodes.allNodes.forEach(function(t){t.hideLock()})},o.exportDifference=function(t,e){var n=i.default.extend({},o.options),a=n.collaboration.panelContainer,s=n.collaboration.callbacks;delete n.collaboration.panelContainer,delete n.collaboration.callbacks,delete n.container,delete n.events,n.showLocks=t.options.showLocks;var l={options:(0,r.default)(n),nodes:[]};return i.default.each(o.nodes.allNodes,function(n){var r=!1,a=n;a.options.id!==o.tempNodeId&&(i.default.each(t.nodes.allNodes,function(t){t.options.id!==a.options.id||(r=!0)}),r||l.nodes.push(a.serialize(e)))}),n.collaboration.panelContainer=a,n.collaboration.callbacks=s,JSON.stringify(l)},o.exportJSON=function(){var t=o.options.container,e=o.options.collaboration.panelContainer||null,n=o.options.collaboration.callbacks||null,a=o.options;delete a.container,delete a.collaboration.panelContainer;var s={options:(0,r.default)(a),nodes:[]};o.options.container=t,o.options.collaboration.panelContainer=e,o.options.collaboration.callbacks=n,delete s.options.events,delete s.options.ajax,delete s.options.container;return i.default.each(o.nodes.allNodes,function(t){t.options.id!==o.tempNodeId&&s.nodes.push(t.serialize())}),JSON.stringify(s)},o.snapshot=function(){var t=JSON.parse(o.exportJSON());return t.nodes.allNodes=t.nodes,t},o.getOrientation=function(t){var e="landscape",n=o.options.viewPort.width,i=o.options.viewPort.height,r=new Array;r.left=99999,r.right=0,r.top=99999,r.bottom=0;var a=t||o.nodes.allNodes;if(a.length>0){for(var s=0;s<a.length;s++){var l=a[s].vect.getBBox(),c=o.options.viewPort.zoom.r||1,u=l.x*c,d=l.y*c,h=l.width*c,f=l.height*c;r.left=Math.abs(Math.min(r.left,u-10)),r.right=Math.abs(Math.max(r.right,u+h+10)),r.top=Math.abs(Math.min(r.top,d-10)),r.bottom=Math.abs(Math.max(r.bottom,d+f+10))}n=r.right-r.left;(i=r.bottom-r.top)>n&&(e="portrait")}return{orientation:e,height:i,width:n,left:r.left,top:r.top}},o.resize=function(t,e,n){var i=n||0;i<6&&(i=6),t-=2*i||0;var r=o.getOrientation(),a=r.width/t*o.options.viewPort.width,s=r.height/t*o.options.viewPort.height,l=Math.max(a,s),c=Math.max(o.options.viewPort.width,o.options.viewPort.height)/l,u=r.left*c-i,d=r.top*c-i;o.zoom(0,0,l,l,!0),o.options.viewPort.zoom={w:l,h:l,l:parseInt(-1*u),t:parseInt(-1*d),r:o.options.viewPort.originalWidth/l},o.canvas.move({x:u,y:d,dur:e,isAbsolute:!0})},o.stopEditing=function(){i.default.each(o.nodes.allNodes,function(t){t.editor&&t.editor.end(),t.images&&t.images.end(),t.links&&t.links.end(),t.customShapes&&t.customShapes.end()})},o.disable=function(t,e){e||i.default.each(o.nodes.allNodes,function(t){t.disable()}),t||(o.options.enabled=!1,o.options.viewPort.allowDrag=!1)},o.enable=function(t,e){e||i.default.each(o.nodes.allNodes,function(t){t.enable()}),t||(o.options.enabled=!0,o.options.viewPort.allowDrag=!0)},o.unMarkAll=function(){i.default.each(o.nodes.allNodes,function(t){t.unmark()})},o.init=function(){o.options.collaboration&&o.options.collaboration.allow&&o.collab.init();var t=o.canvas.init();return o.options.showMultiSelect&&o.multiselection&&o.multiselection.init(),t},i.default.each(t.fn.slate.fn,function(t){if(i.default.isFunction(t)&&"_"===arguments[1].substring(0,1)){var e=arguments[1].replace("_","");o[e]={},o[e]=t.apply(o[e]),o[e]._=o}}),o.tempNodeId=t.guid(),i.default.isFunction(o.options.onInitCompleted)&&o.options.onInitCompleted.apply(this),o},t.fn.slate.fn=t.fn.slate.prototype={}}(Slatebox)},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _underscore=__webpack_require__(0),_underscore2=_interopRequireDefault(_underscore),_getTransformedPath=__webpack_require__(1),_getTransformedPath2=_interopRequireDefault(_getTransformedPath),_getDepCoords=__webpack_require__(2),_getDepCoords2=_interopRequireDefault(_getDepCoords);!function($s){$s.fn.node=function(_options){function url(t){return _node.options.ajax.rootUrl+_node.options.ajax.urlFlavor+t}function bindRel(t,e){return{childId:t.child.options.id,parentId:t.parent.options.id,isStraightLine:t.blnStraight,lineColor:t.lineColor,lineOpacity:t.lineOpacity,lineWidth:e||t.lineWidth,showParentArrow:t.showParentArrow||!1,showChildArrow:t.showChildArrow||!1}}if(!(this instanceof $s.fn.node))return new $s.fn.node(_options);var _node=this,_marker,_lock,_openLock;_node.options={id:$s.guid(),name:"",text:"",image:"",imageTiled:!1,xPos:0,yPos:0,height:10,width:10,borderWidth:2,borderStyle:"",lineColor:"#000000",lineWidth:10,lineOpacity:1,allowDrag:!0,allowMenu:!0,allowContext:!0,allowResize:!0,backgroundColor:"#f8f8f8",foregroundColor:"#000",fontSize:12,fontFamily:"Trebuchet MS",fontStyle:"normal",vectorPath:"",rotate:{rotationAngle:0},link:{show:!1,type:"",data:"",thumbnail:{width:175,height:175}}},_underscore2.default.extend(_node.options,_options),""===_node.options.name&&(_node.options.name=_node.options.id),_node.constants={statusPanelAtRest:33,statusPanelExpanded:200},_node.del=function(){var t=_node.options.id;_node.slate.nodes.closeAllMenus(),_node.slate.nodes.closeAllLineOptions(),_node.relationships.removeAll(),_node.slate.options.viewPort.allowDrag=!0,_underscore2.default.each(_node.slate.nodes.allNodes,function(e){e.options.link&&e.options.link.show&&e.options.link.data===t&&(_underscore2.default.extend(e.options.link,{show:!1,type:"",data:""}),e.link.hide())}),_node.slate.unMarkAll(),_node.slate.nodes.remove(_node)},_node.getTransformString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],n=void 0;if(t.rotate?n="R"+t.rotate.rotationAngle+", "+t.rotate.point.x+", "+t.rotate.point.y:_node.options.rotate.rotationAngle&&(n="R"+_node.options.rotate.rotationAngle+", "+(_node.options.rotate.point.x-(t.dx||0))+", "+(_node.options.rotate.point.y-(t.dy||0))),e.push(n),"translate"===t.action){var o="T"+t.dx+", "+t.dy;e.push(o)}return e.join(" ")},_node.setStartDrag=function(){_node.slate.options.viewPort.allowDrag=!1,_node.slate.stopEditing(),_node.connectors&&_node.connectors.reset(),_node.context&&_node.context.remove(),_node.menu&&_node.menu.isOpen()&&(_node.menu.wasOpen=!0),_node.slate.hideLocks()},_node.setEndDrag=function(){_node.slate&&_node.slate.options.enabled&&(_node.slate.options.viewPort.allowDrag=!0),_node.menu&&_underscore2.default.isFunction(_node.menu.show)&&_node.options.allowMenu&&_node.menu.show(),_node.slate.displayLocks()},_node.serialize=function(t){var e={};return _underscore2.default.extend(e,{options:_node.options}),e.relationships={associations:[]},_underscore2.default.each(_node.relationships.associations,function(n){e.relationships.associations.push(bindRel(n,t))}),e},_node.addRelationships=function(t,e){var n=[];t.relationships&&_underscore2.default.isArray(t.relationships.associations)&&_underscore2.default.each(t.relationships.associations,function(t){var e=t,o=null;if(_underscore2.default.each(_node.slate.nodes.allNodes,function(t){t.options.id!==e.parentId||_node.options.id===t.options.id||(o=t)}),o){var i=o.relationships.addAssociation(_node,e);n.push(i.line)}else;}),_underscore2.default.isFunction(e)&&e.apply(this,[n])},_node.toFront=function(){_underscore2.default.each(_node.relationships.children,function(t){t.line.toFront()}),_underscore2.default.invoke(_underscore2.default.pluck(_node.relationships.parents,"line"),"toFront"),_underscore2.default.invoke(_underscore2.default.pluck(_node.relationships.associations,"line"),"toFront"),_node.vect.toFront(),_node.text.toFront(),_node.link.toFront()},_node.toBack=function(){_node.link.toBack(),_node.text.toBack(),_node.vect.toBack(),_underscore2.default.each(_node.relationships.children,function(t){t.line.toBack()}),_underscore2.default.invoke(_underscore2.default.pluck(_node.relationships.parents,"line"),"toBack"),_underscore2.default.invoke(_underscore2.default.pluck(_node.relationships.associations,"line"),"toBack")},_node.hide=function(){_node.vect.hide(),_node.text.hide(),_node.options.link.show&&_node.link.hide()},_node.show=function(){_node.vect.show(),_node.text.show(),_node.options.link.show&&_node.link.show()},_node.rotateMoveVector=function(t){var e=t.dx,n=t.dy,o=-_node.options.rotate.rotationAngle*Math.PI/180;return{dx:e*Math.cos(o)-n*Math.sin(o),dy:e*Math.sin(o)+n*Math.cos(o)}},_node.getTempPathWithCorrectPositionFor=function(t){var e=t.pathElement,n=t.dx,o=t.dy,i=t.rotationAngle,r=_node.slate.paper.path(e.attr("path").toString()).attr({opacity:0}),a=[],s=r.getBBox();if(!_underscore2.default.isUndefined(n)&&!_underscore2.default.isUndefined(o))if(_node.options.rotate.rotationAngle){var l=_node.rotateMoveVector({dx:n,dy:o});a.push("T"+l.dx+","+l.dy)}else a.push("T"+n+","+o);_underscore2.default.isUndefined(i)?_node.options.rotate.rotationAngle&&a.push("r"+_node.options.rotate.rotationAngle+", "+_node.options.rotate.point.x+", "+_node.options.rotate.point.y):a.push("r"+i+", "+s.cx+", "+s.cy),r.transform("");var c=(0,_getTransformedPath2.default)(r.attr("path").toString(),a);return r.attr({path:c}),r},_node.setPosition=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_node.options.xPos=t.x,_node.options.yPos=t.y;var i=_node.linkCoords();_node.text.attr(_node.textCoords(o)),_node.link.transform(["t",i.x,",",i.y,"s",".8",",",".8","r","180"].join()),!0!==e&&(_node.slate.nodes.closeAllMenus(n),_node.slate.nodes.closeAllLineOptions())},_node.hideOwnMenus=function(){_node.link.hide(),_node.menu.hide()},_node.move=function(t){_node.slate.nodes.closeAllLineOptions();var e=t.data||t,n=e.dur||Meteor.collabAnimationDuration||300,o=e.easing||">",i=(0,_getDepCoords2.default)(e,_node.options),r=i.lx,a=i.tx,s=i.ty;_node.slate.isAlt=e.isAlt||!1,_node.slate.isShift=e.isShift||!1,_node.hideOwnMenus();var l=e.x-_node.options.xPos,c=e.y-_node.options.yPos;_node.relationships.updateAssociationsWith({currentDx:l,currentDy:c,activeNode:_node.options.id,isUp:!1,isShift:e.isShift,isAlt:e.isAlt}),_node.relationships.syncAssociations(_node,function(t,e){var i={x:t.options.xPos+l,y:t.options.yPos+c};switch(t.options.vectorPath){case"ellipse":i={cx:t.options.xPos+l,cy:t.options.yPos+c}}var r=(0,_getDepCoords2.default)(i,t),a=window.setInterval(function(){t.relationships.refresh(!0)},10);t.vect.animate(i,n,o,function(){window.clearInterval(a)}),t.text.animate({x:r.tx,y:r.ty},n,o),t.link.animate({x:r.lx,y:r.ty},n,o);var s=Raphael.transformPath(e.line.attr("path"),"T"+l+","+c);e.line.animate({path:s},n,o)});var u=function(t){_node.relationships.refresh(!0)},d={};switch(_node.options.vectorPath){case"ellipse":d={cx:e.x,cy:e.y};break;case"rectangle":case"roundedrectangle":d={x:e.x,y:e.y},_node.vect.animate({transform:"T"+l+","+c},n,o);break;default:d={transform:"T"+l+","+c}}var h=function(t){var n=t.vect.getBBox(),o="ellipse"===t.options.vectorPath?n.cx:n.x,i="ellipse"===t.options.vectorPath?n.cy:n.y;t.options.xPos=o,t.options.yPos=i;var r=Raphael.transformPath(t.vect.attr("path"),"T"+l+","+c);t.vect.transform(""),d={path:r},t.vect.attr(d),t.relationships.updateAssociationsWith({currentDx:0,currentDy:0,isUp:!0,isAnimating:!1,isBeingAnimated:!1,isShift:e.isShift,isAlt:e.isAlt}),t.relationships.refresh();var a=t.linkCoords();t.link.transform(["t",a.x,",",a.y,"s",".8",",",".8","r","180"].join()),t.options.link&&t.options.link.show&&t.link.show(),t.slate.birdseye&&t.slate.birdseye.refresh(!0)};_node.text.animate({x:a,y:s},n,o),_node.link.animate({x:r,y:s},n,o),eve.on("raphael.anim.frame.*",u),_node.vect.animate(d,n,o,function(){eve.unbind("raphael.anim.frame.*",u),h(_node),_node.relationships.syncAssociations(_node,function(t,n){t.relationships.updateAssociationsWith({activeNode:n.activeNode,currentDx:l,currentDy:c,isShift:e.isShift,isAlt:e.isAlt}),e.isAlt&&e.isShift||n.activeNode!==n.parent.options.id||e.isShift||h(t)}),_node.slate.isAlt=!1,_node.slate.isShift=!1,t.cb&&t.cb()})},_node.zoom=function(t,e,n){_node.slate.canvas.zoom({dur:e,zoomPercent:t,callbacks:{during:function(t,e){},after:function(t){n&&n.apply(this,[{id:_node.options.id,operation:"zoom",zoomLevel:t}])}}})},_node.position=function(t,e,n,o){n=n||"easeTo",o=o||500;var i=_node.vect.getBBox(),r=_node.slate.options.viewPort.zoom.r,a=$s.getDimensions(_node.slate.options.container),s=a.width,l=a.height,c=_node.options.width*r,u=_node.options.height*r,d=i.x*r,h=i.y*r;switch(t){case"lowerright":d=d-(s-c)-10,h=h-(l-u)-10;break;case"lowerleft":d-=10,h=h-(l-u)-10;break;case"upperright":d=d-(s-c)-10,h-=10;break;case"upperleft":d-=10,h-=10;break;default:d-=s/2-c/2,h-=l/2-u/2}d===_node.slate.options.viewPort.left&&h===_node.slate.options.viewPort.top?e.apply():_node.slate.canvas.move({x:d,y:h,dur:o,callbacks:{after:function(){e.apply(this,[{id:_node.options.id,operation:"position",location:t,easing:n}])}},isAbsolute:!0,easing:n})},_node.mark=function(){var t=_node.vect.getBBox(),e=t.x,n=t.y;_marker?_marker.attr({x:e-10,y:n-10,width:t.width+20,height:t.height+20}):_marker=_node.slate.paper.rect(e-10,n-10,t.width+20,t.height+20,10).attr({"stroke-width":_node.options.borderWidth,stroke:"red",fill:"#ccc","fill-opacity":.8}).toBack()},_node.unmark=function(){_marker&&_marker.remove(),_marker=null};var lm;return _node.unbutton=function(){lm&&lm.unbutton()},_node.button=function(t){(lm=_node.slate.paper.set()).push(_node.vect),lm.push(_node.text),_underscore2.default.extend(t,{node:_node}),lm.button(t)},_node.disable=function(){_node.options.allowMenu=!1,_node.options.allowDrag=!1,_node.hideOwnMenus(),_node.slate.options.showLocks&&_node.showLock(),_node.relationships.unwireHoverEvents()},_node.enable=function(){_node.options.allowMenu=!0,_node.options.allowDrag=!0,_node.hideLock(),_node.relationships.wireHoverEvents()},_node.showLock=function(){var t=_node.vect.getBBox(),e=_node.slate.paper;return!_lock&&_node.slate.options.showLocks&&((_lock=e.lockClosed().transform(["t",t.x2+10,",",t.y-20,"s",.9,.9].join()).attr({fill:"#fff",stroke:"#000"})).mouseover(function(t){_node.slate.unglow(),_node.hideLock();var e=_node.showOpenLock();_node.slate.glow(e)}),_lock.mouseout(function(t){_node.slate.unglow()})),_lock},_node.hideLock=function(){_node.hideOpenLock(),_lock&&_lock.remove(),_lock=null,_node.slate.unglow()},_node.showOpenLock=function(){var t=_node.vect.getBBox(),e=_node.slate.paper;return(_openLock=e.lockOpen().transform(["t",t.x2+10,",",t.y-20,"s",.9,.9].join()).attr({fill:"#fff",stroke:"#000"})).mouseover(function(t){_node.slate.unglow(),_node.slate.glow(this)}),_openLock.mouseout(function(t){_node.hideOpenLock(),_node.showLock(),_node.slate.unglow()}),_openLock.mousedown(function(t){_node.enable()}),_openLock},_node.hideOpenLock=function(){_openLock&&_openLock.remove(),_openLock=null},_node.initLock=function(){!_node.vect||_node.options.allowDrag||_node.options.allowMenu||_node.showLock()},_node.offset=function(){var t=_node.options.xPos-_node.slate.options.viewPort.left,e=_node.options.yPos-_node.slate.options.viewPort.top;return"ellipse"===_node.options.vectorPath&&(t-=_node.options.width/2,e-=_node.options.height/2),{x:t,y:e}},_node.textCoords=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=_node.slate.paper.path(_node.vect.attr("path")).transform(t.transformString||""),n=e.getBBox(),o=n.cx+(_node.vect.currentDx||0),i=n.cy+(_node.vect.currentDy||0);return e.remove(),{x:o,y:i}},_node.linkCoords=function(){var t=_node.options.xPos-20,e=_node.options.yPos+_node.options.height/2-22;return"rect"!==_node.vect.type&&(e=_node.options.yPos+_node.options.height/2-22,t=_node.options.xPos-20),{x:t,y:e}},_node.animCoords=function(){_self._.options.vectorPath,_self._.vect.ox,dx,_self._.vect.oy,dy},_node.init=function(){_node.options.id>-1&&$s.ajax(url(_node.options.ajax.nodeCreated),function(respText,resp){_node.options.holdData=eval("("+respText+")"),bindSlates(_node.options.holdData)},JSON.stringify(_node.options))},_node.rotate=function(t){var e={angle:0,cb:null,dur:0};_underscore2.default.extend(e,t);var n=["r",e.angle].join("");if(0===e.dur)_node.vect.transform(n),_node.text.transform(n),_node.options.link.show&&_node.link.transform(n),e.cb&&e.cb();else{var o=_node.slate.paper.set();o.push(_node.vect),o.push(_node.text),_node.options.link.show&&o.push(_node.link),o.animate({transform:n},e.dur,">",function(){e.cb&&e.cb()})}},_underscore2.default.each($s.fn.node.fn,function(t){if(_underscore2.default.isFunction(t)&&"_"===arguments[1].substring(0,1)){var e=arguments[1].replace("_","");_node[e]={},_node[e]=t.apply(_node[e]),_node[e]._=_node}}),_node},$s.fn.node.fn=$s.fn.node.prototype={}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.slate.fn._birdseye=function(){function e(){i.style.left=u.width-c.size+"px",i.style.top="-2px"}function n(){a.drag(y,g,_)}void 0===Raphael&&alert("You must load Raphael in order to use the Slatebox.slate.birdseye.js plugin!");var i,r,a,s,l,c,u,d,h,f,p,v=this;v.show=function(n){c={size:200,onHandleMove:null},o.default.extend(c,n);var a=v._.options.container;u=t.getDimensions(a),(i=document.createElement("div")).setAttribute("id","slateBirdsEye_"+v._.options.id),i.setAttribute("class","slateBirdsEye"),i.style.position="absolute",i.style.height=c.size+"px",i.style.width=c.size+"px",i.style.border="2px inset #333",i.style.backgroundColor="#fff",a.appendChild(i),e(),r=t.instance.slate({container:t.el("slateBirdsEye_"+v._.options.id),viewPort:{allowDrag:!1},collaboration:{allow:!1},showZoom:!1,showUndoRedo:!1,showMultiSelect:!1,showBirdsEye:!1,showLocks:!1,imageFolder:"",events:{onNodeDragged:function(){v._.nodes.copyNodePositions(r.nodes.allNodes)}}}).init(),v.refresh(),t.addEvent(window,"resize",function(){var n=v._.options.container;u=t.getDimensions(n),e()}),v._.options.showBirdsEye||v.disable()},v.enabled=function(){return void 0!==r},v.enable=function(){r||v.show(),t.el("slateBirdsEye_"+v._.options.id).style.display="block"},v.disable=function(){t.el("slateBirdsEye_"+v._.options.id).style.display="none"},v.relationshipsChanged=function(t){if(r)switch(t.type){case"removeRelationship":r.nodes.removeRelationship(t.data);break;case"addRelationship":var e=JSON.parse(JSON.stringify(t));o.default.extend(e.data,{options:{lineWidth:1}}),r.nodes.addRelationship(e.data)}},v.nodeChanged=function(t){if(r){var e;switch(t.type){case"onNodeShapeChanged":(e=r.nodes.one(t.data.id)).shapes.set(t.data);break;case"onNodeTextChanged":(e=r.nodes.one(t.data.id)).editor.set(t.data.text,t.data.fontSize,t.data.fontColor);break;case"onNodeColorChanged":(e=r.nodes.one(t.data.id)).colorpicker.set(t.data);break;case"onNodeImageChanged":(e=r.nodes.one(t.data.id)).images.set(t.data.img,t.data.w,t.data.h,!0);break;case"onNodeResized":e=r.nodes.one(t.data.id),o.default.extend(e.options,t.data),e.resize.set(t.data.width,t.data.height),e.vect.pattern&&e.resize.nodeSizeCorrection(!0);break;case"onNodeRotated":e=r.nodes.one(t.data.id),o.default.each(t.data.associations,function(t){var n=o.default.find(e.relationships.associations,function(e){return e.child.options.id===t.child.options.id&&e.parent.options.id===t.parent.options.id});n&&n.line.attr({path:t.line.attr("path").toString()})}),delete t.data.associations,o.default.extend(e.options,t.data);var n=Meteor.currentSlate.paper.path(e.vect.attr("path")),i={boundingClientRect:n[0].getBoundingClientRect()};n.remove(),e.rotate.applyImageRotation(i);break;case"onNodeToFront":(e=r.nodes.one(t.data.id)).vect.toFront();break;case"onNodeToBack":(e=r.nodes.one(t.data.id)).vect.toBack();break;case"onNodeLocked":(e=r.nodes.one(t.data.id)).options.allowDrag=!1;case"onNodeUnlocked":(e=r.nodes.one(t.data.id)).options.allowDrag=!0;break;case"changeLineColor":(e=r.nodes.one(t.data.id)).lineOptions.set(t.data);break;case"onNodesMove":e=v._.nodes.one(t.data.id),r.nodes.moveNodes(t,{useMainCanvas:!0})}}},v.nodeDeleted=function(t){r&&r.nodes.one(t.data.id).del()},v.nodeDetatched=function(t){r&&r.nodes.one(t.data.id).relationships.detatch()},v.reload=function(t){a&&a.remove(),r.loadJSON(t),v.refresh(!0)},v.refresh=function(e){if(r){var o=v._.options.container;if(u=t.getDimensions(o),a&&a.remove(),!0===e){r.canvas.move({x:v._.options.viewPort.left,y:v._.options.viewPort.top,dur:0,isAbsolute:!0});r.nodes.copyNodePositions(v._.nodes.allNodes,!0)}else{var i=v._.exportDifference(r,1);r.loadJSON(i,!0,!0,!0,!0)}s=v._.getOrientation(),f=v._.options.viewPort.left<s.left?v._.options.viewPort.left-s.left:v._.options.viewPort.left-s.left+(u.width-s.width),p=v._.options.viewPort.top-s.top;var d=Math.max(Math.abs(f),s.width<u.width?u.width-s.width:0),h=Math.max(Math.abs(p),s.height<u.height?u.height-s.height:0),g=(s.width+d)/c.size*v._.options.viewPort.width,y=(s.height+h)/c.size*v._.options.viewPort.height;l=Math.max(g,y);var _=Math.max(v._.options.viewPort.width,v._.options.viewPort.height)/l,m=(s.left+(f<0?f:0))*_-5,x=(s.top+(p<0?p:0))*_-5;r.zoom(0,0,l,l,!0),r.options.viewPort.zoom.r=r.options.viewPort.originalWidth/l,r.canvas.move({x:m,y:x,dur:0,isAbsolute:!0}),r.disable();var b=v._.options.viewPort.left/v._.options.viewPort.zoom.r,w=v._.options.viewPort.top/v._.options.viewPort.zoom.r,k=u.width/v._.options.viewPort.zoom.r,P=u.height/v._.options.viewPort.zoom.r;a=r.paper.rect(b,w,k,P).attr({stroke:"red","stroke-width":1,fill:"#f8f8f8","fill-opacity":".6"}),n()}};var g=function(){a.ox=this.attr("x"),a.oy=this.attr("y")},y=function(t,e){var n=r.options.viewPort.originalWidth/l;t+=t/n-t,e+=e/n-e;var i=a.ox+t,u=a.oy+e;a.attr({x:i,y:u});var f=a.getBBox(),p=f.x*v._.options.viewPort.zoom.r,g=f.y*v._.options.viewPort.zoom.r;o.default.isFunction(c.onHandleMove)&&c.onHandleMove.apply(this,[p,g]),v._.canvas.move({x:p,y:g,dur:0,isAbsolute:!0}),d=f.x,h=f.y,_lastOrx=s},_=function(t){v.refresh(),v._.canvas.broadcast()};return v}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.slate.fn._canvas=function(){void 0===Raphael&&alert("You must load Raphael in order to use the Slatebox.slate.canvas.js plugin!");var e,n,i,r,a=this,s=null,l=function(e){var n=t.mousePos(e);return difX=c.objInitPos.left+(n.x-c.objInitialMousePos.x),difY=c.objInitPos.top+(n.y-c.objInitialMousePos.y),_width=a._.options.containerStyle.width,_height=a._.options.containerStyle.height,_vpWidth=a._.options.viewPort.width,_vpHeight=a._.options.viewPort.height,difX>0?difX=0:Math.abs(difX)+_width>_vpWidth&&(difX=_width-vpWidth),difY>0?difY=0:Math.abs(difY)+_height>_vpHeight&&(difY=_height-_vpHeight),{x:difX,y:difY}},c={objInitPos:{},objInitialMousePos:{x:0,y:0},kinetic:null,isDragging:!1,initDrag:function(e){if(a._.options.events&&a._.options.events.onCanvasClicked&&a._.options.events.onCanvasClicked(),a._.options.viewPort.allowDrag){a._.multiselection&&a._.multiselection.end(),this.isDragging=!0;var s=t.mousePos(e);c.objInitPos=t.positionedOffset(n);var u=t.positionedOffset(a._.options.container);c.objInitialMousePos={x:s.x+u.left,y:s.y+u.top};var d=l(e);i.innerHTML=Math.abs(d.x)+", "+Math.abs(d.y),a._.options.showStatus&&(i.style.display="block",a._.multiselection&&a._.multiselection.hide()),n.style.cursor="url("+r+"closedhand.cur), default",s.allTouches&&(a._.options.lastTouches=s.allTouches),o.default.isFunction(a._.removeContextMenus)&&a._.removeContextMenus(),t.stopEvent(e)}else o.default.isFunction(a._.onSelectionStart)?a._.onSelectionStart.apply(this,[e]):t.stopEvent(e)},setCursor:function(t){this.isDragging?n.style.cursor="url("+r+"closedhand.cur), default":n.style.cursor="url("+r+"openhand.cur), default"},onDrag:function(t){if(this.isDragging&&a._.options.viewPort.allowDrag){var e=l(t);e.allTouches&&e.allTouches.length>1&&(a._.options.lastTouches=e.allTouches),i.innerHTML=Math.abs(e.x)+", "+Math.abs(e.y),n.style.left=e.x+"px",n.style.top=e.y+"px"}},endDrag:function(t){if(this.isDragging&&a._.options.viewPort.allowDrag){this.isDragging=!1,n.style.cursor="url("+r+"openhand.cur), default",i.style.display="none",a._.multiselection&&a._.multiselection.show();var e=l(t);a.endDrag(e)}}};a.endDrag=function(t){a._.options.viewPort.left=Math.abs(t.x),a._.options.viewPort.top=Math.abs(t.y),n.style.left=t.x+"px",n.style.top=t.y+"px",a._.birdseye&&a._.birdseye.refresh(!0),a._.options.collaboration.allow&&a.broadcast()},a.broadcast=function(){a._.collab&&a._.collab.send({type:"onCanvasMove",data:{left:a._.options.viewPort.left,top:a._.options.viewPort.top}})},a.zoom=function(t){var e={dur:500,callbacks:{after:null,during:null},easing:"easeFromTo",zoomPercent:100};o.default.extend(e,t),a._.nodes.closeAllConnectors();var i=o.default.isFunction(e.callbacks.during),r=a._.options.viewPort.zoom.w,s=a._.options.viewPort.originalWidth*(100/parseInt(e.zoomPercent)),l=Math.abs(s-r);e.dur=e.dur||500,emile(n,"padding:1px",{duration:e.dur,before:function(){a._.options.viewPort.allowDrag=!1},after:function(){a._.options.viewPort.allowDrag=!0,a._.zoomSlider.set(s),a._.birdseye&&a._.birdseye.refresh(!0),e.callbacks.after&&e.callbacks.after.apply(a,[s])},during:function(t){var n=s>r?r+l*t:r-l*t;a._.zoom(0,0,n,n,!1),a._.canvas.resize(n),i&&e.callbacks.during.apply(this,[t])},easing:a.easing[e.easing]})},a.scaleToFitNodes=function(e){var n={nodes:[],dur:500,cb:null,offset:0,minWidth:60,minHeight:30};o.default.extend(n,e);var i=a._.getOrientation(n.nodes),r=t.getDimensions(a._.options.container),s=a._.options.viewPort.zoom.r||1,l=1,c=parseInt(r.width/(i.width/s)*100),u=parseInt(r.height/(i.height/s)*100);switch(i.orientation){case"landscape":l=c;break;case"portrait":l=u}console.log("zoom ",l,i.orientation),a.zoom({dur:n.dur,callbacks:{after:function(){n.cb&&n.cb()}},easing:"easeFromTo",zoomPercent:l})},a.centerOnNodes=function(e){var n={nodes:[],dur:500,cb:null};o.default.extend(n,e);var i=a._.getOrientation(n.nodes),r=t.getDimensions(a._.options.container),s=r.width,l=r.height,c=i.width,u=i.height,d=i.left-(s/2-c/2),h=i.top-(l/2-u/2);a.move({x:d,y:h,isAbsolute:!0,dur:n.dur,easing:"swingFromTo",callbacks:{after:function(){n.cb&&n.cb()}}})},a.center=function(e){var n={previousWindowSize:{},dur:500,cb:null};o.default.extend(n,e);var i=t.windowSize();return a.move({x:(i.width-n.previousWindowSize.w)/2*-1,y:(i.height-n.previousWindowSize.h)/2*-1,duration:n.dur,isAbsolute:!1,easing:"swingFromTo",callbacks:{after:function(){n.cb&&n.cb()}}}),i},a.move=function(t){var e={x:0,y:0,dur:500,callbacks:{after:null,during:null},isAbsolute:!0,easing:"easeFromTo"};o.default.extend(e,t),a._.nodes.closeAllConnectors();var i=e.x,r=e.y,s=o.default.isFunction(e.callbacks.during);!1===e.isAbsolute&&(i=a._.options.viewPort.left+i,r=a._.options.viewPort.top+r),e.dur>0?emile(n,"left:"+-1*i+"px;top:"+-1*r+"px",{duration:e.dur,before:function(){a._.options.viewPort.allowDrag=!1},after:function(){a._.options.viewPort.allowDrag=!0,a._.options.viewPort.left=Math.abs(parseInt(n.style.left.replace("px",""))),a._.options.viewPort.top=Math.abs(parseInt(n.style.top.replace("px",""))),a._.birdseye&&a._.birdseye.refresh(!0),e.callbacks.after&&e.callbacks.after.apply(a)},during:function(t){s&&e.callbacks.during.apply(this,[t])},easing:a.easing[e.easing]}):(n.style.left=-1*i+"px",n.style.top=-1*r+"px",a._.options.viewPort.left=Math.abs(i),a._.options.viewPort.top=Math.abs(r))},a.resize=function(e){e=parseInt(e);var o=a._.options.viewPort.width/e,i=t.getDimensions(a._.options.container),r=-1*a._.options.viewPort.top*o,s=-1*a._.options.viewPort.left*o;r+=-1*(i.height/2*o-i.height/2),s+=-1*(i.width/2*o-i.width/2),n.style.top=r+"px",n.style.left=s+"px",a._.options.viewPort.zoom={w:e,h:e,l:parseInt(-1*s),t:parseInt(-1*r),r:a._.options.viewPort.originalWidth/e}},a.clear=function(){return a._.options.container.innerHTML="",a._};var u={init:["onmousedown","ontouchstart"],drag:["onmousemove","ontouchmove"],up:["onmouseup","ontouchend","onmouseout"],gest:["ongesturestart","ongesturechange","ongestureend"]};return a.wire=function(){for(var e in u.init)n[u.init[parseInt(e)]]=c.initDrag;for(var e in u.drag)n[u.drag[parseInt(e)]]=c.onDrag;for(var e in u.up)n[u.up[parseInt(e)]]=c.endDrag;var o,i,r;n.ongesturestart=function(t){if(t.preventDefault(),a._.options.viewPort.allowDrag=!1,a._.options.lastTouches){var e=a._.options.lastTouches;i=e[0].x,r=e[0].y,e.length>1&&(i=(Math.max(e[0].x,e[1].x||0)-Math.min(e[0].x,e[1].x||e[0].x))/2,r=(Math.max(e[0].y,e[1].y||0)-Math.min(e[0].y,e[1].y||e[0].y))/2),o=a._.options.viewPort.zoom.w}},n.ongesturechange=function(e){var n=o/e.scale;a._.zoom(0,0,n,n,!1),a._.canvas.resize(n),t.select("li.rmitem")[0].innerHTML=a._.options.lastTouches[0].x+" , "+a._.options.lastTouches[1].x},n.ongestureend=function(t){a._.options.viewPort.allowDrag=!0;var e=a._.options.viewPort.zoom,n=a._.options.viewPort;n.width=e.w,n.height=e.h,n.left=e.l,n.top=e.t}},a.unwire=function(){for(var t in u.init)n[u.init[parseInt(t)]]=null;for(var t in u.drag)n[u.drag[parseInt(t)]]=null;for(var t in u.up)n[u.up[parseInt(t)]]=null;for(var t in u.gest)n[u.gest[parseInt(t)]]=null},a.init=function(o){var s=a._.options.container,l=a._.options;if(r=l.imageFolder||"/images/","string"==typeof s&&(s=t.el(s)),void 0===s||null===s)throw new Error("You must provide a container to initiate the canvas!");s.innerHTML="",e&&e.clear(),n&&s.removeChild(n),(n=document.createElement("div")).setAttribute("class","slateboxInternal"),s.appendChild(n);t.getDimensions(s);(i=document.createElement("div")).style.position="absolute",i.style.height="20px",i.style.left="5px",i.style.color="#000",i.style.fontSize="10pt",i.style.fontFamily="trebuchet ms",i.style.top="0px",i.style.display="none",i.style.padding="5px",i.style.filter="alpha(opacity=80)",i.style.opacity=".80",i.style.backgroundColor="#ffff99",i.style.fontWeight="bold",s.appendChild(i);var c=l.containerStyle;s.style.position="relative",s.style.overflow="hidden";var u=l.viewPort.width,d=l.viewPort.height,h=l.viewPort.left,f=l.viewPort.top;return n.style.width=u+"px",n.style.height=d+"px",n.style.left=-1*h+"px",n.style.top=-1*f+"px",n.style.position="absolute",a.borderTop=a.borderTop+2||2,n.style.borderTop=a.borderTop+"px",n.style.cursor="url("+r+"openhand.cur), default",n.style.backgroundColor=c.backgroundColor||"#fff",l.viewPort.allowDrag&&a.wire(),console.log("creating canvas ",u,d,n),e=Raphael(n,u,d),l.viewPort.originalHeight=d,l.viewPort.originalWidth=u,a.resize(u),l.showZoom&&(a._.zoomSlider.show(),a._.zoomSlider.setValue(l.viewPort.width)),l.showUndoRedo&&a._.undoRedo.show(),l.showBirdsEye&&(a._.birdseye.enabled()?a._.birdseye.reload(a._.exportJSON()):a._.birdseye.show({size:l.sizeOfBirdsEye||200,onHandleMove:function(t,e){}})),a._.paper=e,a._},a.rawSVG=function(){return n.innerHTML},a.darken=function(e){if(null===s){s=document.createElement("div");var n=t.windowSize();s.style.backgroundColor="#ccc",s.style.position="absolute",s.style.left="0px",s.style.top="0px",s.style.width=n.width+"px",s.style.height=n.height+"px",s.style.zIndex=999,s.style.filter="alpha(opacity="+e+")",s.style.opacity=e/100,document.body.appendChild(s)}return s},t.addEvent(window,"resize",function(){if(null!==s){var e=t.windowSize();s.style.width=e.width+"px",s.style.height=e.height+"px"}}),a.lighten=function(){s&&document.body.removeChild(s),s=null},a.refreshBackground=function(){n.style.backgroundColor=a._.options.containerStyle.backgroundColor||"#fff"},a.get=function(){return n},a.draggable=function(){return n},a.easing={elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},swingFromTo:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)},none:function(t){return-Math.cos(t*Math.PI)/2+.5}},a}}(Slatebox)},function(t,e,n){"use strict";!function(t,e){Slatebox.fn.slate.fn._keyboard=function(){function e(e,o){switch(t.getKey(e)){case 17:n._.isCtrl=o;break;case 16:n._.isShift=o;break;case 18:n._.isAlt=o}}var n=this,o=null;n.start=function(e){o=e,t.addEvent(document,"keydown",i)};var i=function(e){var i=t.getKey(e);if(o){switch(o.context&&o.context.remove(),i){case 39:o.connectors.addNode(!0);break;case 46:o.toolbar.del()}return t.stopEvent(e)}if(n._.multiselection&&n._.multiselection.isSelecting())switch(i){case 46:n._.multiselection.del()}};n.end=function(){o=null,n._.multiselection.isSelecting()||t.removeEvent(document,"keydown",i)};return t.addEvent(document,"keydown",function(t){e(t,!0)}),t.addEvent(document,"keyup",function(t){setTimeout(function(){e(t,!1)},100)}),n}}(Slatebox)},function(t,e,n){"use strict";!function(t,e){Slatebox.fn.slate.fn._message=function(){var e=this;return e.show=function(n,o){var i=e._.messageBox,r=t.getDimensions(e._.options.container);if(void 0===e._.messageBox){var a=e._.paper;(i=e._.messageBox=a.set()).push(a.rect(0,0,r.width,28,7).attr({fill:"#ffff99"})),i.push(a.text(0,0,"").standard())}i.show(),i[1].attr({text:n});var s=i[1].getBBox().width;i[0].attr({width:s+12});var l=e._.options.viewPort.left+(r.width-i[0].attr("width"))/2,c=e._.options.viewPort.top+3;i[0].attr({x:l,y:c,"fill-opacity":0}),i[1].attr({x:l+s/2+6,y:c+13,"fill-opacity":0}),i.animate({"fill-opacity":1},500,function(){setTimeout(function(){i.animate({"fill-opacity":0},500,function(){i.hide()})},o)})},e}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e,n){Slatebox.fn.slate.fn._collab=function(){function e(e){if(t.localRecipients.length>1){var n=0;for(var o in t.localRecipients)n+=10,function(t,n){setTimeout(function(){t._.collab.invoke(e)},n)}(t.localRecipients[o],n)}else a[e.type]?(l._.undoRedo&&l._.undoRedo.hide(),a[e.type](e)):s.onCollaboration&&s.onCollaboration({type:"custom",slate:l._,pkg:e})}function n(){a={onZoom:function(t){var e=l._.options.viewPort.originalWidth/t.data.zoomLevel*100;l._.canvas.zoom({dur:t.data.duration||500,zoomPercent:e,callbacks:{during:function(t,e){},after:function(e){i(t,"That was me\n zooming the canvas!")}}})},onNodePositioned:function(t){l._.nodes.one(t.data.id).position(t.data.location,function(){},t.data.easing,t.data.duration||500),i(t,"That was me\n positioning the node!")},onNodeLinkRemoved:function(t){cn=l._.nodes.one(t.data.id),cn.links&&cn.links.unset(),i(t,"That was me\n removing the link!")},onNodeLinkAdded:function(t){cn=l._.nodes.one(t.data.id),cn.links&&cn.links.set(t.data.linkType,t.data.linkData),i(t,"That was me\n adding the resource link!")},onNodeUnlocked:function(t){cn=l._.nodes.one(t.data.id),cn.options.allowDrag=!0,l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n unlocking the node!")},onNodeLocked:function(t){cn=l._.nodes.one(t.data.id),cn.options.allowDrag=!1,l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n locking the node!")},onNodeToBack:function(t){cn=l._.nodes.one(t.data.id),cn.vect.toBack(),l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n send to back!")},onNodeToFront:function(t){cn=l._.nodes.one(t.data.id),cn.vect.toFront(),l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n bringing to front!")},onNodeShapeChanged:function(t){cn=l._.nodes.one(t.data.id),cn.shapes.set(t.data),l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n changing the shape!")},onNodeAdded:function(t){var e=void 0===t.preserve||t.preserve;l._.loadJSON(t.data,e,!0),i(t,"That was me\n adding the node!")},onNodeImageChanged:function(t){cn=l._.nodes.one(t.data.id),cn.images.set(t.data.img,t.data.w,t.data.w),l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n changing the image!")},onNodeDeleted:function(t){cn=l._.nodes.one(t.data.id),cn.del(),l._.birdseye&&l._.birdseye.nodeDeleted(t),i(t,"That was me\n deleting the node!")},onNodeResized:function(t){cn=l._.nodes.one(t.data.id),cn.hideOwnMenus(),o.default.extend(cn.options,t.data),cn.resize.set(t.data.width,t.data.height,500),l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n changing the size!")},onNodeRotated:function(t){cn=l._.nodes.one(t.data.id),cn.hideOwnMenus();var e=cn.options.rotate.rotationAngle;o.default.extend(cn.options,t.data),cn.rotate.set(t.data.rotate.rotationAngle-e,500),l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n rotating the node!")},onNodeColorChanged:function(t){cn=l._.nodes.one(t.data.id),cn.colorpicker.set(t.data),l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n changing the color!")},onNodeTextChanged:function(t){cn=l._.nodes.one(t.data.id),cn.editor.set(t.data.text,t.data.fontSize,t.data.fontColor),l._.birdseye&&l._.birdseye.nodeChanged(t),i(t,"That was me\n changing the text!")},addRelationship:function(t){l._.nodes.addRelationship(t.data),l._.birdseye&&l._.birdseye.relationshipsChanged(t),i(t,"That was me\n adding the relationship!")},removeRelationship:function(t){l._.nodes.removeRelationship(t.data),l._.birdseye&&l._.birdseye.relationshipsChanged(t),i(t,"That was me\n removing the relationship!")},onNodeMove:function(t){cn=l._.nodes.one(t.data.id),cn.move(t),i(t,"That was me\n moving the node!")},onNodesMove:function(t){cn=l._.nodes.one(t.data.id);cn.slate.nodes.moveNodes(t,{animate:!0}),cn.slate.birdseye&&cn.slate.birdseye.nodeChanged(t),i(t,"That was me\n moving the node!")},changeLineColor:function(t){cn=l._.nodes.one(t.data.id),cn.lineOptions.set(t.data),i(t,"That was me\n changing the line color!"),l._.birdseye&&l._.birdseye.nodeChanged(t)},changeLineWidth:function(t){cn=l._.nodes.one(t.data.id),cn.lineOptions.set(t.data),i(t,"That was me\n changing the line width!")},toggleParentArrow:function(t){cn=l._.nodes.one(t.data.id),cn.lineOptions.set(t.data),i(t,"That was me\n adding the arrow!")},toggleChildArrow:function(t){cn=l._.nodes.one(t.data.id),cn.lineOptions.set(t.data),i(t,"That was me\n adding the arrow!")},onCanvasMove:function(t){var e={x:t.data.left,y:t.data.top,dur:t.data.duration||500,callback:{after:function(){l._.birdseye&&l._.birdseye.refresh(!0)}},isAbsolute:!0};l._.canvas.move(e),i(t,"That was me\n moving the canvas!")}},s.onCollaboration&&s.onCollaboration({type:"init",slate:l._,cb:function(t){e(t)}}),s.localizedOnly&&t.localRecipients.push(l)}function i(t,e){}function r(t){l._.undoRedo&&l._.options.showUndoRedo&&l._.undoRedo.snap(),s.allow&&(o.default.isFunction(l._.options.onSlateChanged)&&l._.options.onSlateChanged.apply(this,[t]),s.onCollaboration&&s.onCollaboration({type:"process",slate:l._,pkg:t,cb:function(t){e(t)}}))}var a,s,l=this;return l.init=function(){s=l._.options.collaboration||{},t.localRecipients||(t.localRecipients=[]),n()},l.invoke=function(t){a[t.type](t)},l.send=function(t){r(t)},l}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.slate.fn._multiselection=function(){function e(){var t=c.getBBox(),e=t.x+t.width/2,n=t.y+t.height/2,i=t.height/d.height,r=t.width/d.width;o.default.each(u,function(t){var o=e+r*(t.options.xPos-e),a=n+i*(t.options.yPos-n);t.setPosition({x:o,y:a});var s=r*t.options.width,l=i*t.options.height;t.resize.set(s,l,0)})}function n(t){s._.collab&&s._.collab.send({type:"onNodeMove",data:{id:t.options.id,x:t.options.xPos,y:t.options.yPos}})}var i,r,a,s=this,l=null,c=null,u=[],d=null,h=null;s.init=function(){var e=s._.options.container;e&&((a=document.createElement("div")).setAttribute("class","slateMultiSelect"),a.style.position="absolute",a.style.height="30px",a.style.left="10px",a.style.color="#081272",a.style.fontSize="11pt",a.style.fontFamily="trebuchet ms",a.style.top="5px",a.style.display="block",a.style.padding="5px",a.style.margin="5px;",a.style.backgroundColor="#fff",a.style.cursor="pointer",a.innerHTML="[multi-select]",a.style.zIndex="0",e.appendChild(a),t.addEvent(a,"click",function(t){switch(a.innerHTML){case"[multi-select]":s.start();break;case"selecting [click to stop]...":s.end()}}))},s.hide=function(){a&&(a.style.display="none")},s.show=function(){a&&(a.style.display="block")},s.start=function(){s._.disable(),a.innerHTML="selecting [click to stop]...",s._.onSelectionStart=function(e){var n=f(e);l=s._.paper.rect(n.x,n.y,10,10).attr({"stroke-dasharray":"-"}),t.addEvent(s._.canvas.get(),"mousemove",v),t.addEvent(s._.canvas.get(),"mouseup",g),i=n.x,r=n.y}},s.isSelecting=function(){return null!==c},s.del=function(){confirm("Are you sure you want to remove the selected nodes?")&&(o.default.each(u,function(t){t.toolbar.del()}),s.end())},s.end=function(){null!==c&&(h.unmouseover(y),c.remove(),h.remove(),c=null,s._.keyboard&&s._.keyboard.end()),a&&(a.innerHTML="[multi-select]")},s.endSelection=function(){l&&l.remove(),s._.enable(),s._.onSelectionStart=null,t.removeEvent(s._.canvas.get(),"mousemove",v),t.removeEvent(s._.canvas.get(),"mouseup",g)};var f=function(e){var n=t.mousePos(e),o=t.positionedOffset(s._.options.container),i=n.x+s._.options.viewPort.left-o.left,r=n.y+s._.options.viewPort.top-o.top,a=s._.options.viewPort.zoom.r;return{x:i/a,y:r/a}},v=function(t){p=f(t);var e=p.y-r,n=p.x-i;e>0?l.attr({height:e}):l.attr({y:p.y,height:r-p.y}),n>0?l.attr({width:n}):l.attr({x:p.x,width:i-p.x})},g=function(t){var e=l.getBBox(),n=(s._.options.viewPort.left,s._.options.viewPort.top,s._.options.viewPort.zoom.r);if((u=o.default.filter(s._.nodes.allNodes,function(t){return t.options.xPos+t.options.width>e.x&&t.options.xPos<e.x+e.width&&t.options.yPos+t.options.height>e.y&&t.options.yPos<e.y+e.height})).length>1){var i=s._.getOrientation(u),r=i.width/n,a=i.height/n;r<100&&(r=100),a<100&&(a=100),(c=s._.paper.rect(i.left/n,i.top/n,r,a).attr({"stroke-dasharray":"-",fill:"#f8f8f8"})).toBack(),d=c.getBBox(),s.endSelection();var f=d.x+d.width,p=d.y+d.height;(h=s._.paper.resize(s._.options.imageFolder+"2_lines.png").transform(["t",f-5,",",p-5].join()).attr({fill:"#fff",stroke:"#000"})).mouseover(y),c.drag(_.move,_.init,_.up),h.drag(m.move,m.init,m.up),s._.unMarkAll(),o.default.each(u,function(t){t.connectors.remove(),t.resize.hide()}),s._.keyboard&&s._.keyboard.start()}else 1===u.length?(u[0].menu.show(),u[0].mark(),s.endSelection(),s.end()):(s.endSelection(),s.end())},y=function(t){h.attr({cursor:"nw-resize"})},_={init:function(t,e){s._.options.viewPort.allowDrag=!1,c.ox=c.attr("x"),c.oy=c.attr("y"),o.default.each(u,function(t){t.vect.ox="rect"==t.vect.type?t.vect.attr("x"):t.vect.attr("cx"),t.vect.oy="rect"==t.vect.type?t.vect.attr("y"):t.vect.attr("cy")})},move:function(t,e){var n=s._.options.viewPort.zoom.r;t+=t/n-t,e+=e/n-e;var i={x:c.ox+t,y:c.oy+e};c.attr(i),o.default.each(u,function(n){n.setPosition({x:n.vect.ox+t,y:n.vect.oy+e}),n.relationships.refresh()});var r=d.x+d.width+t-5,a=d.y+d.height+e-5;h.transform(["t",r,",",a].join(""))},up:function(t){s._.options.viewPort.allowDrag=!0,s._.birdseye&&s._.birdseye.refresh(!0);(0,o.default)(u).chain().pluck("options").pluck("id").value();o.default.each(u,function(t){n(t)}),d=c.getBBox()}},m={init:function(){s._.disable(),o.default.each(u,function(t){t.vect.ox="rect"==t.vect.type?t.vect.attr("x"):t.vect.attr("cx"),t.vect.oy="rect"==t.vect.type?t.vect.attr("y"):t.vect.attr("cy")})},move:function(t,e){var n=s._.options.viewPort.zoom.r;t+=t/n-t,e+=e/n-e;var i=d.width+2*t,r=d.height+2*e,a=d.x+d.width+t-5,l=d.y+d.height+e-5,u=!0,f=!0;i<100&&(i=100,u=!1),r<100&&(r=100,f=!1),h.transform(["t",a,",",l].join(""));var p={width:i,height:r};u&&o.default.extend(p,{x:d.x-t}),f&&o.default.extend(p,{y:d.y-e}),c.attr(p)},up:function(){s._.enable(),e(),o.default.each(u,function(t){t.resize.send(),n(t)}),s._.birdseye&&s._.birdseye.refresh(!0);var t=(d=c.getBBox()).x+d.width,i=d.y+d.height;h.transform(["t",t-5,",",i-5].join(""))}};return s}}(Slatebox)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=o(n(0)),r=o(n(1)),a=o(n(2));Slatebox,Slatebox.fn.slate.fn._nodes=function(){function t(){window.clearTimeout(l),l=window.setTimeout(function(){c._.birdseye&&c._.birdseye.refresh(!1)},10)}function e(t){var e,n;return i.default.each(c.allNodes,function(o){o.options.id===t.parent?e=o:o.options.id===t.child&&(n=o)}),{p:e,c:n}}function n(t,e){return i.default.filter(t,function(t){return t.options.id!==e.options.id})}function o(e){i.default.each(["vect","text","link"],function(t){e[t].remove()}),t()}function s(e,n){var o=null,i=null,a=null,s=e.options.borderColor||"#000";0===e.options.borderWidth&&(s="transparent");var l={stroke:s,"stroke-dasharray":e.options.borderStyle||"","stroke-width":e.options.borderWidth,fill:e.options.backgroundColor||"none"},u=e.options.xPos,d=e.options.yPos,h=c._.paper,f=["T"+1*u+", "+1*d,"s"+e.options.width/150*1+", "+e.options.height/100*1+", "+u+", "+d];switch(e.options.isEllipse=e.options.isEllipse||"ellispse"===e.options.vectorPath,e.options.vectorPath){case"ellipse":e.options.vectorPath=(0,r.default)("M150,50 a75,50 0 1,1 0,-1 z",f);break;case"rectangle":e.options.vectorPath=(0,r.default)("M1,1 h150 v100 h-150 v-100 z",f);break;case"roundedrectangle":e.options.vectorPath=(0,r.default)("M1,1 h130 a10,10 0 0 1 10,10 v80 a10,10 0 0 1 -10,10 h-130 a10,10 0 0 1 -10,-10 v-80 a10,10 0 0 1 10,-10 z",f)}(o=h.path(e.options.vectorPath).attr(l)).node.setAttribute("rel",e.options.id),o.data({id:e.options.id}),e.vect=o,e.vect.transform(e.getTransformString());var p=o.getBBox();e.options.xPos=p.x,e.options.yPos=p.y;var v=e.textCoords(),g=e.linkCoords();return i=h.text(v.x,v.y,e.options.text||"").attr({"font-size":e.options.fontSize+"pt",fill:e.options.foregroundColor||"#000"}),a=h.linkArrow().transform(["t",g.x,",",g.y,"s",".8",",",".8","r","180"].join()),e.text=i,e.link=a,e.relationships.wireHoverEvents(),e.relationships.wireDragEvents(),e.links&&e.links.wireEvents(),e.options.image&&""!==e.options.image&&e.images.set(e.options.image,e.options.imageOrigWidth,e.options.imageOrigHeight,n),e.options.link&&e.options.link.show||e.link.hide(),t(),o}var l,c=this;return c.allNodes=[],c.copyNodePositions=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.default.each(t,function(t){var n=i.default.detect(c.allNodes,function(e){return e.options.id===t.options.id});n.setPosition({x:t.options.xPos,y:t.options.yPos});var o={};if(e){var r=Meteor.currentSlate.paper.path(n.vect.attr("path"));o.boundingClientRect=r[0].getBoundingClientRect(),r.remove()}n.rotate.applyImageRotation(o)}),i.default.invoke(i.default.pluck(c.allNodes,"relationships"),"refresh")},c.addRange=function(t){return i.default.each(t,function(t){c.add(t)}),c},c.removeRange=function(t){return i.default.each(t,function(t){c.allNodes=removeNode(c.allNodes,t)}),c},c.add=function(t,e){t.slate=c._,c.allNodes.push(t),s(t,e)},c.remove=function(t){c.allNodes=n(c.allNodes,t),t.slate=null,o(t)},c.moveNodes=function(t,e){c.closeAllLineOptions(),c.closeAllMenus();var n=[];i.default.each(c.allNodes,function(t){i.default.each(t.relationships.associations,function(t){n.push(t)})});var o=i.default.uniq(n,function(t){return t.id}),r=t.data||t,s=r.dur||Meteor.collabAnimationDuration||300,l=r.easing||">",u=r.associations,d=r.nodeOptions;i.default.each(d,function(t){var n=i.default.find(c.allNodes,function(e){return e.options.id===t.id});i.default.extend(n.options,t);var o=(0,a.default)({x:t.xPos,y:t.yPos},n.options),r=o.lx,u=o.tx,d=o.ty;if(e.animate?(n.text.animate({x:u,y:d},s,l),n.link.animate({x:r,y:d},s,l)):(n.text.attr({x:u,y:d}),n.link.attr({x:r,y:d})),e.animate)n&&n.vect.animate({path:t.vectorPath,transform:n.getTransformString()},s,l,function(){n.vect.attr({path:t.vectorPath})});else{n&&n.vect.attr({path:t.vectorPath});var h={};if(e.useMainCanvas){var f=Meteor.currentSlate.paper.path(n.vect.attr("path"));h={boundingClientRect:f[0].getBoundingClientRect()},f.remove()}n.rotate.applyImageRotation(h)}}),i.default.each(u,function(t){var n=i.default.find(o,function(e){return e.parent.options.id===t.parentId&&e.child.options.id===t.childId});e.animate?n&&n.line.animate({path:t.linePath},s,l,function(){n.line.attr({path:t.linePath})}):n&&n.line.attr({path:t.linePath})}),c._.birdseye&&c._.birdseye.refresh(!0)},c.removeRelationship=function(t){var n=e(t),o=n.p,i=n.c;o&&i&&(o.relationships.removeAssociation(i),i.relationships.removeAssociation(o))},c.refreshAllRelationships=function(){i.default.each(c.allNodes,function(t){t.relationships.refresh()})},c.addRelationship=function(t){var n=e(t),o=n.p,i=n.c;if(o&&i)switch(t.type){case"association":o.relationships.addAssociation(i,t.options)}},c.closeAllLineOptions=function(t){i.default.each(c.allNodes,function(e){i.default.each(e.relationships.associations,function(n){n.id===t||e.lineOptions&&e.lineOptions.hide(n.id)})})},c.closeAllMenus=function(t){i.default.each(c.allNodes,function(e){e.options.id===t||(e.menu&&e.menu.hide(),e.resize&&e.resize.hide())})},c.closeAllConnectors=function(){i.default.each(c.allNodes,function(t){t.connectors&&t.connectors.remove(),t.resize&&t.resize.hide()})},c.one=function(t){var e=null;return i.default.each(c.allNodes,function(n){n.options.id!==t||(e=n)}),e},c}},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.slate.fn._zoomSlider=function(){var e,n=this;return n.setValue=function(t){e&&e.setValue(t)},n.hide=function(){null!==t.el("slateSlider_"+n._.options.id)&&n._.options.container.removeChild(t.el("slateSlider_"+n._.options.id))},n.show=function(t){n.hide();var i={height:320,width:70,offset:{left:20,top:80},slider:{height:300,min:6e3,max:2e5,set:5e3}};o.default.extend(i,t);var r=n._.options.container,a=document.createElement("div");a.setAttribute("id","slateSlider_"+n._.options.id),a.style.position="absolute",a.style.height=i.height+"px",a.style.width=i.width+"px",a.style.left=i.offset.left+"px",a.style.top=i.offset.top+"px",r.appendChild(a),i.paper=Raphael("slateSlider_"+n._.options.id,i.width,i.height),e=i.paper.slider(i.slider.height,i.slider.min,i.slider.max,i.slider.set,function(t){Raphael.svg&&(console.log("zooming to "+t),n._.zoom(0,0,t,t,!1),n._.canvas.resize(t))},function(t){n.set(t),n._.collab&&n._.collab.send({type:"onZoom",data:{zoomLevel:t}})})},n.set=function(t){n._.zoom(0,0,t,t,!1),n._.canvas.resize(t);var e=n._.options.viewPort.zoom;n._.options.viewPort.width=e.w,n._.options.viewPort.height=e.h,n._.options.viewPort.left=e.l,n._.options.viewPort.top=e.t},n}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.node.fn._colorpicker=function(e){function n(e){if(void 0===t.availColors){t.getJSON("http://www.colourlovers.com/api/colors/top&jsonCallback=?",function(n){t.availColors=n,o.default.isFunction(e)&&e.apply(this,[t.availColors])})}else o.default.isFunction(e)&&e.apply(this,[t.availColors])}var i={colors:[{hex:"000000",to:"575757"},{hex:"FFFFFF",to:"d9d9d9"},{hex:"FF0000",to:"a31616"},{hex:"C3FF68",to:"afff68"},{hex:"0B486B",to:"3B88B5"},{hex:"FBB829",to:"cd900e"},{hex:"BFF202",to:"D1F940"},{hex:"FF0066",to:"aa1d55"},{hex:"800F25",to:"3d0812"},{hex:"A40802",to:"d70b03"},{hex:"FF5EAA",to:"cf5d93"},{hex:"740062",to:"D962C6"},{hex:"FF4242",to:"A61515"},{hex:"D15C57",to:"9D5C58"},{hex:"FCFBE3",to:"c9c56f"},{hex:"FF9900",to:"c98826"},{hex:"369001",to:"9CEE6C"},{hex:"9E906E",to:"675324"},{hex:"F3D915",to:"F9EA7C"},{hex:"031634",to:"2D579A"},{hex:"556270",to:"7b92ab"},{hex:"1693A5",to:"23aad6"},{hex:"ADD8C7",to:"59a989"},{hex:"261C21",to:"EB9605"}],useColorLovers:!1};o.default.extend(i,e),null!==i.colors&&(t.availColors=i.colors);var r=this;return r.prepColors=function(t){n(t)},r.show=function(e){var i=e.zoomScalar||1,a=e.zoomScalar?Math.pow(50/i,.125):0,s=e.m,l=(e.width||s[4].attr("width"))-125*i-a,c=e.x+l,u=e.y+5*i-a;n(function(n){var a=-1,d=r._.slate.paper,h=15*i,f=15*i,p=4*i;o.default.each(n,function(n){++a%6==0&&0!==a&&(u+=f+p,c=e.x+l);var o=n.hex,i=n.to,v=d.rect(c,u,h,f,3).attr({stroke:"#000",fill:["90-#",o,"-#",i].join("")});v.mouseover(function(t){r._.slate.glow(this)}),v.mouseout(function(t){r._.slate.unglow()}),v.mousedown(function(n){t.stopEvent(n),e.onSelected&&e.onSelected(this)}),s.push(v),c+=h+p})})},r.set=function(t){r._.options.backgroundColor=t.color,r._.vect.attr({fill:t.color}),r._.relationships.refresh()},r}}(Slatebox)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=o(n(0)),r=o(n(3));!function(t,e){Slatebox.fn.node.fn._connectors=function(){function e(t){var e={type:"onNodeAdded",data:o._.slate.exportDifference(t)};o._.slate.collab&&o._.slate.collab.send(e)}var n,o=this,a={options:{xPos:null,width:null,yPos:null}};return o.remove=function(){i.default.invoke(n,"remove")},o.removeSettingsButton=function(){n.setting.remove()},o.show=function(t,e,r,a){var s=o._.slate.paper,l={fill:"#fff",stroke:"#000"},c=o._.vect.getBBox();n={setting:s.setting().transform(["t",t+c.width-50,",",e-18].join()).attr(l),unPinned:s.plus().transform(["t",t+c.width-16,",",e+8].join()).attr(l)},i.default.each(["mousedown"],function(t){n.setting[t](function(t){o._.slate.unglow(),a.apply(this),this.remove(),o._.slate.multiselection&&o._.slate.multiselection.end(),o._.context&&o._.context.remove(),o._.editor&&o._.editor.end(),o._.images&&o._.images.end(),o._.links&&o._.links.end()}),n.unPinned[t](function(t){o._.slate.unglow(),o._.connectors.addNode(),this.loop(),o._.context&&o._.context.remove()})}),i.default.each(n,function(t){r.push(t),t.mouseover(function(t){o._.slate.glow(this)}),t.mouseout(function(t){o._.slate.unglow()})});var u=o._.resize.show(t+c.width,e+c.height);r.push(u);var d=o._.rotate.show(t,e);return r.push(d),o},o.reset=function(){a={options:{xPos:null,width:null,yPos:null}}},o.addNode=function(n){var i=o._.slate.snapshot(),s=(0,r.default)(o._.options);delete s.id,delete s.link;var l=(a.xPos||o._.options.xPos)+(o._.options.width||a.width)+30;s.text="",s.width=o._.options.width,s.height=o._.options.height;var c=t.instance.node(s);o._.slate.nodes.add(c);var u=Raphael.transformPath(c.vect.attr("path").toString(),"T"+(l-c.options.xPos)+", 0");return c.vect.attr({path:u}),c.rotate.applyImageRotation(),c.options.vectorPath=u,c.resize.set(c.options.width,c.options.height),a=c.options,o._.relationships.addAssociation(c),o._.slate.birdseye&&o._.slate.birdseye.refresh(!1),o._.slate.unMarkAll(),e(i),void 0===n&&c.position("center",function(){c.editor&&c.editor.start()}),c},o}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e,n){Slatebox.fn.node.fn._context=function(){function e(t){(a=document.createElement("div")).setAttribute("id","contextMenu_"+s._.options.id),a.setAttribute("class","sb_cm"),document.body.appendChild(a),i(t)}function n(){var t="<div style='padding:5px;' class='sb_contextMenuItem' rel='{func}'>{text}</div>",e=t.replace(/{func}/g,"tofront").replace(/{text}/g,"to front");return e+=t.replace(/{func}/g,"toback").replace(/{text}/g,"to back"),e+=l?t.replace(/{func}/g,"lock").replace(/{text}/g,"lock"):t.replace(/{func}/g,"unlock").replace(/{text}/g,"unlock"),e+=t.replace(/{func}/g,"close").replace(/{text}/g,"close")}function i(e){a.innerHTML=n(),o.default.each(t.select("div.contextMenuItem"),function(t){t.onclick=function(t){var e=this.getAttribute("rel"),n=!1,i={type:"",data:{id:s._.options.id}};switch(e){case"tofront":s._.toFront(),n=!0,i.type="onNodeToFront";break;case"toback":s._.toBack(),n=!0,i.type="onNodeToBack";break;case"lock":s._.disable(),i.type="onNodeLocked";break;case"unlock":s._.enable(),i.type="onNodeUnlocked"}if(n){for(var a=0,l=s._.slate.paper.bottom;null!=l;l=l.next)if("ellipse"===l.type||"rect"===l.type){a++;var c=l.data("id");c&&(o.default.detect(s._.slate.nodes.allNodes,function(t){return t.options.id===c}).sortorder=a)}s._.slate.nodes.allNodes.sort(function(t,e){return t.sortorder<e.sortorder?-1:1})}""!==i.type&&r(i),s.remove()}});var i=t.mousePos(e),l=i.x,u=i.y;a.style.left=l+"px",a.style.top=u+"px",a.style.height=c+"px"}function r(t){s._.slate.collab&&s._.slate.collab.send(t),s._.slate.birdseye&&s._.slate.birdseye.nodeChanged(t)}var a,s=this,l=!0,c=190,u=window.setInterval(function(){s._&&(s.create(),window.clearInterval(u))},500);return s.create=function(){s._.text.node&&s._.options.allowContext&&!s._.slate.isAlt&&!s._.slate.isShift&&(s._.text.node.oncontextmenu=s._.vect.node.oncontextmenu=function(n){return l=s._.options.allowDrag,s._.options.allowDrag=!1,s.remove(),e(n),setTimeout(function(t){s._.options.allowDrag=l},2),t.stopEvent(n)})},s.remove=function(){s._.slate.removeContextMenus(),a=null},s.isVisible=function(){return null!==a},s},n.fn.removeContextMenus=function(){var e=t.select("div.sb_cm");o.default.each(e,function(t){document.body.removeChild(t)})}}(Slatebox,0,Slatebox.fn.slate)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.node.fn._editor=function(){function e(){var t={type:"onNodeTextChanged",data:{id:a._.options.id,text:a._.options.text,fontSize:a._.options.fontSize,fontColor:a._.options.foregroundColor}};a._.slate.collab&&a._.slate.collab.send(t),a._.slate.birdseye&&a._.slate.birdseye.nodeChanged(t)}var n,i,r,a=this;t.guid().replace("-","");return a.editing=!1,a.start=function(){function s(){var t="<select id='ddlTxtSize'>";for(ptx=10;ptx<201;ptx++)ptx%2==0&&(t+="<option>"+ptx+"</option>");return t+="</select>"}function l(){var t="<div style='float:left;padding:3px;margin-right:5px;background-color:#f8f8f8;border:1px solid #ccc;cursor:pointer;' class='changeTextColor' rel='{text}'><div style='width:30px;height:30px;background-color:{color};float:left;border:1px solid #333;'></div></div>",e=t.replace(/{color}/gi,"#000").replace(/{text}/gi,"black");return e+=t.replace(/{color}/gi,"#FFF").replace(/{text}/gi,"white")}function c(e,n){a.set(null,null,e);var o=t.el("txtForNode");o.style.backgroundColor=n,o.style.color=e,o.focus()}a.editing=!0,a._.slate.keyboard&&a._.slate.keyboard.end(),n=a._.slate.paper.rect(-99,-99,8,1).attr({fill:"#000"}).loop({pkg:[{fill:"#fff"},{fill:"#000"}],duration:500,repeat:!0}),a._.slate.nodes.closeAllMenus();var u,d="";t.select("div.embedBar").length>0&&o.default.each(t.select("div.embedBar"),function(t){document.body.removeChild(t)}),r=(new Notify).message({hgt:120,duration:200,className:"embedBar",delayClose:0,spinner:null,hideClose:!1,popFromBottom:!0,onClose:function(){a.end()},onOpen:function(r,h){r.innerHTML="<div style='width:900px;'>You are editing the node's text!<br/><div style='float:left;margin-right:8px;height:60px;'><textarea id='txtForNode' style='text-align:center;width:500px;height:70px;color:#000;'></textarea></div><div style='float:left;margin-right:20px;margin-top:-20px'>Size "+s()+" pt&nbsp;&nbsp;<button id='btnSubmitText' class='btn btn-primary'>Update</button><div id='textColorPicker' style='margin-top:4px;'></div></div></div>",d=a._.options.text,u=a._.options.fontSize,t.el("txtForNode").value=d,t.el("txtForNode").select(),t.el("btnSubmitText").onclick=function(t){a.end(),e()},console.log("going to set ",u),t.el("ddlTxtSize").value=u||10,t.el("ddlTxtSize").onchange=function(t){var e=this.options[this.selectedIndex].value;a.set(a._.options.text,e)},t.el("textColorPicker").innerHTML=l(),o.default.each(t.select("div.changeTextColor"),function(t){var e=t;e.onclick=function(t){switch(e.style.border="1px solid red",e.getAttribute("rel")){case"black":c("#000","#fff");break;case"white":c("#fff","#000")}},e.onmouseover=function(t){e.style.border="1px solid red"},e.onmouseout=function(t){e.style.border="1px solid #ccc"}}),t.el("txtForNode").onkeyup=function(e){var o=this.value;""===o&&(o=" ");var r=a._.text;a._.options.text=o;var s=t.getKey(e||event);r.attr({text:13===s||32===s?o+" ":o});var l=r.getBBox();13!==s&&32!==s||setTimeout(function(){r.attr({text:a._.options.text})},0);var c=r.attr("text").split("\n"),u=(i=a._.slate.paper.text(-99,-99,c[c.length-1]).attr({"font-size":a._.options.fontSize+"pt"})).getBBox();i.remove(),a.resize(),a.resize(),a._.mark(),a._.relationships.refresh();var d=c.length>1?l.width/2+u.width/2:l.width;n.attr({x:l.x+d,y:l.y+l.height,"font-size":a._.options.fontSize+"pt"})}}}),a._.mark()},a.set=function(t,e,n){t&&(a._.options.text=t),e&&(a._.options.fontSize=e),n&&(a._.options.foregroundColor=n),t&&a._.text.attr({text:t}),e&&a._.text.attr({"font-size":+e+"pt"}),n&&a._.text.attr({fill:n}),a.resize(),a.resize()},a.resize=function(){var t=a._.text,e=20,n=20;"ellipse"===a._.options.vectorPath&&(e=30,n=30);var i=!1;" "===t.attr("text")&&(t.attr("text","."),i=!0);var r=t.getBBox();i&&t.attr("text"," ");var s=r.width+e,l=r.height+n,c=r.x-e/2,u=r.y-n/2,d=r.x+a._.options.width/2-e/2,h=r.y+a._.options.height/2-n/2;s<a._.options.width&&(s=a._.options.width,c=a._.options.xPos,d=a._.options.xPos),l<a._.options.height&&(l=a._.options.height,u=a._.options.yPos,h=a._.options.yPos);var f="rect"==a._.vect.type?{x:c,y:u}:{cx:d,cy:h},p="rect"==a._.vect.type?{width:s,height:l}:{rx:s/2,ry:l/2};o.default.extend(f,p),a._.resize.set(s,l),a._.options.xPos=c,a._.options.width=s,a._.options.yPos=u,a._.options.height=l,a._.link.attr(a._.linkCoords())},a.end=function(){a.editing=!1,a._.unmark(),r&&r.visible()&&e(),r&&r.closeMessage(),n&&(n.remove(),n=null)},a}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.node.fn._images=function(){function e(e){emile(t.el("txtSearch"),"width:170px",{duration:500,after:function(){t.el("ddlImageSize").style.visibility="visible",t.el("lblImageSize").style.visibility="visible",t.el("embedUrlPrefix").style.display="none",t.el("spnEmbedAction").innerHTML="Search Images",o.default.each(t.select("div.imgChanger"),function(t){t.style.display="block"}),t.el("imgResults").style.display="block",t.el("embedDivAction").style.width="260px",t.el("txtSearch").removeAttribute("placeholder"),o.default.isFunction(e)&&e.apply(this)}})}function n(){var e=["http://",t.el("txtSearch").value.replace("http://","")].join("");t.imageExists(e,function(t,n,o){t?s(e,n,o):setTimeout(function(){alert("Sorry, that image could not be loaded.")},2e3)})}function i(){l();var e=t.el("ddlImageSize").value.toLowerCase();"All"===t.el("ddlImageSize").value&&(e="");var n="";h._.slate.options.events.onImagesRequested({rpp:d.paging.rpp,size:e,page:d.paging.page,query:t.el("txtSearch").value,cb:function(t){d.paging.total=(d.paging.page+2)*d.paging.rpp,o.default.each(t,function(t){var e=t.name,o=t.thumbnailUrl,i=t.contentUrl,r=parseInt(t.width),a=parseInt(t.height);n+="<div style='float:left;cursor:pointer;border:1px solid transparent;padding:5px;height:150px;overflow:hidden;' class='searchImage' rel='{url}|{width}|{height}'><div style='width:100px;height:105px;text-align:center;'><img src='{thumb}' title='{title}' alt='{title}' style='width:90px;'/></div><div style='text-align:center;'>{width} x {height}</div></div>".replace(/{url}/gi,i).replace(/{thumb}/gi,o).replace(/{imgWidth}/gi,t.thumbnail.width).replace(/{imgHeight}/gi,t.thumbnail.height).replace(/{title}/gi,e).replace(/{width}/gi,r).replace(/{height}/gi,a)}),r(n)}})}function r(e){""===e?t.el("imgResults").innerHTML="<div style='font-size:20pt;color:#fff;margin-top:20px;'>There are no results!</div>":(t.el("imgResults").innerHTML=e,c(),a())}function a(){o.default.each(t.select("div.searchImage"),function(e){t.addEvent(e,"click",function(t){var e=this.getAttribute("rel").split("|");s(e[0],parseInt(e[1]),parseInt(e[2]))}),t.addEvent(e,"mouseover",function(t){this.style.border="1px solid #ccc",this.style.backgroundColor="#333",this.style.color="#fff"}),t.addEvent(e,"mouseout",function(t){this.style.border="1px solid transparent",this.style.backgroundColor="transparent",this.style.color="#ccc"})})}function s(t,e,n){h.set(t,e,n),h._.mark();var o={type:"onNodeImageChanged",data:{id:h._.options.id,img:h._.options.image,w:h._.options.width,h:h._.options.height}};h._.slate.birdseye&&h._.slate.birdseye.nodeChanged(o),h._.slate.collab&&h._.slate.collab.send(o)}function l(){t.el("lnkSearchForward").style.visibility="hidden",t.el("lnkSearchBack").style.visibility="hidden"}function c(){(d.paging.page+1)*d.paging.rpp<d.paging.total&&(t.el("lnkSearchForward").style.visibility="visible"),d.paging.page>0&&(t.el("lnkSearchBack").style.visibility="visible")}var u,d,h=this;return h.imagesearching=!1,h.start=function(r){h.imagesearching=!0,h._.slate.nodes.closeAllMenus(),d={searchImages:!0,size:"Small",isColor:!0,paging:{rpp:4,page:0,total:0}},o.default.extend(d,r||{});var a;u=(new Notify).message({hgt:185,duration:200,className:"embedBar",delayClose:0,spinner:null,hideClose:!1,popFromBottom:!0,onOpen:function(r,l){r.innerHTML="<div style='width:100%;clear:both;'><div id='embedDivAction' style='float:left;width:25%;'><span style='font-size:20pt;' id='spnEmbedAction'>Search Images</span><br/><span style='display:none;font-size:20pt;color:#ccc;' id='embedUrlPrefix'>http://</span><input type='text' id='txtSearch' class='input-sm' style='margin-bottom:-2px;color:#000;font-size:12pt;'/>&nbsp;<button id='btnImageSearch' class='btn btn-success btn-sm'>go</button><div id='imgShowSize' style='padding-top:10px;'><span id='lblImageSize' style='font-size:12pt;'>Size: </span> <select id='ddlImageSize' style='color:#000;'><option selected>Small</option><option>Medium</option><option>Large</option><option>All</option></select>&nbsp;&nbsp;<label for='chkAsUrl' style='cursor:pointer'><input type='checkbox' id='chkAsUrl' />Provide URL</label></div>&nbsp;&nbsp;[<a href='javascript:' id='lnkClearImage'>clear</a>]</div></div><div style='float:left;width:5%;visibility:hidden;margin-right:-10px;margin-left:-10px;font-size:40pt;cursor:pointer;color:red;' id='lnkSearchBack' class='imgChanger'> < </div><div style='float:left;width:65%;' id='imgResults'></div><div style='float:left;width:5%;visibility:hidden;margin-right:-10px;margin-left:-10px;font-size:40pt;cursor:pointer;color:red;' id='lnkSearchForward' class='imgChanger'> > </div></div>",a=h._.options.image,t.el("ddlImageSize").value=d.size,t.el("txtSearch").focus(),h._.mark(),t.addEvent(t.el("txtSearch"),"keypress",function(e){13===t.getKey(e)&&(t.el("chkAsUrl").checked?n():(i(),d.paging.page=0,d.paging.total=0))}),t.addEvent(t.el("txtSearch"),"focus",function(t){this.select()}),t.addEvent(t.el("btnImageSearch"),"click",function(e){return t.el("chkAsUrl").checked?n():(i(),d.paging.page=0,d.paging.total=0),t.stopEvent(e)}),t.addEvent(t.el("lnkSearchForward"),"click",function(e){return d.paging.page++,i(),t.stopEvent(e)}),t.addEvent(t.el("lnkSearchBack"),"click",function(e){return d.paging.page--,i(),t.stopEvent(e)}),t.addEvent(t.el("lnkClearImage"),"click",function(t){s("",50,50)}),t.addEvent(t.el("chkAsUrl"),"click",function(n){this.checked?(t.el("ddlImageSize").style.visibility="hidden",t.el("lblImageSize").style.visibility="hidden",t.el("embedUrlPrefix").style.display="inline",t.el("spnEmbedAction").innerHTML="Provide URL",o.default.each(t.select("div.imgChanger"),function(t){t.style.display="none"}),t.el("imgResults").style.display="none",t.el("embedDivAction").style.width="850px",emile(t.el("txtSearch"),"width:600px",{duration:500,after:function(){t.el("txtSearch").setAttribute("placeholder","provide the url to your image")}})):e()}),o.default.each(t.select("div.imgChanger"),function(e){t.addEvent(e,"mouseover",function(t){this.style.color="#fff"}),t.addEvent(e,"mouseout",function(t){this.style.color="red"})})}})},h.end=function(){h.imagesearching=!1,h._.unmark(),u&&u.closeMessage()},h.set=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h._.vect.data({relativeFill:!0}),h._.options.image=t,h._.options.imageOrigHeight=n,h._.options.imageOrigWidth=e;var i=o?Meteor.currentSlate.paper:h._.slate.paper;h._.vect.transform("");var r=i.path(h._.vect.attr("path").toString()).attr({opacity:0}),a=r.getBBox();$(h._.vect.pattern).detach(),sz={fill:"url("+h._.options.image+")","stroke-width":h._.options.borderWidth,stroke:"#000"},h._.vect.attr(sz);var s="s"+e/a.width+","+n/a.height,l=Raphael.transformPath(r.attr("path").toString(),s);h._.vect.attr({path:l}),h._.options.vectorPath=l;var c=h._.vect.getBBox();$(h._.vect.pattern).find("image").css("height",c.height),$(h._.vect.pattern).find("image").css("width",c.width);var u={};o&&(r.attr({path:l}),u.boundingClientRect=r[0].getBoundingClientRect()),h._.rotate.applyImageRotation(u);var d=h._.vect.getBBox();h._.options.width=d.width,h._.options.height=d.height,h._.relationships.refresh(),h._.setPosition({x:d.x,y:d.y}),h._.connectors&&h._.connectors.remove(),h._.resize&&h._.resize.hide(),r&&r.remove()},h}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.node.fn._links=function(){function e(){a._.slate.options.linking=null}function n(e,n){var o=JSON.stringify({Url:e});t.el("btnApply").setAttribute("disabled","disabled"),t.el("btnApply").innerHTML="Checking...",t.ajax(s.existenceUrl,function(e,o){var i=JSON.parse(e);t.el("btnApply").removeAttribute("disabled","disabled"),t.el("btnApply").innerHTML="go",n.apply(this,[i.exists])},o,"POST")}function i(){var e=t.el("txtUrl").value.replace(/http:\/\//gi,"");n(e,function(t){if(!0!==t)alert("Sorry but "+e+" doesn't look to be a valid URL. Please check it!");else{a.set("externalUrl",e,!0);var n={type:"onNodeLinkAdded",data:{id:a._.options.id,linkType:"externalUrl",linkData:e}};a._.slate.collab&&a._.slate.collab.send(n)}})}var r,a=this,s={existenceUrl:"/UrlExists"};return a.start=function(n){a._.slate.nodes.closeAllMenus(),o.default.extend(s,n||{}),r=(new Notify).message({hgt:185,duration:200,className:"embedBar",delayClose:0,spinner:null,hideClose:!1,popFromBottom:!0,onOpen:function(n,o){a._.slate.unglow(),n.innerHTML="<div style='width:900px;'><div id='linkForm'><div id='provideUrlPlaceholder' style='height:75px;width:900px;'><span style='font-size:16pt;' id='spnEmbedAction'>Provide an external link (will always open in a new window)</span><br/><span style='font-size:16pt;color:#ccc;' id='embedUrlPrefix'>http://</span><input type='text' id='txtUrl' style='width:450px;font-size:16pt;color:#000'/>&nbsp;<button id='btnApply' class='btn btn-primary'>go</button>&nbsp;<button id='btnRemove' class='btn btn-danger' style='visibility:hidden;'>remove</button></div><div id='messagePlaceholder' style='display:none;height:75px;font-size:20pt;width:900px;'></div><div style='margin-top:10px;padding:3px;width:800px;height:63px;font-size:14pt;'>WHERE do you want to link to?<div style='border-top:1px dashed #ccc;padding:5px;font-size:12pt;'><label for='radioLinkUrl' style='float:left;cursor:pointer;'><input type='radio' id='radioLinkUrl' name='linkType' checked/>an EXTERNAL website</label><label for='radioLinkSlate' style='float:left;margin-left:15px;cursor:pointer;'><input type='radio' id='radioLinkSlate' name='linkType'/>a node on THIS slate</label><label for='radioLinkExternalSlate' style='margin-left:15px;float:left;cursor:pointer;display:none;'><input type='radio' id='radioLinkExternalSlate' name='linkType' disabled/>a DIFFERENT slate<br/>(coming soon)</label></div></div></div><div id='processForm' style='font-size:20pt;'></div></div>",a._.link.hide(),t.el("txtUrl").focus(),a._.mark(),a._.options.link&&a._.options.link.show&&(t.el("btnRemove").style.visibility="visible"),t.addEvent(t.el("btnRemove"),"click",function(e){a.unset();var n={type:"onNodeLinkRemoved",data:{id:a._.options.id}};return a._.slate.collab&&a._.slate.collab.send(n),t.stopEvent(e)}),t.addEvent(t.el("txtUrl"),"keypress",function(e){13===t.getKey(e)&&i()}),t.addEvent(t.el("txtUrl"),"focus",function(t){this.select()}),t.addEvent(t.el("btnApply"),"click",function(e){return i(),t.stopEvent(e)}),t.addEvent(t.el("radioLinkUrl"),"click",function(n){e(),t.el("provideUrlPlaceholder").style.display="block",t.el("messagePlaceholder").style.display="none"}),t.addEvent(t.el("radioLinkSlate"),"click",function(n){a._.slate.options.linking={onNode:function(t){a.set("currentSlate",t.options.id,!0);var n={type:"onNodeLinkAdded",data:{id:a._.options.id,linkType:"currentSlate",linkData:t.options.id}};a._.slate.collab&&a._.slate.collab.send(n),o&&o.resize(50,300,function(){o.changeMessage("You've set the link! Returning you to your original node in a moment..."),setTimeout(function(){a._.position("center",function(){o.changeMessage("The connection is all set!"),setTimeout(function(){o&&o.closeMessage()},1500)},"swingFromTo",1500)},2e3)}),e()}},t.el("provideUrlPlaceholder").style.display="none",t.el("messagePlaceholder").style.display="block",t.el("messagePlaceholder").innerHTML="Scroll the slate to the node you'd like to link to and click it."}),t.addEvent(t.el("radioLinkExternalSlate"),"click",function(e){a._.slate.options.linking={onSlate:function(t){}},t.el("provideUrlPlaceholder").style.display="none",t.el("messagePlaceholder").style.display="block",t.el("messagePlaceholder").innerHTML="Select the slate that you'd like to link to using the menu above."})},onClose:function(){a._.options.link.show&&a._.link.show()}})},a.end=function(){a._.unmark(),a._.slate.unglow(),r&&r.closeMessage()},a.set=function(e,n,i){switch(a._.options.link||(a._.options.link={}),a._.options.link.thumbnail||(a._.options.link.thumbnail={width:175,height:175}),e){case"externalUrl":o.default.extend(a._.options.link,{type:e,data:n,show:!0}),!0===i?(t.el("linkForm").style.display="none",t.el("processForm").style.display="block",t.el("processForm").innerHTML="<div style='margin-top:-3px;float:left;'><span id='spanFetchThumb'></span></div><div style='margin-left:10px;float:left;margin-top:0px;font-size:14pt;'>Fetching URL Thumbnail (it only takes this long the first time)...</div>",r&&r.resize(50,300,function(){if(null!==t.el("spanFetchThumb"))new spinner("spanFetchThumb",8,16,15,1,"#fff")}),$(document.body).append($("<img style='display:none;'>").attr("src","http://img.bitpixels.com/getthumbnail?code=57959&url="+a._.options.link.data+"&size=200")),window.setTimeout(function(){a._.link.show(),a.end()},1e3)):a._.link.show();break;case"currentSlate":o.default.extend(a._.options.link,{type:e,data:n,show:!0})}},a.unset=function(){o.default.extend(a._.options.link,{type:"",data:"",show:!1}),a._.link.hide(),a.end()},a.processEvent=function(){switch(a._.options.link.type){case"externalUrl":var t=a._.options.link.data.length>20?a._.options.link.data.substring(0,20)+"...":a._.options.link.data;a._.link.tooltip({type:"image",msg:t},a._.options.link.thumbnail.width,a._.options.link.thumbnail.height),window.setTimeout(function(){a._.link.tt[0].attr({fill:"url('http://img.bitpixels.com/getthumbnail?code=57959&url="+a._.options.link.data+"&size=200')"})},500);break;case"externalSlate":break;case"currentSlate":a._.slate.addtip(a._.link.tooltip({type:"text",msg:"Jump to another node"},140,23))}},a.wireEvents=function(){a._.link.mouseover(function(e){a._.slate.glow(a._.link),a.processEvent(),t.stopEvent(e)}),a._.link.mouseout(function(e){switch(a._.slate.unglow(),a._.options.link.type){case"externalUrl":a._.link.untooltip();break;case"currentSlate":a._.slate.untooltip()}t.stopEvent(e)}),a._.link.click(function(e){switch(a._.options.link.type){case"externalUrl":window.open(["http://",a._.options.link.data].join(""),"sb_external");break;case"externalSlate":break;case"currentSlate":var n=a._.slate.nodes.one(a._.options.link.data);n.vect.getBBox(),a._.slate.options.viewPort.zoom.r;n.position("center",function(){n.mark()},"swingFromTo",2e3)}t.stopEvent(e)})},a}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));Slatebox,Slatebox.fn.node.fn._menu=function(){function t(t){n._.colorpicker.set(t.data),n._.slate.collab&&n._.slate.collab.send(t)}function e(e,o,a){r=!0,a-=80;var s=e.rect(o,a,295,80,10).attr({fill:"90-#ccc-#eee"});s.node.style.cursor="pointer",i.push(s),n._.toolbar.show(o,a,i),n._.colorpicker.show({x:o,y:a,m:i,onSelected:function(e){e.loop();var o=e.attr("fill"),i="#"+o.split(/90-#/g)[1].split(/-#/g)[0];Raphael.rgb2hsb(i).b;""!==n._.options.image&&(n._.options.image="");var r={type:"onNodeColorChanged",data:{id:n._.options.id,color:o}};t(r),n._.slate.birdseye&&n._.slate.birdseye.nodeChanged(r)}}),n._.shapes.show(o,a,i),i.push(e.path(["M",o,a+36,"L",o+160,a+36].join(",")).attr({stroke:"#000"})),i.push(e.path(["M",o+160,a,"L",o+160,a+80].join(",")).attr({stroke:"#000"}));var l=e.deleter().attr({fill:"#ddd",stroke:"#333"}).transform(["t",o+275,",",a-13,"s",",",".75",".75"].join());l.mouseover(function(){n._.slate.glow(l)}),l.mouseout(function(){n._.slate.unglow()}),l.mousedown(function(){n._.slate.unglow(),n.hide()}),i.push(l)}var n=this,i=null,r=!1;return n.isOpen=function(){return r},n.show=function(t){if(null!==n._.slate){var r=n._.slate.paper;void 0===t&&(t=3e3),i&&(o.default.invoke(i,"remove"),i=null);n._.offset();var a=n._.vect.getBBox(),s=a.x,l=a.y;i=r.set(),n._.connectors.show(s,l,i,function(){e(r,s,l)}),n.wasOpen&&(n.wasOpen=!1,n._.connectors.removeSettingsButton(),e(r,s,l))}},n.hide=function(t){i&&(o.default.invoke(o.default.reject(i,function(e){return e.id===t}),"remove"),i=o.default.isUndefined(t)?null:o.default.filter(i,function(e){return e.id===t})),r=!1},n}},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){Slatebox.fn.node.fn._relationships=function(){function e(t){s._.slate.collab&&s._.slate.collab.send(t)}function n(t){if(s._.options.allowMenu){t.line.node.style.cursor="pointer",t.line.mouseover(function(e){t.over=!0,s._.slate.options.enabled&&n(e)}),t.line.mouseout(function(){t.over=!1,s._.slate.unglow()}),t.line.mousedown(function(t){e()})}var e=function(e){if(t.over){t.parent.offset(),t.child.offset();s._.lineOptions.show(e,t)}},n=o.default.debounce(e,500)}function i(e){var n=null,i=t.positionedOffset(s._.slate.options.container);return o.default.each(s._.slate.nodes.allNodes,function(t){if(t.options.id!==s._.slate.tempNodeId&&t.options.id!==s._.options.id&&t.options.allowContext&&t.options.allowResize){var o=t.vect.getBBox(),r=s._.slate.options.viewPort.zoom.r,a=s._.slate.options.viewPort.left+e.x-i.left,l=s._.slate.options.viewPort.top+e.y-i.top,c={x:a+(a/r-a),y:l+(l/r-l)};if(c.x>o.x&&c.x<o.x+o.width&&c.y>o.y&&c.y<o.y+o.height)return void(n=t)}}),n}function r(t,e,n){var i=[];return o.default.each(t,function(t){t[e].options.id===n.options.id?s._.slate.paper.removeConnection(t):i.push(t)}),i}function a(t){if(s._.slate.multiselection&&s._.slate.multiselection.end(),s._.slate.options.linking)s._.slate.options.linking.onNode.apply(t,[s._]);else if(s._.options.allowDrag){Meteor.currentMoveTickAssociations=[],Meteor.currentSlate&&o.default.each(Meteor.currentSlate.nodes.allNodes,function(t){t.relationships.updateAssociationsWith({currentDx:0,currentDy:0})}),s.updateAssociationsWith({activeNode:s._.options.id,currentDx:0,currentDy:0,isAlt:s._.slate.isAlt,isShift:s._.slate.isShift,isUp:!1,childPositionSaved:!1,action:"move"});var e=s._.vect.getBBox();t.ox=e.x,t.oy=e.y,s.syncAssociations(s._,function(t,e){Meteor.currentMoveTickAssociations.includes(e.id)||(t.relationships.updateSingleAssociationWith({id:e.id},{activeNode:s._.options.id,currentDx:0,currentDy:0,isAlt:s._.slate.isAlt,isShift:s._.slate.isShift,isUp:!1,childPositionSaved:!1,action:"move"}),t.relationships.hideAll(),t.relationships.setKeys({isAlt:s._.slate.isAlt,isShift:s._.slate.isShift}),t.setStartDrag())}),s.hideAll(),s._.setStartDrag(),l=s._.slate.isAlt,c=s._.slate.isShift}}var s=this;s.associations=[];var l=!1,c=!1;s.addAssociation=function(e,i){var r=s._.slate.paper;i=i||{};var a=o.default.detect(s.associations,function(t){return t.child.options.id===e.options.id});return a||((a=r.connection({id:t.guid(),parent:s._,child:e,lineColor:i.lineColor||s._.options.lineColor,lineWidth:i.lineWidth||s._.options.lineWidth,lineOpacity:i.lineOpacity||s._.options.lineOpacity,blnStraight:i.isStraightLine||!1,showParentArrow:i.showParentArrow||s._.options.showParentArrow,showChildArrow:i.showChildArrow||s._.options.showChildArrow,childHasMultipleParents:e.options.hasMultipleParents||!1})).line.toBack(),s.associations.push(a),e.relationships.associations.push(a),n(a)),a},s.initiateTempNode=function(n,r,a){var l=t.mousePos(n),c=r.slate,u=t.positionedOffset(c.options.container),d=s._.slate.options.viewPort.zoom.r,h=c.options.viewPort.left+l.x-u.left,f=c.options.viewPort.top+l.y-u.top,p=t.instance.node({id:s._.slate.tempNodeId,xPos:h+(h/d-h),yPos:f+(f/d-f),lineColor:"#990000",backgroundColor:"#ffffff",vectorPath:"roundedrectangle",width:30,height:30});c.nodes.add(p,!0);var v=r.relationships.addAssociation(p,a,!0);v.hoveredOver=null,v.lastHoveredOver=null,p.vect.initDrag(n),c.options.viewPort.allowDrag=!1,p.vect.mousemove(function(e){s._.slate.paper.connection(v),null===v.hoveredOver&&(v.hoveredOver=i(t.mousePos(e)),null!==v.hoveredOver&&v.hoveredOver.vect.animate({"stroke-width":5},500,function(){v.hoveredOver.vect.animate({"stroke-width":s._.options.borderWidth},500,function(){v.hoveredOver=null})}))}),p.vect.mouseup(function(n){r.relationships.removeAssociation(p),p.slate.nodes.remove(p);var l=i(t.mousePos(n));if(null!==l){var c=o.default.filter(l.relationships.associations,function(t){return l.options.id===t.child.options.id});if(l.options.hasMultipleParents=c.length>0,l.relationships.updateAssociationsWith({conditional:[{key:"childHasMultipleParents",getValue:function(t,e){return o.default.filter(e.relationships.associations,function(t){return l.options.id===t.child.options.id}).length>0},condition:function(t,e){return t.child.options.id===e.options.id},data:l}]}),!o.default.find(r.relationships.associations,function(t){return t.child.options.id===l.options.id&&t.parent.options.id===r.options.id||t.parent.options.id===l.options.id&&t.child.options.id===r.options.id})){r.relationships.addAssociation(l,a);var u={type:"addRelationship",data:{type:"association",parent:r.options.id,child:l.options.id}};s._.slate.birdseye&&s._.slate.birdseye.relationshipsChanged(u),e(u)}}s._.slate.options.enabled&&(r.slate.options.viewPort.allowDrag=!0)})},s.removeAll=function(){o.default.each(s.associations,function(t){t.child.relationships.removeAssociation(s._),t.parent.relationships.removeAssociation(s._),s._.slate.paper.removeConnection(t)}),s.associations=[]},s.removeAssociation=function(t){return s.associations=r(s.associations,"child",t),s.associations=r(s.associations,"parent",t),s},s.setKeys=function(t){var e=t.isShift,n=t.isAlt;c=e,l=n};var u=function(t,e){s._.events&&o.default.isFunction(s._.events.onClick)?s._.events.onClick.apply(this,[function(){a(this)}]):a(this)},d=function(t,e){if(s._.options.allowDrag){Meteor.currentMoveTickAssociations=[];var n=s._.slate.options.viewPort.zoom.r;t+=t/n-t,e+=e/n-e;var o=s._.rotateMoveVector({dx:t,dy:e}),i={action:"translate",dx:o.dx,dy:o.dy},r=s._.getTransformString(i);s._.vect.transform(r),s._.vect.currentDx=t,s._.vect.currentDy=e,s._.setPosition({x:s._.vect.ox+t,y:s._.vect.oy+e}),s.updateAssociationsWith({currentDx:t,currentDy:e}),s.syncAssociations(s._,function(n,o){n.relationships.updateAssociationsWith({activeNode:o.activeNode,currentDx:t,currentDy:e,isShift:c,isAlt:l}),l&&c||o.activeNode!==o.parent.options.id||c?l&&c&&n.setPosition({x:n.options.xPos+t,y:n.options.yPos+e},void 0,void 0,{transformString:"T"+t+","+e}):n.relationships.refresh()}),s.refresh()}};s.syncAssociations=function(t,e){o.default.each(t.relationships.associations,function(n){n.child.options.id!==s._.options.id&&n.child.options.id!==t.options.id&&(e&&e(n.child,n),Meteor.currentMoveTickAssociations||(Meteor.currentMoveTickAssociations=[]),n.isAlt&&n.isShift&&!Meteor.currentMoveTickAssociations.includes(n.id)&&(Meteor.currentMoveTickAssociations&&Meteor.currentMoveTickAssociations.push(n.id),s.syncAssociations(n.child,e)))})},s.updateAssociationsWith=function(t){var e={};t.conditional&&(o.default.each(t.conditional,function(t,n){e[n]=t}),delete t.conditional),o.default.each(s.associations,function(n){o.default.extend(n,t),o.default.each(e,function(t){t.condition(n,t.data)&&(n[t.key]=t.getValue(n,t.data))})})},s.updateSingleAssociationWith=function(t,e){var n=o.default.findWhere(s.associations,t);n&&o.default.extend(n,e)};var h=function(e){if(Meteor.currentMoveTickAssociations=[],s.updateAssociationsWith({isUp:!0}),s.syncAssociations(s._,function(t){t.relationships.updateAssociationsWith({isUp:!0})}),Meteor.currentMoveTickAssociations=[],s.showAll(),s.refresh(),s._.setEndDrag(),t.transformPath(s._,"T"+s._.vect.currentDx+","+s._.vect.currentDy),c&&(l||c)){if(l&&c){var n=o.default.filter(s.associations,function(t){return t.child.options.id===s._.options.id});o.default.each(n,function(t){t&&t.parent.relationships.refresh()}),s.updateAssociationsWith({isUp:!0,currentDx:s._.vect.currentDx,currentDy:s._.vect.currentDy}),Meteor.currentMoveTickAssociations=[],s.syncAssociations(s._,function(e,n){n.childPositionSaved&&e.relationships.updateAssociationsWith({currentDx:0,currentDy:0}),t.transformPath(e,"T"+n.currentDx+","+n.currentDy);var o=e.vect.getBBox();e.setPosition({x:o.x,y:o.y}),n.childPositionSaved=!0,e.relationships.updateAssociationsWith({isUp:!0,isShift:c,isAlt:l,conditional:[{key:"childPositionSaved",getValue:function(){return!0},condition:function(t,e){return t.child.options.id===e.options.id},data:e}]}),e.relationships.refresh()}),Meteor.currentMoveTickAssociations=[]}}else{var i=o.default.filter(s._.relationships.associations,function(t){return(t.child.options.id===t.activeNode||t.parent.options.id===t.activeNode)&&t.parent.options.id===t.activeNode});o.default.each(i,function(e){t.transformPath(e.child,"T"+s._.vect.currentDx+","+s._.vect.currentDy);var n=e.child.vect.getBBox();e.child.setPosition({x:n.x,y:n.y}),e.isShift=!1,e.isAlt=!1})}var r={x:s._.vect.ox+s._.vect.currentDx,y:s._.vect.oy+s._.vect.currentDy};s._.vect.currentDx=0,s._.vect.currentDy=0,s._.vect.xPos=r.x,s._.vect.yPos=r.y,s.updateAssociationsWith({isUp:!1,currentDx:0,currentDy:0,isShift:!1,isAlt:!1}),s.syncAssociations(s._,function(t){t.relationships.showAll(),t.relationships.updateAssociationsWith({isUp:!1,currentDx:0,currentDy:0,isShift:!1,isAlt:!1})}),Meteor.currentMoveTickAssociations=[],s._.slate.birdseye&&s._.slate.birdseye.refresh(!0),s._.slate.options.events&&o.default.isFunction(s._.slate.options.events.onNodeDragged)&&s._.slate.options.events.onNodeDragged.apply(this),s.send()};s.send=function(){if(s._.context&&!s._.context.isVisible()&&s._.options.allowDrag){var t={type:"onNodesMove",data:{id:s._.options.id,nodeOptions:o.default.map(s._.slate.nodes.allNodes,function(t){return t.options}),associations:function(){var t=[];return o.default.each(s._.slate.nodes.allNodes,function(e){o.default.each(e.relationships.associations,function(e){t.push({parentId:e.parent.options.id,childId:e.child.options.id,linePath:e.line.attr("path").toString(),id:e.line.id})})}),o.default.uniq(t,function(t){return t.id})}()}};s._.slate.collab&&s._.slate.collab.send(t),s._.slate.birdseye&&s._.slate.birdseye.nodeChanged(t)}};var f=function(t){s._.slate.paper;for(var e=s.associations.length;e--;)s.associations[e].line[t]()};s.hideAll=function(){s._.slate.isAlt&&s._.slate.isShift&&f("hide")},s.hideOwn=function(){o.default.each(s.associations,function(t){t.line.hide()})},s.showOwn=function(){o.default.each(s.associations,function(t){t.line.show()})},s.showAll=function(){l&&c&&f("show")},s.refresh=function(t){for(var e=s._.slate.paper,n=s.associations.length;n--;){var o=s.associations[n];o.isAnimating=t||!1,e.connection(o)}};var p=function(e){s._.slate.options.viewPort.allowDrag=!1,s._.slate.keyboard&&s._.slate.keyboard.start(s._),s._.slate.nodes.closeAllMenus(s._.options.id),!Session||Session.get("elementIsBeingResized")&&!1!==Session.get("elementIsBeingResized")||s._.menu&&o.default.isFunction(s._.menu.show)&&s._.options.allowMenu&&!s._.menu.isOpen()&&s._.menu.show(),t.stopEvent(e)},v=function(e){s._&&s._.slate&&s._.slate.options?(s._.slate.options.viewPort.allowDrag=!0,s._.slate.unglow(),s._.slate.keyboard&&s._.slate.keyboard.end()):console.log("missing options from ",s),t.stopEvent(e)},g=function(e){s._.slate.options.enabled&&s._.position("center",function(){s._.editor&&s._.editor.start()}),t.stopEvent(e)},y=[];return s.wireHoverEvents=function(){(y=[]).push({o:s._.vect,over:p,out:v,dbl:g}),y.push({o:s._.text,over:p,out:v,dbl:g}),s._.options.id!==s._.slate.tempNodeId&&o.default.each(y,function(t){t.o.mouseover(t.over),t.o.mouseout(t.out),t.o.dblclick(t.dbl)})},s.unwireHoverEvents=function(){o.default.each(y,function(t){t.o.events&&t.o.unmouseover(t.over),t.o.events&&t.o.unmouseout(t.out),t.o.events&&t.o.undblclick(t.dbl)})},s.wireDragEvents=function(){s._.vect.drag(d,u,h),s._.text.mousedown(function(t){s._.vect.initDrag(t)})},s}}(Slatebox)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));Slatebox,Slatebox.fn.node.fn._resize=function(){var t,e,n=this;n.show=function(o,i){if(n._.options.allowResize){e&&e.remove();var r=n._.slate.paper;return t=r.resize("/packages/slatebox/lib/client/images/2_lines.png").attr({fill:"#fff",stroke:"#000",x:o-5,y:i-5}),e=r.rect(o-6,i-6,t.attr("width"),t.attr("height")).attr({fill:"#f00",opacity:1e-8}).toFront(),t.mouseover(function(e){t.attr({cursor:"nw-resize"})}),e.mouseover(function(t){e.attr({cursor:"nw-resize"})}),e.drag(g,v,y),t}},n.hide=function(n){e&&e.remove(),t&&t.remove()};var i,r,a,s,l,c=0,u=0,d=10,h=10,f=!1,p=!1,v=function(){l=n._.options.vectorPath,i=e.attr("x"),r=e.attr("y"),e.attr({x:e.attr("x")-1e3,y:e.attr("y")-1e3,width:1e4,height:1e4}),Session.set("elementIsBeingResized",!0),n._.relationships.updateAssociationsWith({activeNode:n._.options.id,currentDx:0,currentDy:0,action:"resize"}),t.ox=t.attr("x"),t.oy=t.attr("y"),p=!0;var o=this;if(n._.slate.multiselection&&n._.slate.multiselection.end(),o.ox=o.attr("x"),o.oy=o.attr("y"),n._.setStartDrag(),n._.connectors.remove(),f=n._.slate.options.viewPort.allowDrag,n._.slate.disable(!1,!0)," "!==n._.options.text){var c=n._.text.getBBox();d=c.width+10>50?c.width+10:50,h=c.height+10>50?c.height+10:50}if(a=n._.options.width,s=n._.options.height,n._.options.rotate.rotationAngle){var u=h/s,v=d/a;Math.abs(v-1)<Math.abs(u-1)?h=s*v:Math.abs(v-1)>Math.abs(u-1)&&(d=a*u)}},g=function(e,i){n._.vect.getBBox();var r=n._.slate.options.viewPort.zoom.r,l=a+(e+=e/r-e),f=s+(i+=i/r-i);if(n._.options.rotate.rotationAngle){var p=f/s,v=l/a;Math.abs(v-1)<Math.abs(p-1)?i=(f=s*v)-s:Math.abs(v-1)>Math.abs(p-1)&&(e=(l=a*p)-a)}l>d?(this.attr({x:this.ox+e}),t.attr({x:t.ox+e})):this.attr({x:this.ox}),f>h?(this.attr({y:this.oy+i}),t.attr({y:t.oy+i})):this.attr({y:this.oy}),n._.events&&o.default.isFunction(n._.events.onResizing)&&n._.events.onResizing.apply(this,[l,f]),n.set(l,f),c=e,u=i},y=function(){var a=n._.options,s=a.image,l=a.imageOrigHeight,d=a.imageOrigWidth;s&&l&&d&&n.nodeSizeCorrection(),e.attr({x:i+c,y:r+u,width:t.attr("width"),height:t.attr("height")}),Session.set("elementIsBeingResized",!1),p=!1,n._.slate.enable(!1,!0),t.remove(),e.remove(),n._.setEndDrag(),n._.events&&o.default.isFunction(n._.events.onResized)?n._.events.onResized.apply(this,[n.send]):n.send()};return n.nodeSizeCorrection=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n._.vect.transform("");var e=n._.vect.getBBox(),o=n._.options.imageOrigHeight/e.height,i=n._.options.imageOrigWidth/e.width,r=1,a=1;n._.options.imageOrigHeight/i>e.height&&(r=e.height/e.width),n._.options.imageOrigWidth/o>e.width&&(a=e.width/e.height);var s=n._.options.imageOrigWidth/n._.options.imageOrigHeight,l=e.width/e.height;l<s?(a=1/s*e.width/e.height,e.height*a<h&&(a=h/e.height)):l>s&&(r=s*e.height/e.width,e.width*r<d&&(r=d/e.width));var c="s"+r+","+a+","+e.x+", "+e.y,u=Raphael.transformPath(n._.vect.attr("path").toString(),c);n._.vect.attr({path:u}),e=n._.vect.getBBox(),n._.vect.pattern&&($(n._.vect.pattern).find("image").css("height",e.height),$(n._.vect.pattern).find("image").css("width",e.width),n._.vect.pattern.getElementsByTagName("image")[0].setAttribute("height",e.height),n._.vect.pattern.getElementsByTagName("image")[0].setAttribute("width",e.width)),n._.setPosition({x:e.x,y:e.y}),n._.relationships.refresh();var f={};if(t){var p=Meteor.currentSlate.paper.path(u);f.boundingClientRect=p[0].getBoundingClientRect(),p.remove()}n._.rotate.applyImageRotation(f),e=n._.vect.getBBox(),n._.options.width=e.width,n._.options.height=e.height,n._.options.imageOrigHeight=e.height,n._.options.imageOrigWidth=e.width},n.send=function(){var t={type:"onNodeResized",data:{id:n._.options.id,height:n._.options.height,width:n._.options.width,imageOrigWidth:n._.options.imageOrigWidth,imageOrigHeight:n._.options.imageOrigHeight}},e=o.default.clone(n._.options.rotate.point);n._.slate.birdseye&&n._.slate.birdseye.nodeChanged(t),n._.options.rotate.point=e,n._.slate.collab&&n._.slate.collab.send(t)},n.lazySend=o.default.throttle(n.send,700),n.set=function(t,e,i,r,a){var s=void 0,c=void 0,u=n._.slate.paper.path(l||o.default.find(Meteor.currentSlate.nodes.allNodes,function(t){return t.options.id===n._.options.id}).options.vectorPath),f=u.getBBox();n._.options.rotate.point||(n._.options.rotate.point={x:f.cx,y:f.cy});var p="R"+n._.options.rotate.rotationAngle+", "+f.cx+", "+f.cy,v=Raphael.transformPath(u.attr("path"),p).toString();u.attr({path:v});var g=u.getBBox();i||(i=0);var y=1,_=1;if(t>d){y=t/g.width;var m=g.x+t/2,x=g.x-5;0===i?n._.text.attr({x:m}):(c={x:m},s={x:x}),n._.options.width=t}else y=d/g.width,n._.options.width=d;if(e>h){_=e/g.height;var b=g.y+e/2;0===i?n._.text.attr({y:b}):(o.default.extend(c,{y:b}),o.default.extend(s,{y:b})),n._.options.height=e}else _=h/g.height,n._.options.height=h;var w="s"+y+", "+_+", "+g.x+", "+g.y,k=Raphael.transformPath(u.attr("path").toString(),w).toString();u.attr({path:k}),g=u.getBBox(),o.default.extend(n._.options.rotate.point,{x:g.cx,y:g.cy});var P="R"+-n._.options.rotate.rotationAngle+", "+n._.options.rotate.point.x+", "+n._.options.rotate.point.y,S=Raphael.transformPath(u.attr("path"),P).toString();u.attr({path:S});var C=u.getBBox();if(n._.options.vectorPath=S,i>0){n._.text.animate(c,i),n._.link.hide();var A=function(){n._.slate&&n._.relationships.refresh()};eve.on("raphael.anim.frame.*",A),n._.vect.animate({path:S,transform:n._.getTransformString()},i,r,function(){n._.vect.getBBox();if(n._.vect.pattern){var t=n._.options.imageOrigWidth,e=n._.options.imageOrigHeight;$(n._.vect.pattern).find("image").css("height",e),$(n._.vect.pattern).find("image").css("width",t),n._.vect.pattern.getElementsByTagName("image")[0].setAttribute("height",e),n._.vect.pattern.getElementsByTagName("image")[0].setAttribute("width",t)}var o=n._.linkCoords();n._.link.transform(["t",o.x,",",o.y,"s",".8",",",".8","r","180"].join()),n._.options.link.show&&n._.link.show(),n._.relationships.refresh(),eve.unbind("raphael.anim.frame.*",A),a&&a.apply(this,[n._])})}else{var M=n._.vect.getTotalLength();n._.vect.attr({path:u.attr("path")}),n._.vect.transform(n._.getTransformString()),o.default.extend(n._.options.rotate.point,{x:C.cx,y:C.cy}),n._.rotate.applyImageRotation(),n._.setPosition({x:C.x,y:C.y},!0);var B=n._.vect.getTotalLength();$(n._.vect.pattern).find("image").css("height",C.height),$(n._.vect.pattern).find("image").css("width",C.width),o.default.each(n._.relationships.associations,function(t){t.child.options.id===n._.options.id?t.childPointLength=t.childPointLength*(B/M):t.parent.options.id===n._.options.id&&(t.parentPointLength=t.parentPointLength*(B/M))}),n._.relationships.refresh();var T=n._.linkCoords();n._.link.transform(["t",T.x,",",T.y,"s",".8",",",".8","r","180"].join()),n._.relationships.refresh()}u.remove();var z=n._.slate.paper.path(n._.vect.attr("path")),L=z.getBBox();o.default.extend(n._.options.rotate.point,{x:L.cx,y:L.cy}),z.remove()},n}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=o(n(0)),r=o(n(1));!function(t,e){Slatebox.fn.node.fn._shapes=function(){var e=this;return e.show=function(n,o,r){n+=1;var a=e._.slate.paper,s={fill:"#fff",stroke:"#000","stroke-width":1},l={fill:"#d8d8d8",stroke:"#000","stroke-width":1},c="M "+(n+123)+", "+(o+43)+" h30 a3,3 0 0 1 3,3 v25 a3,3 0 0 1 -3,3 h-30 a3,3 0 0 1 -3,-3 v-25 a3,3 0 0 1 3,-3 z M "+(n+128)+","+(o+58)+" m -3,0 a3,3 0 1,0 6,0 a 3,3 0 1,0 -6,0Z M "+(n+138)+","+(o+58)+" m -3,0 a3,3 0 1,0 6,0 a 3,3 0 1,0 -6,0Z M "+(n+148)+","+(o+58)+" m -3,0 a3,3 0 1,0 6,0 a 3,3 0 1,0 -6,0Z",u=[a.rect(n+5,o+43,30,30).attr(s),a.rect(n+44,o+43,30,30,5).attr(s),a.ellipse(n+98,o+58,16,16).attr(s),a.path(c).attr(l).data({msg:"Custom Shape",width:97})];i.default.each(u,function(n){n.mouseover(function(n){e._.slate.glow(this);var o=this.data("msg");o&&e._.slate.addtip(this.tooltip({type:"text",msg:o},this.data("width"),this.data("height"))),t.stopEvent(n)}),n.mouseout(function(n){e._.slate.unglow(),this.untooltip(),t.stopEvent(n)}),n.mousedown(function(t){if(this.type!==e._.options.vectorPath){var n={type:"onNodeShapeChanged",data:{id:e._.options.id,shape:this.type,rx:this.attr("rx")}};"path"===n.data.shape?e._.position("center",function(){e._.customShapes.start()}):(e.set(n.data),e._.slate.collab&&e._.slate.collab.send(n),e._.slate.birdseye&&e._.slate.birdseye.nodeChanged(n))}}),r.push(n)})},e.set=function(n){e._.slate.unglow();var o={fill:e._.options.backgroundColor,"stroke-width":e._.options.borderWidth,stroke:"#000"};e._.options.image&&""!==e._.options.image&&(o.fill="url("+e._.options.image+")");var a=e._.options.xPos,s=e._.options.yPos,l=["T",a,",",s].join(""),c=e._.slate.paper.path(e._.vect.attr("path").toString()).attr({opacity:0}),u=c.getBBox(),d=[["s",u.width/150,",",u.height/100,",",a,",",s].join(""),l];switch(n.shape){case"ellipse":e._.options.vectorPath=(0,r.default)("M 1,1 m -75,0 a75,50 0 1,0 150,0 a 75,50 0 1,0 -150,0Z",d),e._.options.isEllipse=!0;break;case"rect":e._.options.vectorPath=n.rx>0?(0,r.default)("M1,1 h130 a10,10 0 0 1 10,10 v80 a10,10 0 0 1 -10,10 h-130 a10,10 0 0 1 -10,-10 v-80 a10,10 0 0 1 10,-10 z",d):(0,r.default)("M1,1 h150 v100 h-150 v-100 z",d),e._.options.isEllipse=!1;break;default:e._.options.vectorPath=n.shape,e._.options.isEllipse=!1}var h=i.default.extend(o,{path:e._.options.vectorPath});e._.vect.attr(h);var f=e._.vect.getBBox(),p=a-f.x,v=s-f.y;if(0===p&&0===v||(t.transformPath(e._,["T",p,v].toString(",")),f=e._.vect.getBBox(),t.transformPath(e._,["T",u.cx-f.cx,u.cy-f.cy].toString(",")),f=e._.vect.getBBox()),c&&c.remove(),c=e._.slate.paper.path(e._.vect.attr("path").toString()).attr({opacity:0}),u=c.getBBox(),e._.vect.pattern){var g=u.width,y=u.height;$(e._.vect.pattern).find("image").css("height",y),$(e._.vect.pattern).find("image").css("width",g),e._.vect.pattern.getElementsByTagName("image")[0].setAttribute("height",y),e._.vect.pattern.getElementsByTagName("image")[0].setAttribute("width",g),e._.rotate.applyImageRotation()}e._.text.toFront(),e._.link.toFront(),e._.relationships.refresh(),e._.relationships.wireHoverEvents(),e._.relationships.wireDragEvents(),e._.setPosition({x:f.x,y:f.y}),e._.vect.data({id:e._.options.id}),e._.context.create(),c&&c.remove()},e}}(Slatebox)},function(t,e,n){"use strict";Slatebox,Slatebox.fn.node.fn._template=new function(){var t=this;return t.hello=function(){alert(parent.options.name)},t}},function(e,n,o){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(o(0));!function(e,n){Slatebox.fn.node.fn._toolbar=function(){var n=this;return n.show=function(o,r,a){var r=r+1,s=n._.slate.paper;for(toolbar=[s.handle().data({msg:"Connect To Node",width:110}).attr({fill:"90-#999-#ccc",stroke:"#333","stroke-width":2}).transform(["t",o,",",r,"s",".85",".85"].join()),s.deleter().data({msg:"Delete",width:54}).attr({fill:"90-#999-#ccc",stroke:"#333","stroke-width":2}).transform(["t",o+30,",",r,"s",".85",".85"].join()),s.editor().data({msg:"Edit Text",width:65}).attr({fill:"90-#999-#ccc",stroke:"#333","stroke-width":2}).transform(["t",o+60,",",r,"s",".85",".85"].join()),s.searcher().data({msg:"Embed Image",width:90}).attr({fill:"90-#999-#ccc",stroke:"#333","stroke-width":2}).transform(["t",o+90,",",r,"s",".85",".85"].join()),s.link().data({msg:"Add Link",width:62}).attr({fill:"90-#999-#ccc",stroke:"#333","stroke-width":2}).transform(["t",o+120,",",r,"s",".85",".85"].join())],i.default.each(toolbar,function(t){t.mouseover(function(t){n._.slate.glow(this);var o=this.data("msg");n._.slate.addtip(this.tooltip({type:"text",msg:o},this.data("width"),this.data("height"))),e.stopEvent(t)}),t.mouseout(function(t){n._&&n._.slate&&(n._.slate.unglow(),this.untooltip()),e.stopEvent(t)})}),t=0;t<5;t++)!function(t){i.default.each(["mousedown"],function(e){toolbar[t][e](function(e){e.stopPropagation(),n._.slate.unglow(),n._.slate.untooltip(),n._.events&&i.default.isFunction(n._.events.onToolbarClick)?n._.events.onToolbarClick.apply(this,[t]):0===t?(n._.relationships.initiateTempNode(e,n._,!0),n._.menu.hide()):1===t?n.del():2===t?(n._.slate.stopEditing(),n._.position("center",function(){n._.editor.start()})):3===t?(n._.slate.unMarkAll(),n._.slate.stopEditing(),n._.position("center",function(){n._.images.start()})):4===t&&(n._.slate.unMarkAll(),n._.slate.stopEditing(),n._.position("center",function(){n._.links.start()}))})})}(t);return i.default.each(toolbar,function(t){a.push(t)}),n},n.del=function(){var t=n._.slate.nodes.allNodes;if(i.default.filter(t,function(t){return t.options.allowDrag&&t.options.allowContext&&t.options.allowResize&&t.options.allowMenu}).length<=1)alert("Sorry, this is the last editable node on the slate, you cannot delete this one!");else{var e=n._.slate;n._.del();var o={type:"onNodeDeleted",data:{id:n._.options.id}};e.collab&&e.collab.send(o),e.birdseye&&e.birdseye.nodeDeleted(o)}},n}}(Slatebox)},function(t,e,n){"use strict";var o,i;!function(n){var r,a,s="hasOwnProperty",l=/[\.\/]/,c=/\s*,\s*/,u=function(t,e){return t-e},d={n:{}},h=function(){for(var t=0,e=this.length;t<e;t++)if(void 0!==this[t])return this[t]},f=function(){for(var t=this.length;--t;)if(void 0!==this[t])return this[t]},p=Object.prototype.toString,v=String,g=Array.isArray||function(t){return t instanceof Array||"[object Array]"==p.call(t)},y=function t(e,n){var o,i=a,s=Array.prototype.slice.call(arguments,2),l=t.listeners(e),c=0,d=[],p={},v=[],g=r;v.firstDefined=h,v.lastDefined=f,r=e,a=0;for(var y=0,_=l.length;y<_;y++)"zIndex"in l[y]&&(d.push(l[y].zIndex),l[y].zIndex<0&&(p[l[y].zIndex]=l[y]));for(d.sort(u);d[c]<0;)if(o=p[d[c++]],v.push(o.apply(n,s)),a)return a=i,v;for(y=0;y<_;y++)if("zIndex"in(o=l[y]))if(o.zIndex==d[c]){if(v.push(o.apply(n,s)),a)break;do{if(c++,(o=p[d[c]])&&v.push(o.apply(n,s)),a)break}while(o)}else p[o.zIndex]=o;else if(v.push(o.apply(n,s)),a)break;return a=i,r=g,v};y._events=d,y.listeners=function(t){var e,n,o,i,r,a,s,c,u=g(t)?t:t.split(l),h=d,f=[h],p=[];for(i=0,r=u.length;i<r;i++){for(c=[],a=0,s=f.length;a<s;a++)for(n=[(h=f[a].n)[u[i]],h["*"]],o=2;o--;)(e=n[o])&&(c.push(e),p=p.concat(e.f||[]));f=c}return p},y.separator=function(t){t?(t="["+(t=v(t).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",l=new RegExp(t)):l=/[\.\/]/},y.on=function(t,e){if("function"!=typeof e)return function(){};for(var n=g(t)?g(t[0])?t:[t]:v(t).split(c),o=0,i=n.length;o<i;o++)!function(t){for(var n,o=g(t)?t:v(t).split(l),i=d,r=0,a=o.length;r<a;r++)i=(i=i.n).hasOwnProperty(o[r])&&i[o[r]]||(i[o[r]]={n:{}});for(i.f=i.f||[],r=0,a=i.f.length;r<a;r++)if(i.f[r]==e){n=!0;break}!n&&i.f.push(e)}(n[o]);return function(t){+t==+t&&(e.zIndex=+t)}},y.f=function(t){var e=[].slice.call(arguments,1);return function(){y.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},y.stop=function(){a=1},y.nt=function(t){var e=g(r)?r.join("."):r;return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},y.nts=function(){return g(r)?r:r.split(l)},y.off=y.unbind=function(t,e){if(t){var n=g(t)?g(t[0])?t:[t]:v(t).split(c);if(n.length>1)for(var o=0,i=n.length;o<i;o++)y.off(n[o],e);else{n=g(t)?t:v(t).split(l);var r,a,u,h,f,p=[d],_=[];for(o=0,i=n.length;o<i;o++)for(h=0;h<p.length;h+=u.length-2){if(u=[h,1],r=p[h].n,"*"!=n[o])r[n[o]]&&(u.push(r[n[o]]),_.unshift({n:r,name:n[o]}));else for(a in r)r[s](a)&&(u.push(r[a]),_.unshift({n:r,name:a}));p.splice.apply(p,u)}for(o=0,i=p.length;o<i;o++)for(r=p[o];r.n;){if(e){if(r.f){for(h=0,f=r.f.length;h<f;h++)if(r.f[h]==e){r.f.splice(h,1);break}!r.f.length&&delete r.f}for(a in r.n)if(r.n[s](a)&&r.n[a].f){var m=r.n[a].f;for(h=0,f=m.length;h<f;h++)if(m[h]==e){m.splice(h,1);break}!m.length&&delete r.n[a].f}}else{delete r.f;for(a in r.n)r.n[s](a)&&r.n[a].f&&delete r.n[a].f}r=r.n}t:for(o=0,i=_.length;o<i;o++){r=_[o];for(a in r.n[r.name].f)continue t;for(a in r.n[r.name].n)continue t;delete r.n[r.name]}}}else y._events=d={n:{}}},y.once=function(t,e){return y.on(t,function n(){return y.off(t,n),e.apply(this,arguments)})},y.version="0.5.4",y.toString=function(){return"You are running Eve 0.5.4"},n.eve=y,void 0!==t&&t.exports?t.exports=y:(o=[],void 0!==(i=function(){return y}.apply(e,o))&&(t.exports=i))}("undefined"!=typeof window?window:void 0)},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){t.Raphael=e(t.eve)}(window,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var o,i;o=[n(1),n(3)],void 0!==(i=function(t){return t}.apply(e,o))&&(t.exports=i)},function(t,e,n){var i,r;i=[n(2)],void 0!==(r=function(t){function e(n){if(e.is(n,"function"))return x?n():t.on("raphael.DOMload",n);if(e.is(n,$))return e._engine.create[B](e,n.splice(0,3+e.is(n[0],V))).add(n);var o=Array.prototype.slice.call(arguments,0);if(e.is(o[o.length-1],"function")){var i=o.pop();return x?i.call(e._engine.create[B](e,o)):t.on("raphael.DOMload",function(){i.call(e._engine.create[B](e,o))})}return e._engine.create[B](e,arguments)}function n(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var o in t)t[S](o)&&(e[o]=n(t[o]));return e}function i(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function r(t,e,n){function o(){var r=Array.prototype.slice.call(arguments,0),a=r.join(""),s=o.cache=o.cache||{},l=o.count=o.count||[];return s[S](a)?(i(l,a),n?n(s[a]):s[a]):(l.length>=1e3&&delete s[l.shift()],l.push(a),s[a]=t[B](e,r),n?n(s[a]):s[a])}return o}function a(){return this.hex}function s(t,e){for(var n=[],o=0,i=t.length;i-2*!e>o;o+=2){var r=[{x:+t[o-2],y:+t[o-1]},{x:+t[o],y:+t[o+1]},{x:+t[o+2],y:+t[o+3]},{x:+t[o+4],y:+t[o+5]}];e?o?i-4==o?r[3]={x:+t[0],y:+t[1]}:i-2==o&&(r[2]={x:+t[0],y:+t[1]},r[3]={x:+t[2],y:+t[3]}):r[0]={x:+t[i-2],y:+t[i-1]}:i-4==o?r[3]=r[2]:o||(r[0]={x:+t[o],y:+t[o+1]}),n.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return n}function l(t,e,n,o,i){return t*(t*(-3*e+9*n-9*o+3*i)+6*e-12*n+6*o)-3*e+3*n}function c(t,e,n,o,i,r,a,s,c){null==c&&(c=1);for(var u=(c=c>1?1:c<0?0:c)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,p=0;p<12;p++){var v=u*d[p]+u,g=l(v,t,n,i,a),y=l(v,e,o,r,s),_=g*g+y*y;f+=h[p]*R.sqrt(_)}return u*f}function u(t,e,n,o,i,r,a,s,l){if(!(l<0||c(t,e,n,o,i,r,a,s)<l)){var u,d=.5,h=1-d;for(u=c(t,e,n,o,i,r,a,s,h);H(u-l)>.01;)d/=2,u=c(t,e,n,o,i,r,a,s,h+=(u<l?1:-1)*d);return h}}function d(t,e,n,o,i,r,a,s){if(!(I(t,n)<W(i,a)||W(t,n)>I(i,a)||I(e,o)<W(r,s)||W(e,o)>I(r,s))){var l=(t*o-e*n)*(i-a)-(t-n)*(i*s-r*a),c=(t*o-e*n)*(r-s)-(e-o)*(i*s-r*a),u=(t-n)*(r-s)-(e-o)*(i-a);if(u){var d=l/u,h=c/u,f=+d.toFixed(2),p=+h.toFixed(2);if(!(f<+W(t,n).toFixed(2)||f>+I(t,n).toFixed(2)||f<+W(i,a).toFixed(2)||f>+I(i,a).toFixed(2)||p<+W(e,o).toFixed(2)||p>+I(e,o).toFixed(2)||p<+W(r,s).toFixed(2)||p>+I(r,s).toFixed(2)))return{x:d,y:h}}}}function h(t,n,o){var i=e.bezierBBox(t),r=e.bezierBBox(n);if(!e.isBBoxIntersect(i,r))return o?0:[];for(var a=c.apply(0,t),s=c.apply(0,n),l=I(~~(a/5),1),u=I(~~(s/5),1),h=[],f=[],p={},v=o?0:[],g=0;g<l+1;g++){var y=e.findDotsAtSegment.apply(e,t.concat(g/l));h.push({x:y.x,y:y.y,t:g/l})}for(g=0;g<u+1;g++)y=e.findDotsAtSegment.apply(e,n.concat(g/u)),f.push({x:y.x,y:y.y,t:g/u});for(g=0;g<l;g++)for(var _=0;_<u;_++){var m=h[g],x=h[g+1],b=f[_],w=f[_+1],k=H(x.x-m.x)<.001?"y":"x",P=H(w.x-b.x)<.001?"y":"x",S=d(m.x,m.y,x.x,x.y,b.x,b.y,w.x,w.y);if(S){if(p[S.x.toFixed(4)]==S.y.toFixed(4))continue;p[S.x.toFixed(4)]=S.y.toFixed(4);var C=m.t+H((S[k]-m[k])/(x[k]-m[k]))*(x.t-m.t),A=b.t+H((S[P]-b[P])/(w[P]-b[P]))*(w.t-b.t);C>=0&&C<=1.001&&A>=0&&A<=1.001&&(o?v++:v.push({x:S.x,y:S.y,t1:W(C,1),t2:W(A,1)}))}}return v}function f(t,n,o){t=e._path2curve(t),n=e._path2curve(n);for(var i,r,a,s,l,c,u,d,f,p,v=o?0:[],g=0,y=t.length;g<y;g++){var _=t[g];if("M"==_[0])i=l=_[1],r=c=_[2];else{"C"==_[0]?(i=(f=[i,r].concat(_.slice(1)))[6],r=f[7]):(f=[i,r,i,r,l,c,l,c],i=l,r=c);for(var m=0,x=n.length;m<x;m++){var b=n[m];if("M"==b[0])a=u=b[1],s=d=b[2];else{"C"==b[0]?(a=(p=[a,s].concat(b.slice(1)))[6],s=p[7]):(p=[a,s,a,s,u,d,u,d],a=u,s=d);var w=h(f,p,o);if(o)v+=w;else{for(var k=0,P=w.length;k<P;k++)w[k].segment1=g,w[k].segment2=m,w[k].bez1=f,w[k].bez2=p;v=v.concat(w)}}}}}return v}function p(t,e,n,o,i,r){null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+o,this.e=+i,this.f=+r):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function v(){return this.x+E+this.y+E+this.width+"  "+this.height}function g(t,e,n,o,i,r){function a(t){return((u*t+c)*t+l)*t}function s(t,e){var n,o,i,r,s,d;for(i=t,d=0;d<8;d++){if(r=a(i)-t,H(r)<e)return i;if(s=(3*u*i+2*c)*i+l,H(s)<1e-6)break;i-=r/s}if(n=0,o=1,(i=t)<n)return n;if(i>o)return o;for(;n<o;){if(r=a(i),H(r-t)<e)return i;t>r?n=i:o=i,i=(o-n)/2+n}return i}var l=3*e,c=3*(o-e)-l,u=1-l-c,d=3*n,h=3*(i-n)-d,f=1-d-h;return function(t,e){var n=s(t,e);return((f*n+h)*n+d)*n}(t,1/(200*r))}function y(t,e){var n=[],o={};if(this.ms=e,this.times=1,t){for(var i in t)t[S](i)&&(o[K(i)]=t[i],n.push(K(i)));n.sort(ut)}this.anim=o,this.top=n[n.length-1],this.percents=n}function _(n,o,i,r,a,s){i=K(i);var l,c,u,d,h,f,v=n.ms,y={},_={},m={};if(r)for(b=0,k=re.length;b<k;b++){var x=re[b];if(x.el.id==o.id&&x.anim==n){x.percent!=i?(re.splice(b,1),u=1):c=x,o.attr(x.totalOrigin);break}}else r=+_;for(var b=0,k=n.percents.length;b<k;b++){if(n.percents[b]==i||n.percents[b]>r*n.top){i=n.percents[b],h=n.percents[b-1]||0,v=v/n.top*(i-h),d=n.percents[b+1],l=n.anim[i];break}r&&o.attr(n.anim[n.percents[b]])}if(l){if(c)c.initstatus=r,c.start=new Date-c.ms*r;else{for(var P in l)if(l[S](P)&&(nt[S](P)||o.paper.customAttributes[S](P)))switch(y[P]=o.attr(P),null==y[P]&&(y[P]=et[P]),_[P]=l[P],nt[P]){case V:m[P]=(_[P]-y[P])/v;break;case"colour":y[P]=e.getRGB(y[P]);var C=e.getRGB(_[P]);m[P]={r:(C.r-y[P].r)/v,g:(C.g-y[P].g)/v,b:(C.b-y[P].b)/v};break;case"path":var A=Nt(y[P],_[P]),M=A[1];for(y[P]=A[0],m[P]=[],b=0,k=y[P].length;b<k;b++){m[P][b]=[0];for(var B=1,z=y[P][b].length;B<z;B++)m[P][b][B]=(M[b][B]-y[P][b][B])/v}break;case"transform":var L=o._,E=Rt(L[P],_[P]);if(E)for(y[P]=E.from,_[P]=E.to,m[P]=[],m[P].real=!0,b=0,k=y[P].length;b<k;b++)for(m[P][b]=[y[P][b][0]],B=1,z=y[P][b].length;B<z;B++)m[P][b][B]=(_[P][b][B]-y[P][b][B])/v;else{var F=o.matrix||new p,O={_:{transform:L.transform},getBBox:function(){return o.getBBox(1)}};y[P]=[F.a,F.b,F.c,F.d,F.e,F.f],Ot(O,_[P]),_[P]=O._.transform,m[P]=[(O.matrix.a-F.a)/v,(O.matrix.b-F.b)/v,(O.matrix.c-F.c)/v,(O.matrix.d-F.d)/v,(O.matrix.e-F.e)/v,(O.matrix.f-F.f)/v]}break;case"csv":var j=N(l[P])[D](w),R=N(y[P])[D](w);if("clip-rect"==P)for(y[P]=R,m[P]=[],b=R.length;b--;)m[P][b]=(j[b]-y[P][b])/v;_[P]=j;break;default:for(j=[][T](l[P]),R=[][T](y[P]),m[P]=[],b=o.paper.customAttributes[P].length;b--;)m[P][b]=((j[b]||0)-(R[b]||0))/v}var I=l.easing,W=e.easing_formulas[I];if(!W)if((W=N(I).match(J))&&5==W.length){var H=W;W=function(t){return g(t,+H[1],+H[2],+H[3],+H[4],v)}}else W=dt;if(f=l.start||n.start||+new Date,x={anim:n,percent:i,timestamp:f,start:f+(n.del||0),status:0,initstatus:r||0,stop:!1,ms:v,easing:W,from:y,diff:m,to:_,el:o,callback:l.callback,prev:h,next:d,repeat:s||n.times,origin:o.attr(),totalOrigin:a},re.push(x),r&&!c&&!u&&(x.stop=!0,x.start=new Date-v*r,1==re.length))return se();u&&(x.start=new Date-x.ms*r),1==re.length&&ae(se)}t("raphael.anim.start."+o.id,o,n)}}function m(t){for(var e=0;e<re.length;e++)re[e].el.paper==t&&re.splice(e--,1)}e.version="2.2.0",e.eve=t;var x,b,w=/[, ]+/,k={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},P=/\{(\d+)\}/g,S="hasOwnProperty",C={doc:document,win:window},A={was:Object.prototype[S].call(C.win,"Raphael"),is:C.win.Raphael},M=function(){this.ca=this.customAttributes={}},B="apply",T="concat",z="ontouchstart"in C.win||C.win.DocumentTouch&&C.doc instanceof DocumentTouch,L="",E=" ",N=String,D="split",F="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[D](E),O={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},j=N.prototype.toLowerCase,R=Math,I=R.max,W=R.min,H=R.abs,U=R.pow,q=R.PI,V="number",$="array",Y=Object.prototype.toString,X=(e._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),G={NaN:1,Infinity:1,"-Infinity":1},J=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=R.round,K=parseFloat,Q=parseInt,tt=N.prototype.toUpperCase,et=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},nt=e._availableAnimAttrs={blur:V,"clip-rect":"csv",cx:V,cy:V,fill:"colour","fill-opacity":V,"font-size":V,height:V,opacity:V,path:"path",r:V,rx:V,ry:V,stroke:"colour","stroke-opacity":V,"stroke-width":V,transform:"transform",width:V,x:V,y:V},ot=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,it={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,at=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,st=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,lt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ct=(e._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ut=function(t,e){return K(t)-K(e)},dt=function(t){return t},ht=e._rectPath=function(t,e,n,o,i){return i?[["M",t+i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,o-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-o],["a",i,i,0,0,1,i,-i],["z"]]:[["M",t,e],["l",n,0],["l",0,o],["l",-n,0],["z"]]},ft=function(t,e,n,o){return null==o&&(o=n),[["M",t,e],["m",0,-o],["a",n,o,0,1,1,0,2*o],["a",n,o,0,1,1,0,-2*o],["z"]]},pt=e._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return ft(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return ft(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ht(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ht(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ht(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return ht(e.x,e.y,e.width,e.height)}},vt=e.mapPath=function(t,e){if(!e)return t;var n,o,i,r,a,s,l;for(i=0,a=(t=Nt(t)).length;i<a;i++)for(r=1,s=(l=t[i]).length;r<s;r+=2)n=e.x(l[r],l[r+1]),o=e.y(l[r],l[r+1]),l[r]=n,l[r+1]=o;return t};if(e._g=C,e.type=C.win.SVGAngle||C.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var gt,yt=C.doc.createElement("div");if(yt.innerHTML='<v:shape adj="1"/>',gt=yt.firstChild,gt.style.behavior="url(#default#VML)",!gt||"object"!=o(gt.adj))return e.type=L;yt=null}e.svg=!(e.vml="VML"==e.type),e._Paper=M,e.fn=b=M.prototype=e.prototype,e._id=0,e.is=function(t,e){return"finite"==(e=j.call(e))?!G[S](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==(void 0===t?"undefined":o(t))&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||Y.call(t).slice(8,-1).toLowerCase()==e},e.angle=function(t,n,o,i,r,a){if(null==r){var s=t-o,l=n-i;return s||l?(180+180*R.atan2(-l,-s)/q+360)%360:0}return e.angle(t,n,r,a)-e.angle(o,i,r,a)},e.rad=function(t){return t%360*q/180},e.deg=function(t){return Math.round(180*t/q%360*1e3)/1e3},e.snapTo=function(t,n,o){if(o=e.is(o,"finite")?o:10,e.is(t,$)){for(var i=t.length;i--;)if(H(t[i]-n)<=o)return t[i]}else{var r=n%(t=+t);if(r<o)return n-r;if(r>t-o)return n-r+t}return n};e.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*R.random()|0;return("x"==t?e:3&e|8).toString(16)});e.setWindow=function(n){t("raphael.setWindow",e,C.win,n),C.win=n,C.doc=C.win.document,e._engine.initWin&&e._engine.initWin(C.win)};var _t=function(t){if(e.vml){var n,o=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),n=i.body}catch(t){n=createPopup().document.body}var a=n.createTextRange();_t=r(function(t){try{n.style.color=N(t).replace(o,L);var e=a.queryCommandValue("ForeColor");return"#"+("000000"+(e=(255&e)<<16|65280&e|(16711680&e)>>>16).toString(16)).slice(-6)}catch(t){return"none"}})}else{var s=C.doc.createElement("i");s.title="Raphal Colour Picker",s.style.display="none",C.doc.body.appendChild(s),_t=r(function(t){return s.style.color=t,C.doc.defaultView.getComputedStyle(s,L).getPropertyValue("color")})}return _t(t)},mt=function(){return"hsb("+[this.h,this.s,this.b]+")"},xt=function(){return"hsl("+[this.h,this.s,this.l]+")"},bt=function(){return this.hex},wt=function(t,n,o){if(null==n&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(o=t.b,n=t.g,t=t.r),null==n&&e.is(t,"string")){var i=e.getRGB(t);t=i.r,n=i.g,o=i.b}return(t>1||n>1||o>1)&&(t/=255,n/=255,o/=255),[t,n,o]},kt=function(t,n,o,i){var r={r:t*=255,g:n*=255,b:o*=255,hex:e.rgb(t,n,o),toString:bt};return e.is(i,"finite")&&(r.opacity=i),r};e.color=function(t){var n;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(n=e.hsb2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.hex=n.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(n=e.hsl2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.hex=n.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(n=e.rgb2hsl(t),t.h=n.h,t.s=n.s,t.l=n.l,n=e.rgb2hsb(t),t.v=n.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=bt,t},e.hsb2rgb=function(t,e,n,o){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,o=t.o,t=t.h);var i,r,a,s,l;return t=(t*=360)%360/60,l=n*e,s=l*(1-H(t%2-1)),i=r=a=n-l,t=~~t,i+=[l,s,0,0,s,l][t],r+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],kt(i,r,a,o)},e.hsl2rgb=function(t,e,n,o){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100);var i,r,a,s,l;return t=(t*=360)%360/60,l=2*e*(n<.5?n:1-n),s=l*(1-H(t%2-1)),i=r=a=n-l/2,t=~~t,i+=[l,s,0,0,s,l][t],r+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],kt(i,r,a,o)},e.rgb2hsb=function(t,e,n){t=(n=wt(t,e,n))[0],e=n[1],n=n[2];var o,i,r,a;return r=I(t,e,n),a=r-W(t,e,n),o=0==a?null:r==t?(e-n)/a:r==e?(n-t)/a+2:(t-e)/a+4,o=(o+360)%6*60/360,i=0==a?0:a/r,{h:o,s:i,b:r,toString:mt}},e.rgb2hsl=function(t,e,n){t=(n=wt(t,e,n))[0],e=n[1],n=n[2];var o,i,r,a,s,l;return a=I(t,e,n),s=W(t,e,n),l=a-s,o=0==l?null:a==t?(e-n)/l:a==e?(n-t)/l+2:(t-e)/l+4,o=(o+360)%6*60/360,r=(a+s)/2,i=0==l?0:r<.5?l/(2*r):l/(2-2*r),{h:o,s:i,l:r,toString:xt}},e._path2string=function(){return this.join(",").replace(rt,"$1")};e._preload=function(t,e){var n=C.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){e.call(this),this.onload=null,C.doc.body.removeChild(this)},n.onerror=function(){C.doc.body.removeChild(this)},C.doc.body.appendChild(n),n.src=t};e.getRGB=r(function(t){if(!t||(t=N(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:a};!(it[S](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=_t(t));var n,o,i,r,s,l,c=t.match(X);return c?(c[2]&&(i=Q(c[2].substring(5),16),o=Q(c[2].substring(3,5),16),n=Q(c[2].substring(1,3),16)),c[3]&&(i=Q((s=c[3].charAt(3))+s,16),o=Q((s=c[3].charAt(2))+s,16),n=Q((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4][D](ot),n=K(l[0]),"%"==l[0].slice(-1)&&(n*=2.55),o=K(l[1]),"%"==l[1].slice(-1)&&(o*=2.55),i=K(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(r=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100)),c[5]?(l=c[5][D](ot),n=K(l[0]),"%"==l[0].slice(-1)&&(n*=2.55),o=K(l[1]),"%"==l[1].slice(-1)&&(o*=2.55),i=K(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(n/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(r=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100),e.hsb2rgb(n,o,i,r)):c[6]?(l=c[6][D](ot),n=K(l[0]),"%"==l[0].slice(-1)&&(n*=2.55),o=K(l[1]),"%"==l[1].slice(-1)&&(o*=2.55),i=K(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(n/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(r=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100),e.hsl2rgb(n,o,i,r)):(c={r:n,g:o,b:i,toString:a},c.hex="#"+(16777216|i|o<<8|n<<16).toString(16).slice(1),e.is(r,"finite")&&(c.opacity=r),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a}},e),e.hsb=r(function(t,n,o){return e.hsb2rgb(t,n,o).hex}),e.hsl=r(function(t,n,o){return e.hsl2rgb(t,n,o).hex}),e.rgb=r(function(t,e,n){function o(t){return t+.5|0}return"#"+(16777216|o(n)|o(e)<<8|o(t)<<16).toString(16).slice(1)}),e.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},n=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),n.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=function(t){if(!t)return null;var n=Pt(t);if(n.arr)return Ct(n.arr);var o={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return e.is(t,$)&&e.is(t[0],$)&&(i=Ct(t)),i.length||N(t).replace(at,function(t,e,n){var r=[],a=e.toLowerCase();if(n.replace(lt,function(t,e){e&&r.push(+e)}),"m"==a&&r.length>2&&(i.push([e][T](r.splice(0,2))),a="l",e="m"==e?"l":"L"),"r"==a)i.push([e][T](r));else for(;r.length>=o[a]&&(i.push([e][T](r.splice(0,o[a]))),o[a]););}),i.toString=e._path2string,n.arr=Ct(i),i},e.parseTransformString=r(function(t){if(!t)return null;var n=[];return e.is(t,$)&&e.is(t[0],$)&&(n=Ct(t)),n.length||N(t).replace(st,function(t,e,o){var i=[];j.call(e);o.replace(lt,function(t,e){e&&i.push(+e)}),n.push([e][T](i))}),n.toString=e._path2string,n});var Pt=function t(e){var n=t.ps=t.ps||{};return n[e]?n[e].sleep=100:n[e]={sleep:100},setTimeout(function(){for(var t in n)n[S](t)&&t!=e&&(n[t].sleep--,!n[t].sleep&&delete n[t])}),n[e]};e.findDotsAtSegment=function(t,e,n,o,i,r,a,s,l){var c=1-l,u=U(c,3),d=U(c,2),h=l*l,f=h*l,p=u*t+3*d*l*n+3*c*l*l*i+f*a,v=u*e+3*d*l*o+3*c*l*l*r+f*s,g=t+2*l*(n-t)+h*(i-2*n+t),y=e+2*l*(o-e)+h*(r-2*o+e),_=n+2*l*(i-n)+h*(a-2*i+n),m=o+2*l*(r-o)+h*(s-2*r+o),x=c*t+l*n,b=c*e+l*o,w=c*i+l*a,k=c*r+l*s,P=90-180*R.atan2(g-_,y-m)/q;return(g>_||y<m)&&(P+=180),{x:p,y:v,m:{x:g,y:y},n:{x:_,y:m},start:{x:x,y:b},end:{x:w,y:k},alpha:P}},e.bezierBBox=function(t,n,o,i,r,a,s,l){e.is(t,"array")||(t=[t,n,o,i,r,a,s,l]);var c=Et.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},e.isPointInsideBBox=function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},e.isBBoxIntersect=function(t,n){var o=e.isPointInsideBBox;return o(n,t.x,t.y)||o(n,t.x2,t.y)||o(n,t.x,t.y2)||o(n,t.x2,t.y2)||o(t,n.x,n.y)||o(t,n.x2,n.y)||o(t,n.x,n.y2)||o(t,n.x2,n.y2)||(t.x<n.x2&&t.x>n.x||n.x<t.x2&&n.x>t.x)&&(t.y<n.y2&&t.y>n.y||n.y<t.y2&&n.y>t.y)},e.pathIntersection=function(t,e){return f(t,e)},e.pathIntersectionNumber=function(t,e){return f(t,e,1)},e.isPointInsidePath=function(t,n,o){var i=e.pathBBox(t);return e.isPointInsideBBox(i,n,o)&&f(t,[["M",n,o],["H",i.x2+10]],1)%2==1},e._removedFactory=function(e){return function(){t("raphael.log",null,"Raphal: you are calling to method "+e+" of removed object",e)}};var St=e.pathBBox=function(t){var e=Pt(t);if(e.bbox)return n(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var o,i=0,r=0,a=[],s=[],l=0,c=(t=Nt(t)).length;l<c;l++)if("M"==(o=t[l])[0])i=o[1],r=o[2],a.push(i),s.push(r);else{var u=Et(i,r,o[1],o[2],o[3],o[4],o[5],o[6]);a=a[T](u.min.x,u.max.x),s=s[T](u.min.y,u.max.y),i=o[5],r=o[6]}var d=W[B](0,a),h=W[B](0,s),f=I[B](0,a),p=I[B](0,s),v=f-d,g=p-h,y={x:d,y:h,x2:f,y2:p,width:v,height:g,cx:d+v/2,cy:h+g/2};return e.bbox=n(y),y},Ct=function(t){var o=n(t);return o.toString=e._path2string,o},At=e._pathToRelative=function(t){var n=Pt(t);if(n.rel)return Ct(n.rel);e.is(t,$)&&e.is(t&&t[0],$)||(t=e.parsePathString(t));var o=[],i=0,r=0,a=0,s=0,l=0;"M"==t[0][0]&&(a=i=t[0][1],s=r=t[0][2],l++,o.push(["M",i,r]));for(var c=l,u=t.length;c<u;c++){var d=o[c]=[],h=t[c];if(h[0]!=j.call(h[0]))switch(d[0]=j.call(h[0]),d[0]){case"a":d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=+(h[6]-i).toFixed(3),d[7]=+(h[7]-r).toFixed(3);break;case"v":d[1]=+(h[1]-r).toFixed(3);break;case"m":a=h[1],s=h[2];default:for(var f=1,p=h.length;f<p;f++)d[f]=+(h[f]-(f%2?i:r)).toFixed(3)}else{d=o[c]=[],"m"==h[0]&&(a=h[1]+i,s=h[2]+r);for(var v=0,g=h.length;v<g;v++)o[c][v]=h[v]}var y=o[c].length;switch(o[c][0]){case"z":i=a,r=s;break;case"h":i+=+o[c][y-1];break;case"v":r+=+o[c][y-1];break;default:i+=+o[c][y-2],r+=+o[c][y-1]}}return o.toString=e._path2string,n.rel=Ct(o),o},Mt=e._pathToAbsolute=function(t){var n=Pt(t);if(n.abs)return Ct(n.abs);if(e.is(t,$)&&e.is(t&&t[0],$)||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var o=[],i=0,r=0,a=0,l=0,c=0;"M"==t[0][0]&&(a=i=+t[0][1],l=r=+t[0][2],c++,o[0]=["M",i,r]);for(var u,d,h=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),f=c,p=t.length;f<p;f++){if(o.push(u=[]),(d=t[f])[0]!=tt.call(d[0]))switch(u[0]=tt.call(d[0]),u[0]){case"A":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+(d[6]+i),u[7]=+(d[7]+r);break;case"V":u[1]=+d[1]+r;break;case"H":u[1]=+d[1]+i;break;case"R":for(var v=[i,r][T](d.slice(1)),g=2,y=v.length;g<y;g++)v[g]=+v[g]+i,v[++g]=+v[g]+r;o.pop(),o=o[T](s(v,h));break;case"M":a=+d[1]+i,l=+d[2]+r;default:for(g=1,y=d.length;g<y;g++)u[g]=+d[g]+(g%2?i:r)}else if("R"==d[0])v=[i,r][T](d.slice(1)),o.pop(),o=o[T](s(v,h)),u=["R"][T](d.slice(-2));else for(var _=0,m=d.length;_<m;_++)u[_]=d[_];switch(u[0]){case"Z":i=a,r=l;break;case"H":i=u[1];break;case"V":r=u[1];break;case"M":a=u[u.length-2],l=u[u.length-1];default:i=u[u.length-2],r=u[u.length-1]}}return o.toString=e._path2string,n.abs=Ct(o),o},Bt=function(t,e,n,o){return[t,e,n,o,n,o]},Tt=function(t,e,n,o,i,r){return[1/3*t+2/3*n,1/3*e+2/3*o,1/3*i+2/3*n,1/3*r+2/3*o,i,r]},zt=function t(e,n,o,i,a,s,l,c,u,d){var h,f=120*q/180,p=q/180*(+a||0),v=[],g=r(function(t,e,n){return{x:t*R.cos(n)-e*R.sin(n),y:t*R.sin(n)+e*R.cos(n)}});if(d)S=d[0],C=d[1],k=d[2],P=d[3];else{e=(h=g(e,n,-p)).x,n=h.y,c=(h=g(c,u,-p)).x,u=h.y;R.cos(q/180*a),R.sin(q/180*a);var y=(e-c)/2,_=(n-u)/2,m=y*y/(o*o)+_*_/(i*i);m>1&&(o*=m=R.sqrt(m),i*=m);var x=o*o,b=i*i,w=(s==l?-1:1)*R.sqrt(H((x*b-x*_*_-b*y*y)/(x*_*_+b*y*y))),k=w*o*_/i+(e+c)/2,P=w*-i*y/o+(n+u)/2,S=R.asin(((n-P)/i).toFixed(9)),C=R.asin(((u-P)/i).toFixed(9));S=e<k?q-S:S,C=c<k?q-C:C,S<0&&(S=2*q+S),C<0&&(C=2*q+C),l&&S>C&&(S-=2*q),!l&&C>S&&(C-=2*q)}var A=C-S;if(H(A)>f){var M=C,B=c,z=u;C=S+f*(l&&C>S?1:-1),v=t(c=k+o*R.cos(C),u=P+i*R.sin(C),o,i,a,0,l,B,z,[C,M,k,P])}A=C-S;var L=R.cos(S),E=R.sin(S),N=R.cos(C),F=R.sin(C),O=R.tan(A/4),j=4/3*o*O,I=4/3*i*O,W=[e,n],U=[e+j*E,n-I*L],V=[c+j*F,u-I*N],$=[c,u];if(U[0]=2*W[0]-U[0],U[1]=2*W[1]-U[1],d)return[U,V,$][T](v);for(var Y=[],X=0,G=(v=[U,V,$][T](v).join()[D](",")).length;X<G;X++)Y[X]=X%2?g(v[X-1],v[X],p).y:g(v[X],v[X+1],p).x;return Y},Lt=function(t,e,n,o,i,r,a,s,l){var c=1-l;return{x:U(c,3)*t+3*U(c,2)*l*n+3*c*l*l*i+U(l,3)*a,y:U(c,3)*e+3*U(c,2)*l*o+3*c*l*l*r+U(l,3)*s}},Et=r(function(t,e,n,o,i,r,a,s){var l,c=i-2*n+t-(a-2*i+n),u=2*(n-t)-2*(i-n),d=t-n,h=(-u+R.sqrt(u*u-4*c*d))/2/c,f=(-u-R.sqrt(u*u-4*c*d))/2/c,p=[e,s],v=[t,a];return H(h)>"1e12"&&(h=.5),H(f)>"1e12"&&(f=.5),h>0&&h<1&&(l=Lt(t,e,n,o,i,r,a,s,h),v.push(l.x),p.push(l.y)),f>0&&f<1&&(l=Lt(t,e,n,o,i,r,a,s,f),v.push(l.x),p.push(l.y)),c=r-2*o+e-(s-2*r+o),u=2*(o-e)-2*(r-o),d=e-o,h=(-u+R.sqrt(u*u-4*c*d))/2/c,f=(-u-R.sqrt(u*u-4*c*d))/2/c,H(h)>"1e12"&&(h=.5),H(f)>"1e12"&&(f=.5),h>0&&h<1&&(l=Lt(t,e,n,o,i,r,a,s,h),v.push(l.x),p.push(l.y)),f>0&&f<1&&(l=Lt(t,e,n,o,i,r,a,s,f),v.push(l.x),p.push(l.y)),{min:{x:W[B](0,v),y:W[B](0,p)},max:{x:I[B](0,v),y:I[B](0,p)}}}),Nt=e._path2curve=r(function(t,e){var n=!e&&Pt(t);if(!e&&n.curve)return Ct(n.curve);for(var o=Mt(t),i=e&&Mt(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(t,e,n){var o,i,r={T:1,Q:1};if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in r)&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][T](zt[B](0,[e.x,e.y][T](t.slice(1))));break;case"S":"C"==n||"S"==n?(o=2*e.x-e.bx,i=2*e.y-e.by):(o=e.x,i=e.y),t=["C",o,i][T](t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][T](Tt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][T](Tt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][T](Bt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][T](Bt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][T](Bt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][T](Bt(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)u[e]="A",i&&(d[e]="A"),t.splice(e++,0,["C"][T](n.splice(0,6)));t.splice(e,1),v=I(o.length,i&&i.length||0)}},c=function(t,e,n,r,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=t[a][1],n.y=t[a][2],v=I(o.length,i&&i.length||0))},u=[],d=[],h="",f="",p=0,v=I(o.length,i&&i.length||0);p<v;p++){o[p]&&(h=o[p][0]),"C"!=h&&(u[p]=h,p&&(f=u[p-1])),o[p]=s(o[p],r,f),"A"!=u[p]&&"C"==h&&(u[p]="C"),l(o,p),i&&(i[p]&&(h=i[p][0]),"C"!=h&&(d[p]=h,p&&(f=d[p-1])),i[p]=s(i[p],a,f),"A"!=d[p]&&"C"==h&&(d[p]="C"),l(i,p)),c(o,i,r,a,p),c(i,o,a,r,p);var g=o[p],y=i&&i[p],_=g.length,m=i&&y.length;r.x=g[_-2],r.y=g[_-1],r.bx=K(g[_-4])||r.x,r.by=K(g[_-3])||r.y,a.bx=i&&(K(y[m-4])||a.x),a.by=i&&(K(y[m-3])||a.y),a.x=i&&y[m-2],a.y=i&&y[m-1]}return i||(n.curve=Ct(o)),i?[o,i]:o},null,Ct),Dt=(e._parseDots=r(function(t){for(var n=[],o=0,i=t.length;o<i;o++){var r={},a=t[o].match(/^([^:]*):?([\d\.]*)/);if(r.color=e.getRGB(a[1]),r.color.error)return null;r.opacity=r.color.opacity,r.color=r.color.hex,a[2]&&(r.offset=a[2]+"%"),n.push(r)}for(o=1,i=n.length-1;o<i;o++)if(!n[o].offset){for(var s=K(n[o-1].offset||0),l=0,c=o+1;c<i;c++)if(n[c].offset){l=n[c].offset;break}l||(l=100,c=i);for(var u=((l=K(l))-s)/(c-o+1);o<c;o++)s+=u,n[o].offset=s+"%"}return n}),e._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Ft=(e._tofront=function(t,e){e.top!==t&&(Dt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},e._toback=function(t,e){e.bottom!==t&&(Dt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},e._insertafter=function(t,e,n){Dt(t,n),e==n.top&&(n.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},e._insertbefore=function(t,e,n){Dt(t,n),e==n.bottom&&(n.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},e.toMatrix=function(t,e){var n=St(t),o={_:{transform:L},getBBox:function(){return n}};return Ot(o,e),o.matrix}),Ot=(e.transformPath=function(t,e){return vt(t,Ft(t,e))},e._extractTransform=function(t,n){if(null==n)return t._.transform;n=N(n).replace(/\.{3}|\u2026/g,t._.transform||L);var o=e.parseTransformString(n),i=0,r=0,a=0,s=1,l=1,c=t._,u=new p;if(c.transform=o||[],o)for(var d=0,h=o.length;d<h;d++){var f,v,g,y,_,m=o[d],x=m.length,b=N(m[0]).toLowerCase(),w=m[0]!=b,k=w?u.invert():0;"t"==b&&3==x?w?(f=k.x(0,0),v=k.y(0,0),g=k.x(m[1],m[2]),y=k.y(m[1],m[2]),u.translate(g-f,y-v)):u.translate(m[1],m[2]):"r"==b?2==x?(_=_||t.getBBox(1),u.rotate(m[1],_.x+_.width/2,_.y+_.height/2),i+=m[1]):4==x&&(w?(g=k.x(m[2],m[3]),y=k.y(m[2],m[3]),u.rotate(m[1],g,y)):u.rotate(m[1],m[2],m[3]),i+=m[1]):"s"==b?2==x||3==x?(_=_||t.getBBox(1),u.scale(m[1],m[x-1],_.x+_.width/2,_.y+_.height/2),s*=m[1],l*=m[x-1]):5==x&&(w?(g=k.x(m[3],m[4]),y=k.y(m[3],m[4]),u.scale(m[1],m[2],g,y)):u.scale(m[1],m[2],m[3],m[4]),s*=m[1],l*=m[2]):"m"==b&&7==x&&u.add(m[1],m[2],m[3],m[4],m[5],m[6]),c.dirtyT=1,t.matrix=u}t.matrix=u,c.sx=s,c.sy=l,c.deg=i,c.dx=r=u.e,c.dy=a=u.f,1==s&&1==l&&!i&&c.bbox?(c.bbox.x+=+r,c.bbox.y+=+a):c.dirtyT=1}),jt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Rt=e._equaliseTransform=function(t,n){n=N(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];for(var o,i,r,a,s=I(t.length,n.length),l=[],c=[],u=0;u<s;u++){if(r=t[u]||jt(n[u]),a=n[u]||jt(r),r[0]!=a[0]||"r"==r[0].toLowerCase()&&(r[2]!=a[2]||r[3]!=a[3])||"s"==r[0].toLowerCase()&&(r[3]!=a[3]||r[4]!=a[4]))return;for(l[u]=[],c[u]=[],o=0,i=I(r.length,a.length);o<i;o++)o in r&&(l[u][o]=r[o]),o in a&&(c[u][o]=a[o])}return{from:l,to:c}};e._getContainer=function(t,n,o,i){var r;if(null!=(r=null!=i||e.is(t,"object")?t:C.doc.getElementById(t)))return r.tagName?null==n?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:n,height:o}:{container:1,x:t,y:n,width:o,height:i}},e.pathToRelative=At,e._engine={},e.path2curve=Nt,e.matrix=function(t,e,n,o,i,r){return new p(t,e,n,o,i,r)},function(t){function n(t){return t[0]*t[0]+t[1]*t[1]}function o(t){var e=R.sqrt(n(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}t.add=function(t,e,n,o,i,r){var a,s,l,c,u=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[t,n,i],[e,o,r],[0,0,1]];for(t&&t instanceof p&&(h=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),a=0;a<3;a++)for(s=0;s<3;s++){for(c=0,l=0;l<3;l++)c+=d[a][l]*h[l][s];u[a][s]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new p(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,n,o){null==e&&(e=t),(n||o)&&this.add(1,0,0,1,n,o),this.add(t,0,0,e,0,0),(n||o)&&this.add(1,0,0,1,-n,-o)},t.rotate=function(t,n,o){t=e.rad(t),n=n||0,o=o||0;var i=+R.cos(t).toFixed(9),r=+R.sin(t).toFixed(9);this.add(i,r,-r,i,n,o),this.add(1,0,0,1,-n,-o)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[N.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=R.sqrt(n(i[0])),o(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=R.sqrt(n(i[1])),o(i[1]),t.shear/=t.scaley;var r=-i[0][1],a=i[1][1];return a<0?(t.rotate=e.deg(R.acos(a)),r<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(R.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[D]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:L)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:L)+(e.rotate?"r"+[e.rotate,0,0]:L)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);for(var It=function(){this.returnValue=!1},Wt=function(){return this.originalEvent.preventDefault()},Ht=function(){this.cancelBubble=!0},Ut=function(){return this.originalEvent.stopPropagation()},qt=function(t){var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,n=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;return{x:t.clientX+n,y:t.clientY+e}},Vt=C.doc.addEventListener?function(t,e,n,o){var i=function(t){var e=qt(t);return n.call(o,t,e.x,e.y)};if(t.addEventListener(e,i,!1),z&&O[e]){var r=function(e){for(var i=qt(e),r=e,a=0,s=e.targetTouches&&e.targetTouches.length;a<s;a++)if(e.targetTouches[a].target==t){(e=e.targetTouches[a]).originalEvent=r,e.preventDefault=Wt,e.stopPropagation=Ut;break}return n.call(o,e,i.x,i.y)};t.addEventListener(O[e],r,!1)}return function(){return t.removeEventListener(e,i,!1),z&&O[e]&&t.removeEventListener(O[e],r,!1),!0}}:C.doc.attachEvent?function(t,e,n,o){var i=function(t){t=t||C.win.event;var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,i=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,r=t.clientX+i,a=t.clientY+e;return t.preventDefault=t.preventDefault||It,t.stopPropagation=t.stopPropagation||Ht,n.call(o,t,r,a)};t.attachEvent("on"+e,i);return function(){return t.detachEvent("on"+e,i),!0}}:void 0,$t=[],Yt=function(e){for(var n,o=e.clientX,i=e.clientY,r=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,a=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,s=$t.length;s--;){if(n=$t[s],z&&e.touches){for(var l,c=e.touches.length;c--;)if((l=e.touches[c]).identifier==n.el._drag.id){o=l.clientX,i=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var u,d=n.el.node,h=d.nextSibling,f=d.parentNode,p=d.style.display;C.win.opera&&f.removeChild(d),d.style.display="none",u=n.el.paper.getElementByPoint(o,i),d.style.display=p,C.win.opera&&(h?f.insertBefore(d,h):f.appendChild(d)),u&&t("raphael.drag.over."+n.el.id,n.el,u),o+=a,i+=r,t("raphael.drag.move."+n.el.id,n.move_scope||n.el,o-n.el._drag.x,i-n.el._drag.y,o,i,e)}},Xt=function n(o){e.unmousemove(Yt).unmouseup(n);for(var i,r=$t.length;r--;)(i=$t[r]).el._drag={},t("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,o);$t=[]},Gt=e.el={},Jt=F.length;Jt--;)!function(t){e[t]=Gt[t]=function(n,o){return e.is(n,"function")&&(this.events=this.events||[],this.events.push({name:t,f:n,unbind:Vt(this.shape||this.node||C.doc,t,n,o||this)})),this},e["un"+t]=Gt["un"+t]=function(n){for(var o=this.events||[],i=o.length;i--;)o[i].name!=t||!e.is(n,"undefined")&&o[i].f!=n||(o[i].unbind(),o.splice(i,1),!o.length&&delete this.events);return this}}(F[Jt]);Gt.data=function(n,o){var i=ct[this.id]=ct[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(e.is(n,"object")){for(var r in n)n[S](r)&&this.data(r,n[r]);return this}return t("raphael.data.get."+this.id,this,i[n],n),i[n]}return i[n]=o,t("raphael.data.set."+this.id,this,o,n),this},Gt.removeData=function(t){return null==t?ct[this.id]={}:ct[this.id]&&delete ct[this.id][t],this},Gt.getData=function(){return n(ct[this.id]||{})},Gt.hover=function(t,e,n,o){return this.mouseover(t,n).mouseout(e,o||n)},Gt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Zt=[];Gt.drag=function(n,o,i,r,a,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,u=l.clientY,d=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,h=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;if(this._drag.id=l.identifier,z&&l.touches)for(var f,p=l.touches.length;p--;)if(f=l.touches[p],this._drag.id=f.identifier,f.identifier==this._drag.id){c=f.clientX,u=f.clientY;break}this._drag.x=c+h,this._drag.y=u+d,!$t.length&&e.mousemove(Yt).mouseup(Xt),$t.push({el:this,move_scope:r,start_scope:a,end_scope:s}),o&&t.on("raphael.drag.start."+this.id,o),n&&t.on("raphael.drag.move."+this.id,n),i&&t.on("raphael.drag.end."+this.id,i),t("raphael.drag.start."+this.id,a||r||this,l.clientX+h,l.clientY+d,l)}return this._drag={},Zt.push({el:this,start:l}),this.mousedown(l),this},Gt.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},Gt.undrag=function(){for(var n=Zt.length;n--;)Zt[n].el==this&&(this.unmousedown(Zt[n].start),Zt.splice(n,1),t.unbind("raphael.drag.*."+this.id));!Zt.length&&e.unmousemove(Yt).unmouseup(Xt),$t=[]},b.circle=function(t,n,o){var i=e._engine.circle(this,t||0,n||0,o||0);return this.__set__&&this.__set__.push(i),i},b.rect=function(t,n,o,i,r){var a=e._engine.rect(this,t||0,n||0,o||0,i||0,r||0);return this.__set__&&this.__set__.push(a),a},b.ellipse=function(t,n,o,i){var r=e._engine.ellipse(this,t||0,n||0,o||0,i||0);return this.__set__&&this.__set__.push(r),r},b.path=function(t){t&&!e.is(t,"string")&&!e.is(t[0],$)&&(t+=L);var n=e._engine.path(e.format[B](e,arguments),this);return this.__set__&&this.__set__.push(n),n},b.image=function(t,n,o,i,r){var a=e._engine.image(this,t||"about:blank",n||0,o||0,i||0,r||0);return this.__set__&&this.__set__.push(a),a},b.text=function(t,n,o){var i=e._engine.text(this,t||0,n||0,N(o));return this.__set__&&this.__set__.push(i),i},b.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var n=new ce(t);return this.__set__&&this.__set__.push(n),n.paper=this,n.type="set",n},b.setStart=function(t){this.__set__=t||this.set()},b.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},b.getSize=function(){var t=this.canvas.parentNode;return{width:t.offsetWidth,height:t.offsetHeight}},b.setSize=function(t,n){return e._engine.setSize.call(this,t,n)},b.setViewBox=function(t,n,o,i,r){return e._engine.setViewBox.call(this,t,n,o,i,r)},b.top=b.bottom=null,b.raphael=e;var Kt=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,o=n.body,i=n.documentElement,r=i.clientTop||o.clientTop||0,a=i.clientLeft||o.clientLeft||0;return{y:e.top+(C.win.pageYOffset||i.scrollTop||o.scrollTop)-r,x:e.left+(C.win.pageXOffset||i.scrollLeft||o.scrollLeft)-a}};b.getElementByPoint=function(t,e){var n=this,o=n.canvas,i=C.doc.elementFromPoint(t,e);if(C.win.opera&&"svg"==i.tagName){var r=Kt(o),a=o.createSVGRect();a.x=t-r.x,a.y=e-r.y,a.width=a.height=1;var s=o.getIntersectionList(a,null);s.length&&(i=s[s.length-1])}if(!i)return null;for(;i.parentNode&&i!=o.parentNode&&!i.raphael;)i=i.parentNode;return i==n.canvas.parentNode&&(i=o),i=i&&i.raphael?n.getById(i.raphaelid):null},b.getElementsByBBox=function(t){var n=this.set();return this.forEach(function(o){e.isBBoxIntersect(o.getBBox(),t)&&n.push(o)}),n},b.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},b.forEach=function(t,e){for(var n=this.bottom;n;){if(!1===t.call(e,n))return this;n=n.next}return this},b.getElementsByPoint=function(t,e){var n=this.set();return this.forEach(function(o){o.isPointInside(t,e)&&n.push(o)}),n},Gt.isPointInside=function(t,n){var o=this.realPath=pt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(o=e.transformPath(o,this.attr("transform"))),e.isPointInsidePath(o,t,n)},Gt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=pt[this.type](this),e.bboxwt=St(this.realPath),e.bboxwt.toString=v,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=pt[this.type](this)),e.bbox=St(vt(this.realPath,this.matrix)),e.bbox.toString=v,e.dirty=e.dirtyT=0),e.bbox)},Gt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Gt.glow=function(t){if("text"==this.type)return null;var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:null==t.opacity?.5:t.opacity,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},n=e.width/2,o=this.paper,i=o.set(),r=this.realPath||pt[this.type](this);r=this.matrix?vt(r,this.matrix):r;for(var a=1;a<n+1;a++)i.push(o.path(r).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*a).toFixed(3),opacity:+(e.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(e.offsetx,e.offsety)};var Qt=function(t,n,o,i,r,a,s,l,d){return null==d?c(t,n,o,i,r,a,s,l):e.findDotsAtSegment(t,n,o,i,r,a,s,l,u(t,n,o,i,r,a,s,l,d))},te=function(t,n){return function(o,i,r){for(var a,s,l,c,u,d="",h={},f=0,p=0,v=(o=Nt(o)).length;p<v;p++){if("M"==(l=o[p])[0])a=+l[1],s=+l[2];else{if(c=Qt(a,s,l[1],l[2],l[3],l[4],l[5],l[6]),f+c>i){if(n&&!h.start){if(u=Qt(a,s,l[1],l[2],l[3],l[4],l[5],l[6],i-f),d+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],r)return d;h.start=d,d=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),f+=c,a=+l[5],s=+l[6];continue}if(!t&&!n)return u=Qt(a,s,l[1],l[2],l[3],l[4],l[5],l[6],i-f),{x:u.x,y:u.y,alpha:u.alpha}}f+=c,a=+l[5],s=+l[6]}d+=l.shift()+l}return h.end=d,(u=t?f:n?h:e.findDotsAtSegment(a,s,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},ee=te(1),ne=te(),oe=te(0,1);e.getTotalLength=ee,e.getPointAtLength=ne,e.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return oe(t,e).end;var o=oe(t,n,1);return e?oe(o,e).end:o},Gt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ee(t)},Gt.getPointAtLength=function(t){var e=this.getPath();if(e)return ne(e,t)},Gt.getPath=function(){var t,n=e._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return n&&(t=n(this)),t},Gt.getSubpath=function(t,n){var o=this.getPath();if(o)return e.getSubpath(o,t,n)};var ie=e.easing_formulas={linear:function(t){return t},"<":function(t){return U(t,1.7)},">":function(t){return U(t,.48)},"<>":function(t){var e=.48-t/1.04,n=R.sqrt(.1734+e*e),o=n-e,i=-n-e,r=U(H(o),1/3)*(o<0?-1:1)+U(H(i),1/3)*(i<0?-1:1)+.5;return 3*(1-r)*r*r+r*r*r},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:U(2,-10*t)*R.sin(2*q*(t-.075)/.3)+1},bounce:function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375}};ie.easeIn=ie["ease-in"]=ie["<"],ie.easeOut=ie["ease-out"]=ie[">"],ie.easeInOut=ie["ease-in-out"]=ie["<>"],ie["back-in"]=ie.backIn,ie["back-out"]=ie.backOut;var re=[],ae=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},se=function n(){for(var o=+new Date,i=0;i<re.length;i++){var r=re[i];if(!r.el.removed&&!r.paused){var a,s,l=o-r.start,c=r.ms,u=r.easing,d=r.from,h=r.diff,f=r.to,p=(r.t,r.el),v={},g={};if(r.initstatus?(l=(r.initstatus*r.anim.top-r.prev)/(r.percent-r.prev)*c,r.status=r.initstatus,delete r.initstatus,r.stop&&re.splice(i--,1)):r.status=(r.prev+(r.percent-r.prev)*(l/c))/r.anim.top,!(l<0))if(l<c){var y=u(l/c);for(var m in d)if(d[S](m)){switch(nt[m]){case V:a=+d[m]+y*c*h[m];break;case"colour":a="rgb("+[le(Z(d[m].r+y*c*h[m].r)),le(Z(d[m].g+y*c*h[m].g)),le(Z(d[m].b+y*c*h[m].b))].join(",")+")";break;case"path":a=[];for(var x=0,b=d[m].length;x<b;x++){a[x]=[d[m][x][0]];for(var w=1,k=d[m][x].length;w<k;w++)a[x][w]=+d[m][x][w]+y*c*h[m][x][w];a[x]=a[x].join(E)}a=a.join(E);break;case"transform":if(h[m].real)for(a=[],x=0,b=d[m].length;x<b;x++)for(a[x]=[d[m][x][0]],w=1,k=d[m][x].length;w<k;w++)a[x][w]=d[m][x][w]+y*c*h[m][x][w];else{var P=function(t){return+d[m][t]+y*c*h[m][t]};a=[["m",P(0),P(1),P(2),P(3),P(4),P(5)]]}break;case"csv":if("clip-rect"==m)for(a=[],x=4;x--;)a[x]=+d[m][x]+y*c*h[m][x];break;default:var C=[][T](d[m]);for(a=[],x=p.paper.customAttributes[m].length;x--;)a[x]=+C[x]+y*c*h[m][x]}v[m]=a}p.attr(v),function(e,n,o){setTimeout(function(){t("raphael.anim.frame."+e,n,o)})}(p.id,p,r.anim)}else{if(function(n,o,i){setTimeout(function(){t("raphael.anim.frame."+o.id,o,i),t("raphael.anim.finish."+o.id,o,i),e.is(n,"function")&&n.call(o)})}(r.callback,p,r.anim),p.attr(f),re.splice(i--,1),r.repeat>1&&!r.next){for(s in f)f[S](s)&&(g[s]=r.totalOrigin[s]);r.el.attr(g),_(r.anim,r.el,r.anim.percents[0],null,r.totalOrigin,r.repeat-1)}r.next&&!r.stop&&_(r.anim,r.el,r.next,null,r.totalOrigin,r.repeat)}}}re.length&&ae(n)},le=function(t){return t>255?255:t<0?0:t};Gt.animateWith=function(t,n,o,i,r,a){var s=this;if(s.removed)return a&&a.call(s),s;var l=o instanceof y?o:e.animation(o,i,r,a);_(l,s,l.percents[0],null,s.attr());for(var c=0,u=re.length;c<u;c++)if(re[c].anim==n&&re[c].el==t){re[u-1].start=re[c].start;break}return s},Gt.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},y.prototype.delay=function(t){var e=new y(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},y.prototype.repeat=function(t){var e=new y(this.anim,this.ms);return e.del=this.del,e.times=R.floor(I(t,0))||1,e},e.animation=function(t,n,o,i){if(t instanceof y)return t;!e.is(o,"function")&&o||(i=i||o||null,o=null),t=Object(t),n=+n||0;var r,a,s={};for(a in t)t[S](a)&&K(a)!=a&&K(a)+"%"!=a&&(r=!0,s[a]=t[a]);if(r)return o&&(s.easing=o),i&&(s.callback=i),new y({100:s},n);if(i){var l=0;for(var c in t){var u=Q(c);t[S](c)&&u>l&&(l=u)}!t[l+="%"].callback&&(t[l].callback=i)}return new y(t,n)},Gt.animate=function(t,n,o,i){var r=this;if(r.removed)return i&&i.call(r),r;var a=t instanceof y?t:e.animation(t,n,o,i);return _(a,r,a.percents[0],null,r.attr()),r},Gt.setTime=function(t,e){return t&&null!=e&&this.status(t,W(e,t.ms)/t.ms),this},Gt.status=function(t,e){var n,o,i=[],r=0;if(null!=e)return _(t,this,-1,W(e,1)),this;for(n=re.length;r<n;r++)if((o=re[r]).el.id==this.id&&(!t||o.anim==t)){if(t)return o.status;i.push({anim:o.anim,status:o.status})}return t?0:i},Gt.pause=function(e){for(var n=0;n<re.length;n++)re[n].el.id!=this.id||e&&re[n].anim!=e||!1!==t("raphael.anim.pause."+this.id,this,re[n].anim)&&(re[n].paused=!0);return this},Gt.resume=function(e){for(var n=0;n<re.length;n++)if(re[n].el.id==this.id&&(!e||re[n].anim==e)){var o=re[n];!1!==t("raphael.anim.resume."+this.id,this,o.anim)&&(delete o.paused,this.status(o.anim,o.status))}return this},Gt.stop=function(e){for(var n=0;n<re.length;n++)re[n].el.id!=this.id||e&&re[n].anim!=e||!1!==t("raphael.anim.stop."+this.id,this,re[n].anim)&&re.splice(n--,1);return this},t.on("raphael.remove",m),t.on("raphael.clear",m),Gt.toString=function(){return"Raphals object"};var ce=function t(e){if(this.items=[],this.length=0,this.type="set",e)for(var n=0,o=e.length;n<o;n++)!e[n]||e[n].constructor!=Gt.constructor&&e[n].constructor!=t||(this[this.items.length]=this.items[this.items.length]=e[n],this.length++)},ue=ce.prototype;ue.push=function(){for(var t,e,n=0,o=arguments.length;n<o;n++)!(t=arguments[n])||t.constructor!=Gt.constructor&&t.constructor!=ce||(this[e=this.items.length]=this.items[e]=t,this.length++);return this},ue.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ue.forEach=function(t,e){for(var n=0,o=this.items.length;n<o;n++)if(!1===t.call(e,this.items[n],n))return this;return this};for(var de in Gt)Gt[S](de)&&(ue[de]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t][B](n,e)})}}(de));return ue.attr=function(t,n){if(t&&e.is(t,$)&&e.is(t[0],"object"))for(var o=0,i=t.length;o<i;o++)this.items[o].attr(t[o]);else for(var r=0,a=this.items.length;r<a;r++)this.items[r].attr(t,n);return this},ue.clear=function(){for(;this.length;)this.pop()},ue.splice=function(t,e,n){t=t<0?I(this.length+t,0):t,e=I(0,W(this.length-t,e));var o,i=[],r=[],a=[];for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<e;o++)r.push(this[t+o]);for(;o<this.length-t;o++)i.push(this[t+o]);var s=a.length;for(o=0;o<s+i.length;o++)this.items[t+o]=this[t+o]=o<s?a[o]:i[o-s];for(o=this.items.length=this.length-=e-s;this[o];)delete this[o++];return new ce(r)},ue.exclude=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return this.splice(e,1),!0},ue.animate=function(t,n,o,i){(e.is(o,"function")||!o)&&(i=o||null);var r,a,s=this.items.length,l=s,c=this;if(!s)return this;i&&(a=function(){!--s&&i.call(c)}),o=e.is(o,"string")?o:a;var u=e.animation(t,n,o,a);for(r=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(r,u,u),this.items[l]&&!this.items[l].removed||s--;return this},ue.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ue.getBBox=function(){for(var t=[],e=[],n=[],o=[],i=this.items.length;i--;)if(!this.items[i].removed){var r=this.items[i].getBBox();t.push(r.x),e.push(r.y),n.push(r.x+r.width),o.push(r.y+r.height)}return t=W[B](0,t),e=W[B](0,e),n=I[B](0,n),o=I[B](0,o),{x:t,y:e,x2:n,y2:o,width:n-t,height:o-e}},ue.clone=function(t){t=this.paper.set();for(var e=0,n=this.items.length;e<n;e++)t.push(this.items[e].clone());return t},ue.toString=function(){return"Raphals set"},ue.glow=function(t){var e=this.paper.set();return this.forEach(function(n,o){var i=n.glow(t);null!=i&&i.forEach(function(t,n){e.push(t)})}),e},ue.isPointInside=function(t,e){var n=!1;return this.forEach(function(o){if(o.isPointInside(t,e))return n=!0,!1}),n},e.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},n=t.face["font-family"];for(var o in t.face)t.face[S](o)&&(e.face[o]=t.face[o]);if(this.fonts[n]?this.fonts[n].push(e):this.fonts[n]=[e],!t.svg){e.face["units-per-em"]=Q(t.face["units-per-em"],10);for(var i in t.glyphs)if(t.glyphs[S](i)){var r=t.glyphs[i];if(e.glyphs[i]={w:r.w,k:{},d:r.d&&"M"+r.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},r.k)for(var a in r.k)r[S](a)&&(e.glyphs[i].k[a]=r.k[a])}}return t},b.getFont=function(t,n,o,i){if(i=i||"normal",o=o||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,e.fonts){var r=e.fonts[t];if(!r){var a=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,L)+"(\\s|$)","i");for(var s in e.fonts)if(e.fonts[S](s)&&a.test(s)){r=e.fonts[s];break}}var l;if(r)for(var c=0,u=r.length;c<u&&((l=r[c]).face["font-weight"]!=n||l.face["font-style"]!=o&&l.face["font-style"]||l.face["font-stretch"]!=i);c++);return l}},b.print=function(t,n,o,i,r,a,s,l){a=a||"middle",s=I(W(s||0,1),-1),l=I(W(l||1,3),1);var c,u=N(o)[D](L),d=0,h=0,f=L;if(e.is(i,"string")&&(i=this.getFont(i)),i){c=(r||16)/i.face["units-per-em"];for(var p=i.face.bbox[D](w),v=+p[0],g=p[3]-p[1],y=0,_=+p[1]+("baseline"==a?g+ +i.face.descent:g/2),m=0,x=u.length;m<x;m++){if("\n"==u[m])d=0,k=0,h=0,y+=g*l;else{var b=h&&i.glyphs[u[m-1]]||{},k=i.glyphs[u[m]];d+=h?(b.w||i.w)+(b.k&&b.k[u[m]]||0)+i.w*s:0,h=1}k&&k.d&&(f+=e.transformPath(k.d,["t",d*c,y*c,"s",c,c,v,_,"t",(t-v)/c,(n-_)/c]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},b.add=function(t){if(e.is(t,"array"))for(var n,o=this.set(),i=0,r=t.length;i<r;i++)n=t[i]||{},k[S](n.type)&&o.push(this[n.type]().attr(n));return o},e.format=function(t,n){var o=e.is(n,$)?[0][T](n):arguments;return t&&e.is(t,"string")&&o.length-1&&(t=t.replace(P,function(t,e){return null==o[++e]?L:o[e]})),t||L},e.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,o){var i=o;return n.replace(e,function(t,e,n,o,r){e=e||o,i&&(e in i&&(i=i[e]),"function"==typeof i&&r&&(i=i()))}),i=(null==i||i==o?t:i)+""};return function(e,o){return String(e).replace(t,function(t,e){return n(t,e,o)})}}(),e.ninja=function(){if(A.was)C.win.Raphael=A.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(t){}}return e},e.st=ue,t.on("raphael.DOMload",function(){x=!0}),function(t,n,o){function i(){/in/.test(t.readyState)?setTimeout(i,9):e.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener("DOMContentLoaded",o=function(){t.removeEventListener("DOMContentLoaded",o,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document),e}.apply(e,i))&&(t.exports=r)},function(e,n){e.exports=t},function(t,e,n){var o,i;o=[n(1)],void 0!==(i=function(t){if(!t||t.svg){var e="hasOwnProperty",n=String,o=parseFloat,i=parseInt,r=Math,a=r.max,s=r.abs,l=r.pow,c=/[, ]+/,u=t.eve,d="",h=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},v={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var g=function o(i,r){if(r){"string"==typeof i&&(i=o(i));for(var a in r)r[e](a)&&("xlink:"==a.substring(0,6)?i.setAttributeNS(f,a.substring(6),n(r[a])):i.setAttribute(a,n(r[a])))}else(i=t._g.doc.createElementNS("http://www.w3.org/2000/svg",i)).style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},y=function(e,i){var c="linear",u=e.id+i,h=.5,f=.5,p=e.node,v=e.paper,y=p.style,_=t._g.doc.getElementById(u);if(!_){if(i=n(i).replace(t._radial_gradient,function(t,e,n){if(c="radial",e&&n){h=o(e);var i=2*((f=o(n))>.5)-1;l(h-.5,2)+l(f-.5,2)>.25&&(f=r.sqrt(.25-l(h-.5,2))*i+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*i)}return d}),i=i.split(/\s*\-\s*/),"linear"==c){var x=i.shift();if(x=-o(x),isNaN(x))return null;var b=[0,0,r.cos(t.rad(x)),r.sin(t.rad(x))],w=1/(a(s(b[2]),s(b[3]))||1);b[2]*=w,b[3]*=w,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var k=t._parseDots(i);if(!k)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&u!=e.gradient.id&&(v.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){_=g(c+"Gradient",{id:u}),e.gradient=_,g(_,"radial"==c?{fx:h,fy:f}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:e.matrix.invert()}),v.defs.appendChild(_);for(var P=0,S=k.length;P<S;P++)_.appendChild(g("stop",{offset:k[P].offset?k[P].offset:P?"100%":"0%","stop-color":k[P].color||"#fff","stop-opacity":isFinite(k[P].opacity)?k[P].opacity:1}))}}return g(p,{fill:m(u),opacity:1,"fill-opacity":1}),y.fill=d,y.opacity=1,y.fillOpacity=1,1},_=function(){var t=document.documentMode;return t&&(9===t||10===t)},m=function(t){if(_())return"url('#"+t+"')";var e=document.location;return"url('"+(e.protocol+"//"+e.host+e.pathname+e.search)+"#"+t+"')"},x=function(t){var e=t.getBBox(1);g(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(o,i,r){if("path"==o.type){for(var a,s,l,c,u,h=n(i).toLowerCase().split("-"),f=o.paper,y=r?"end":"start",_=o.node,m=o.attrs,x=m["stroke-width"],b=h.length,w="classic",k=3,P=3,S=5;b--;)switch(h[b]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=h[b];break;case"wide":P=5;break;case"narrow":P=2;break;case"long":k=5;break;case"short":k=2}if("open"==w?(k+=2,P+=2,S+=2,l=1,c=r?4:1,u={fill:"none",stroke:m.stroke}):(c=l=k/2,u={fill:m.stroke,stroke:"none"}),o._.arrows?r?(o._.arrows.endPath&&v[o._.arrows.endPath]--,o._.arrows.endMarker&&v[o._.arrows.endMarker]--):(o._.arrows.startPath&&v[o._.arrows.startPath]--,o._.arrows.startMarker&&v[o._.arrows.startMarker]--):o._.arrows={},"none"!=w){var C="raphael-marker-"+w,A="raphael-marker-"+y+w+k+P+"-obj"+o.id;t._g.doc.getElementById(C)?v[C]++:(f.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:p[w],id:C})),v[C]=1);var M,B=t._g.doc.getElementById(A);B?(v[A]++,M=B.getElementsByTagName("use")[0]):(B=g(g("marker"),{id:A,markerHeight:P,markerWidth:k,orient:"auto",refX:c,refY:P/2}),M=g(g("use"),{"xlink:href":"#"+C,transform:(r?"rotate(180 "+k/2+" "+P/2+") ":d)+"scale("+k/S+","+P/S+")","stroke-width":(1/((k/S+P/S)/2)).toFixed(4)}),B.appendChild(M),f.defs.appendChild(B),v[A]=1),g(M,u);var T=l*("diamond"!=w&&"oval"!=w);r?(a=o._.arrows.startdx*x||0,s=t.getTotalLength(m.path)-T*x):(a=T*x,s=t.getTotalLength(m.path)-(o._.arrows.enddx*x||0)),(u={})["marker-"+y]="url(#"+A+")",(s||a)&&(u.d=t.getSubpath(m.path,a,s)),g(_,u),o._.arrows[y+"Path"]=C,o._.arrows[y+"Marker"]=A,o._.arrows[y+"dx"]=T,o._.arrows[y+"Type"]=w,o._.arrows[y+"String"]=i}else r?(a=o._.arrows.startdx*x||0,s=t.getTotalLength(m.path)-a):(a=0,s=t.getTotalLength(m.path)-(o._.arrows.enddx*x||0)),o._.arrows[y+"Path"]&&g(_,{d:t.getSubpath(m.path,a,s)}),delete o._.arrows[y+"Path"],delete o._.arrows[y+"Marker"],delete o._.arrows[y+"dx"],delete o._.arrows[y+"Type"],delete o._.arrows[y+"String"];for(u in v)if(v[e](u)&&!v[u]){var z=t._g.doc.getElementById(u);z&&z.parentNode.removeChild(z)}}},w={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},k=function(t,e,o){if(e=w[n(e).toLowerCase()]){for(var i=t.attrs["stroke-width"]||"1",r={round:i,square:i,butt:0}[t.attrs["stroke-linecap"]||o["stroke-linecap"]]||0,a=[],s=e.length;s--;)a[s]=e[s]*i+(s%2?1:-1)*r;g(t.node,{"stroke-dasharray":a.join(",")})}else g(t.node,{"stroke-dasharray":"none"})},P=function(o,r){var l=o.node,u=o.attrs,h=l.style.visibility;l.style.visibility="hidden";for(var p in r)if(r[e](p)){if(!t._availableAttrs[e](p))continue;var v=r[p];switch(u[p]=v,p){case"blur":o.blur(v);break;case"title":var _=l.getElementsByTagName("title");if(_.length&&(_=_[0]))_.firstChild.nodeValue=v;else{_=g("title");var m=t._g.doc.createTextNode(v);_.appendChild(m),l.appendChild(_)}break;case"href":case"target":var w=l.parentNode;if("a"!=w.tagName.toLowerCase()){var P=g("a");w.insertBefore(P,l),P.appendChild(l),w=P}"target"==p?w.setAttributeNS(f,"show","blank"==v?"new":v):w.setAttributeNS(f,p,v);break;case"cursor":l.style.cursor=v;break;case"transform":o.transform(v);break;case"arrow-start":b(o,v);break;case"arrow-end":b(o,v,1);break;case"clip-rect":var C=n(v).split(c);if(4==C.length){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var A=g("clipPath"),M=g("rect");A.id=t.createUUID(),g(M,{x:C[0],y:C[1],width:C[2],height:C[3]}),A.appendChild(M),o.paper.defs.appendChild(A),g(l,{"clip-path":"url(#"+A.id+")"}),o.clip=M}if(!v){var B=l.getAttribute("clip-path");if(B){var T=t._g.doc.getElementById(B.replace(/(^url\(#|\)$)/g,d));T&&T.parentNode.removeChild(T),g(l,{"clip-path":d}),delete o.clip}}break;case"path":"path"==o.type&&(g(l,{d:v?u.path=t._pathToAbsolute(v):"M0,0"}),o._.dirty=1,o._.arrows&&("startString"in o._.arrows&&b(o,o._.arrows.startString),"endString"in o._.arrows&&b(o,o._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,v),o._.dirty=1,!u.fx)break;p="x",v=u.x;case"x":u.fx&&(v=-u.x-(u.width||0));case"rx":if("rx"==p&&"rect"==o.type)break;case"cx":l.setAttribute(p,v),o.pattern&&x(o),o._.dirty=1;break;case"height":if(l.setAttribute(p,v),o._.dirty=1,!u.fy)break;p="y",v=u.y;case"y":u.fy&&(v=-u.y-(u.height||0));case"ry":if("ry"==p&&"rect"==o.type)break;case"cy":l.setAttribute(p,v),o.pattern&&x(o),o._.dirty=1;break;case"r":"rect"==o.type?g(l,{rx:v,ry:v}):l.setAttribute(p,v),o._.dirty=1;break;case"src":"image"==o.type&&l.setAttributeNS(f,"href",v);break;case"stroke-width":1==o._.sx&&1==o._.sy||(v/=a(s(o._.sx),s(o._.sy))||1),l.setAttribute(p,v),u["stroke-dasharray"]&&k(o,u["stroke-dasharray"],r),o._.arrows&&("startString"in o._.arrows&&b(o,o._.arrows.startString),"endString"in o._.arrows&&b(o,o._.arrows.endString,1));break;case"stroke-dasharray":k(o,v,r);break;case"fill":var z=n(v).match(t._ISURL);if(z){A=g("pattern");var L=g("image");A.id=t.createUUID(),g(A,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(L,{x:0,y:0,"xlink:href":z[1]}),A.appendChild(L),function(e){t._preload(z[1],function(){var t=this.offsetWidth,n=this.offsetHeight;g(e,{width:t,height:n}),g(L,{width:t,height:n})})}(A),o.paper.defs.appendChild(A),g(l,{fill:"url(#"+A.id+")"}),o.pattern=A,o.pattern&&x(o);break}var E=t.getRGB(v);if(E.error){if(("circle"==o.type||"ellipse"==o.type||"r"!=n(v).charAt())&&y(o,v)){if("opacity"in u||"fill-opacity"in u){var N=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d));if(N){var D=N.getElementsByTagName("stop");g(D[D.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=v,u.fill="none";break}}else delete r.gradient,delete u.gradient,!t.is(u.opacity,"undefined")&&t.is(r.opacity,"undefined")&&g(l,{opacity:u.opacity}),!t.is(u["fill-opacity"],"undefined")&&t.is(r["fill-opacity"],"undefined")&&g(l,{"fill-opacity":u["fill-opacity"]});E[e]("opacity")&&g(l,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});case"stroke":E=t.getRGB(v),l.setAttribute(p,E.hex),"stroke"==p&&E[e]("opacity")&&g(l,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity}),"stroke"==p&&o._.arrows&&("startString"in o._.arrows&&b(o,o._.arrows.startString),"endString"in o._.arrows&&b(o,o._.arrows.endString,1));break;case"gradient":("circle"==o.type||"ellipse"==o.type||"r"!=n(v).charAt())&&y(o,v);break;case"opacity":u.gradient&&!u[e]("stroke-opacity")&&g(l,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(u.gradient){(N=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d)))&&(D=N.getElementsByTagName("stop"),g(D[D.length-1],{"stop-opacity":v}));break}default:"font-size"==p&&(v=i(v,10)+"px");var F=p.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[F]=v,o._.dirty=1,l.setAttribute(p,v)}}S(o,r),l.style.visibility=h},S=function(o,r){if("text"==o.type&&(r[e]("text")||r[e]("font")||r[e]("font-size")||r[e]("x")||r[e]("y"))){var a=o.attrs,s=o.node,l=s.firstChild?i(t._g.doc.defaultView.getComputedStyle(s.firstChild,d).getPropertyValue("font-size"),10):10;if(r[e]("text")){for(a.text=r.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,u=n(r.text).split("\n"),h=[],f=0,p=u.length;f<p;f++)c=g("tspan"),f&&g(c,{dy:1.2*l,x:a.x}),c.appendChild(t._g.doc.createTextNode(u[f])),s.appendChild(c),h[f]=c}else for(f=0,p=(h=s.getElementsByTagName("tspan")).length;f<p;f++)f?g(h[f],{dy:1.2*l,x:a.x}):g(h[0],{dy:0});g(s,{x:a.x,y:a.y}),o._.dirty=1;var v=o._getBBox(),y=a.y-(v.y+v.height/2);y&&t.is(y,"finite")&&g(h[0],{dy:y})}},C=function(t){return t.parentNode&&"a"===t.parentNode.tagName.toLowerCase()?t.parentNode:t},A=function(e,n){this[0]=this.node=e,e.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},M=t.el;A.prototype=M,M.constructor=A,t._engine.path=function(t,e){var n=g("path");e.canvas&&e.canvas.appendChild(n);var o=new A(n,e);return o.type="path",P(o,{fill:"none",stroke:"#000",path:t}),o},M.rotate=function(t,e,i){if(this.removed)return this;if((t=n(t).split(c)).length-1&&(e=o(t[1]),i=o(t[2])),t=o(t[0]),null==i&&(e=i),null==e||null==i){var r=this.getBBox(1);e=r.x+r.width/2,i=r.y+r.height/2}return this.transform(this._.transform.concat([["r",t,e,i]])),this},M.scale=function(t,e,i,r){if(this.removed)return this;if((t=n(t).split(c)).length-1&&(e=o(t[1]),i=o(t[2]),r=o(t[3])),t=o(t[0]),null==e&&(e=t),null==r&&(i=r),null==i||null==r)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,r=null==r?a.y+a.height/2:r,this.transform(this._.transform.concat([["s",t,e,i,r]])),this},M.translate=function(t,e){return this.removed?this:((t=n(t).split(c)).length-1&&(e=o(t[1])),t=o(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},M.transform=function(n){var o=this._;if(null==n)return o.transform;if(t._extractTransform(this,n),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&x(this),this.node&&g(this.node,{transform:this.matrix}),1!=o.sx||1!=o.sy){var i=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},M.hide=function(){return this.removed||(this.node.style.display="none"),this},M.show=function(){return this.removed||(this.node.style.display=""),this},M.remove=function(){var e=C(this.node);if(!this.removed&&e.parentNode){var n=this.paper;n.__set__&&n.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),t._tear(this,n),e.parentNode.removeChild(e),this.removeData();for(var o in this)this[o]="function"==typeof this[o]?t._removedFactory(o):null;this.removed=!0}},M._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e,n=!1;this.paper.canvas.parentElement?e=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(e=this.paper.canvas.parentNode.style),e&&"none"==e.display&&(n=!0,e.display="");var o={};try{o=this.node.getBBox()}catch(t){o={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{o=o||{},n&&(e.display="none")}return t&&this.hide(),o},M.attr=function(n,o){if(this.removed)return this;if(null==n){var i={};for(var r in this.attrs)this.attrs[e](r)&&(i[r]=this.attrs[r]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==o&&t.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var a=n.split(c),s={},l=0,d=a.length;l<d;l++)(n=a[l])in this.attrs?s[n]=this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=t._availableAttrs[n];return d-1?s:s[a[0]]}if(null==o&&t.is(n,"array")){for(s={},l=0,d=n.length;l<d;l++)s[n[l]]=this.attr(n[l]);return s}if(null!=o){var h={};h[n]=o}else null!=n&&t.is(n,"object")&&(h=n);for(var f in h)u("raphael.attr."+f+"."+this.id,this,h[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&h[e](f)&&t.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(h[f]));this.attrs[f]=h[f];for(var v in p)p[e](v)&&(h[v]=p[v])}return P(this,h),this},M.toFront=function(){if(this.removed)return this;var e=C(this.node);e.parentNode.appendChild(e);var n=this.paper;return n.top!=this&&t._tofront(this,n),this},M.toBack=function(){if(this.removed)return this;var e=C(this.node),n=e.parentNode;n.insertBefore(e,n.firstChild),t._toback(this,this.paper);this.paper;return this},M.insertAfter=function(e){if(this.removed||!e)return this;var n=C(this.node),o=C(e.node||e[e.length-1].node);return o.nextSibling?o.parentNode.insertBefore(n,o.nextSibling):o.parentNode.appendChild(n),t._insertafter(this,e,this.paper),this},M.insertBefore=function(e){if(this.removed||!e)return this;var n=C(this.node),o=C(e.node||e[0].node);return o.parentNode.insertBefore(n,o),t._insertbefore(this,e,this.paper),this},M.blur=function(e){var n=this;if(0!=+e){var o=g("filter"),i=g("feGaussianBlur");n.attrs.blur=e,o.id=t.createUUID(),g(i,{stdDeviation:+e||1.5}),o.appendChild(i),n.paper.defs.appendChild(o),n._blur=o,g(n.node,{filter:"url(#"+o.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},t._engine.circle=function(t,e,n,o){var i=g("circle");t.canvas&&t.canvas.appendChild(i);var r=new A(i,t);return r.attrs={cx:e,cy:n,r:o,fill:"none",stroke:"#000"},r.type="circle",g(i,r.attrs),r},t._engine.rect=function(t,e,n,o,i,r){var a=g("rect");t.canvas&&t.canvas.appendChild(a);var s=new A(a,t);return s.attrs={x:e,y:n,width:o,height:i,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},s.type="rect",g(a,s.attrs),s},t._engine.ellipse=function(t,e,n,o,i){var r=g("ellipse");t.canvas&&t.canvas.appendChild(r);var a=new A(r,t);return a.attrs={cx:e,cy:n,rx:o,ry:i,fill:"none",stroke:"#000"},a.type="ellipse",g(r,a.attrs),a},t._engine.image=function(t,e,n,o,i,r){var a=g("image");g(a,{x:n,y:o,width:i,height:r,preserveAspectRatio:"none"}),a.setAttributeNS(f,"href",e),t.canvas&&t.canvas.appendChild(a);var s=new A(a,t);return s.attrs={x:n,y:o,width:i,height:r,src:e},s.type="image",s},t._engine.text=function(e,n,o,i){var r=g("text");e.canvas&&e.canvas.appendChild(r);var a=new A(r,e);return a.attrs={x:n,y:o,"text-anchor":"middle",text:i,"font-family":t._availableAttrs["font-family"],"font-size":t._availableAttrs["font-size"],stroke:"none",fill:"#000"},a.type="text",P(a,a.attrs),a},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e&&e.container,o=e.x,i=e.y,r=e.width,a=e.height;if(!n)throw new Error("SVG container not found.");var s,l=g("svg"),c="overflow:hidden;";return o=o||0,i=i||0,r=r||512,a=a||342,g(l,{height:a,version:1.1,width:r,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==n?(l.style.cssText=c+"position:absolute;left:"+o+"px;top:"+i+"px",t._g.doc.body.appendChild(l),s=1):(l.style.cssText=c+"position:relative",n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l)),n=new t._Paper,n.width=r,n.height=a,n.canvas=l,n.clear(),n._left=n._top=0,s&&(n.renderfix=function(){}),n.renderfix(),n},t._engine.setViewBox=function(t,e,n,o,i){u("raphael.setViewBox",this,this._viewBox,[t,e,n,o,i]);var r,s,l=this.getSize(),c=a(n/l.width,o/l.height),d=this.top,f=i?"xMidYMid meet":"xMinYMin";for(null==t?(this._vbSize&&(c=1),delete this._vbSize,r="0 0 "+this.width+h+this.height):(this._vbSize=c,r=t+h+e+h+n+h+o),g(this.canvas,{viewBox:r,preserveAspectRatio:f});c&&d;)s="stroke-width"in d.attrs?d.attrs["stroke-width"]:1,d.attr({"stroke-width":s}),d._.dirty=1,d._.dirtyT=1,d=d.prev;return this._viewBox=[t,e,n,o,!!i],this},t.prototype.renderfix=function(){var t,e=this.canvas,n=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(n){t=e.createSVGMatrix()}var o=-t.e%1,i=-t.f%1;(o||i)&&(o&&(this._left=(this._left+o)%1,n.left=this._left+"px"),i&&(this._top=(this._top+i)%1,n.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(t._g.doc.createTextNode("Created with Raphal "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=g("defs"))},t.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var B=t.st;for(var T in M)M[e](T)&&!B[e](T)&&(B[T]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(T))}}.apply(e,o))&&(t.exports=i)}])})},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t){t.fn.handle=function(t,o){return this.path(n.handle+e)},t.fn.editor=function(t,o){return this.path(n.editor+e)},t.fn.deleter=function(t,o){return this.path(n.deleter+e)},t.fn.searcher=function(t,o){return this.path(n.searcher+e)},t.fn.plus=function(t,o){return this.path(n.plus+e)},t.fn.link=function(t,o){return this.path(n.link+e)},t.fn.up=function(t,e){return this.path(n.up)},t.fn.down=function(t,e){return this.path(n.up).transform("r180")},t.fn.setting=function(t,o){return this.path(n.settings+e).transform("s,.9,.9")},t.fn.arrow=function(){return this.path(n.arrow+e)},t.fn.arrowHead=function(){return this.path(n.arrowHead).attr({fill:"#648CB2"}).transform("s0.7")},t.fn.linkArrow=function(){return this.path(n.arrow+e).attr({fill:"#648CB2"})},t.fn.lockClosed=function(){return this.path(n.lockClosed)},t.fn.lockOpen=function(){return this.path(n.lockOpen)},t.fn.stopSign=function(t,e){var o=this.set(),i=Raphael.transformPath(n.stopSign,["T",t,",",e,",s2,2"].join(""));return o.push(this.path(i).attr({"stroke:":"#fff",fill:"red"})),o.push(this.text(t+52,e+37,"STOP").attr({"font-size":"40pt","fill:":"#fff","font-family":"Trebuchet MS"})),o.push(this.text(t+47,e+88,"There are no\nmore results").attr({"font-size":"16pt","fill:":"#fff","font-family":"Trebuchet MS"})),o},t.fn.loadMore=function(t,e){var o=this.set(),i="M "+t+", "+e+" h180 a15,15 0 0 1 15,15 v180 a15,15 0 0 1 -15,15 h-180 a15,15 0 0 1 -15,-15 v-180 a15,15 0 0 1 15,-15 z";return o.push(this.path(i).attr({fill:"#ddd",stroke:"#000","stroke-width":3})),o.push(this.path(n.searcher).transform(["T",t,",",e,"s2.5,2.5"].join("")).attr({fill:"#fff",stroke:"#000","stroke-width":3})),o.push(this.text(t+10,e+10,"Load More...").attr({"font-size":14})),o},t.fn.speechbubble=function(t,e,o){var i=this.set();return i.push(this.path(n.speechbubble).transform(["t",t,",",e].join()).scale(6,4).scale(-1,1)).attr({fill:"#fff",stroke:"#000","stroke-width":3}),i.push(this.text(t+10,e+10,o).attr({"font-size":12})),i},t.fn.undo=function(t){return this.path(n.undo)},t.fn.redo=function(t){return this.path(n.undo).transform("s-1,1")},t.fn.resize=function(t){return this.image(t,0,0,22,23)},t.fn.slider=function(t,e,i,r,a,s,l,c,u,d,h){h=h||1;var f=this.set();f.push(this.rect(c||10,u||10,10,t,5).attr({fill:"#ccc",stroke:"#333","stroke-width":2}));var p=this.path(n.sliderHandle).transform(["t",c-10||0,",",u||0,"r270"].join(""));p.attr({fill:"#eee",stroke:"#ccc"}),f.push(p);var v,g,y,_=0;f.setValue=function(e){var n=e*t/i+(u||0);f[1].transform(["t",c-10||0,",",n,"r270"].join()),v=f[1].attr("x")+(c-10||0),g=f[1].attr("y")+(u||0),y=n,_=u||0},f.setValue(r);return f[1].drag(function(n,r){n+=n/h-n,(r=y+(r+=r/h-r))<0&&(r=0),r>t+(u||0)-15&&(r=t+(u||0)-15),r<(u||0)-15&&(r=u-15),_=r,f[1].transform(["t",v,",",r,"r270"].join());var s=(r-g)*i/t+e;o.default.isFunction(a)&&a.apply(this,[s])},function(t,e){o.default.isFunction(l)&&l.apply(this)},function(){var n=(y=_-g)*i/t+e;o.default.isFunction(a)&&a.apply(this,[n]),o.default.isFunction(s)&&s.apply(this,[n])}),f};var e="M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z",n={handle:"M26.33,15.836l-3.893-1.545l3.136-7.9c0.28-0.705-0.064-1.505-0.771-1.785c-0.707-0.28-1.506,0.065-1.785,0.771l-3.136,7.9l-4.88-1.937l3.135-7.9c0.281-0.706-0.064-1.506-0.77-1.786c-0.706-0.279-1.506,0.065-1.785,0.771l-3.136,7.9L8.554,8.781l-1.614,4.066l2.15,0.854l-2.537,6.391c-0.61,1.54,0.143,3.283,1.683,3.895l1.626,0.646L8.985,26.84c-0.407,1.025,0.095,2.188,1.122,2.596l0.93,0.369c1.026,0.408,2.188-0.095,2.596-1.121l0.877-2.207l1.858,0.737c1.54,0.611,3.284-0.142,3.896-1.682l2.535-6.391l1.918,0.761L26.33,15.836z",editor:"M25.31,2.872l-3.384-2.127c-0.854-0.536-1.979-0.278-2.517,0.576l-1.334,2.123l6.474,4.066l1.335-2.122C26.42,4.533,26.164,3.407,25.31,2.872zM6.555,21.786l6.474,4.066L23.581,9.054l-6.477-4.067L6.555,21.786zM5.566,26.952l-0.143,3.819l3.379-1.787l3.14-1.658l-6.246-3.925L5.566,26.952z",deleter:"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z",searcher:"M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z",up:"M1.67892,15.48059l23.55337,0l-11.37616,-13.92457l-12.17721,13.92457z",arrow:"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM13.665,25.725l-3.536-3.539l6.187-6.187l-6.187-6.187l3.536-3.536l9.724,9.723L13.665,25.725z",settings:"M16.015,12.03c-2.156,0-3.903,1.747-3.903,3.903c0,2.155,1.747,3.903,3.903,3.903c0.494,0,0.962-0.102,1.397-0.27l0.836,1.285l1.359-0.885l-0.831-1.276c0.705-0.706,1.142-1.681,1.142-2.757C19.918,13.777,18.171,12.03,16.015,12.03zM16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM26.174,20.809c-0.241,0.504-0.513,0.99-0.826,1.45L22.19,21.58c-0.481,0.526-1.029,0.994-1.634,1.385l0.119,3.202c-0.507,0.23-1.028,0.421-1.569,0.57l-1.955-2.514c-0.372,0.051-0.75,0.086-1.136,0.086c-0.356,0-0.706-0.029-1.051-0.074l-1.945,2.5c-0.541-0.151-1.065-0.342-1.57-0.569l0.117-3.146c-0.634-0.398-1.208-0.88-1.712-1.427L6.78,22.251c-0.313-0.456-0.583-0.944-0.826-1.448l2.088-2.309c-0.226-0.703-0.354-1.451-0.385-2.223l-2.768-1.464c0.055-0.563,0.165-1.107,0.301-1.643l3.084-0.427c0.29-0.702,0.675-1.352,1.135-1.942L8.227,7.894c0.399-0.389,0.83-0.744,1.283-1.07l2.663,1.672c0.65-0.337,1.349-0.593,2.085-0.75l0.968-3.001c0.278-0.021,0.555-0.042,0.837-0.042c0.282,0,0.56,0.022,0.837,0.042l0.976,3.028c0.72,0.163,1.401,0.416,2.036,0.75l2.704-1.697c0.455,0.326,0.887,0.681,1.285,1.07l-1.216,2.986c0.428,0.564,0.793,1.181,1.068,1.845l3.185,0.441c0.135,0.535,0.247,1.081,0.302,1.643l-2.867,1.516c-0.034,0.726-0.15,1.43-0.355,2.1L26.174,20.809z",sliderHandle:"M16,3.5c-4.142,0-7.5,3.358-7.5,7.5c0,4.143,7.5,18.121,7.5,18.121S23.5,15.143,23.5,11C23.5,6.858,20.143,3.5,16,3.5z M16,14.584z",speechbubble:"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z",resizeMarker:"M -0.124,19.563999 19.440001,0M 3.891,20.542999 20.047001,4.3850002M 8.8249998,20.936001 20.936001,8.8249998",link:"M15.667,4.601c-1.684,1.685-2.34,3.985-2.025,6.173l3.122-3.122c0.004-0.005,0.014-0.008,0.016-0.012c0.21-0.403,0.464-0.789,0.802-1.126c1.774-1.776,4.651-1.775,6.428,0c1.775,1.773,1.777,4.652,0.002,6.429c-0.34,0.34-0.727,0.593-1.131,0.804c-0.004,0.002-0.006,0.006-0.01,0.01l-3.123,3.123c2.188,0.316,4.492-0.34,6.176-2.023c2.832-2.832,2.83-7.423,0-10.255C23.09,1.77,18.499,1.77,15.667,4.601zM14.557,22.067c-0.209,0.405-0.462,0.791-0.801,1.131c-1.775,1.774-4.656,1.774-6.431,0c-1.775-1.774-1.775-4.653,0-6.43c0.339-0.338,0.725-0.591,1.128-0.8c0.004-0.006,0.005-0.012,0.011-0.016l3.121-3.123c-2.187-0.316-4.489,0.342-6.172,2.024c-2.831,2.831-2.83,7.423,0,10.255c2.833,2.831,7.424,2.831,10.257,0c1.684-1.684,2.342-3.986,2.023-6.175l-3.125,3.123C14.565,22.063,14.561,22.065,14.557,22.067zM9.441,18.885l2.197,2.197c0.537,0.537,1.417,0.537,1.953,0l8.302-8.302c0.539-0.536,0.539-1.417,0.002-1.952l-2.199-2.197c-0.536-0.539-1.416-0.539-1.952-0.002l-8.302,8.303C8.904,17.469,8.904,18.349,9.441,18.885z",resizeMarker2:"M22.5,8.5v3.168l3.832,3.832L22.5,19.332V22.5l7-7L22.5,8.5zM8.5,22.5v-3.168L4.667,15.5L8.5,11.668V8.5l-7,7L8.5,22.5zM15.5,14.101c-0.928,0-1.68,0.751-1.68,1.68c0,0.927,0.752,1.681,1.68,1.681c0.927,0,1.68-0.754,1.68-1.681C17.18,14.852,16.427,14.101,15.5,14.101zM10.46,14.101c-0.928,0-1.68,0.751-1.68,1.68c0,0.927,0.752,1.681,1.68,1.681s1.68-0.754,1.68-1.681C12.14,14.852,11.388,14.101,10.46,14.101zM20.541,14.101c-0.928,0-1.682,0.751-1.682,1.68c0,0.927,0.754,1.681,1.682,1.681s1.68-0.754,1.68-1.681C22.221,14.852,21.469,14.101,20.541,14.101z",plus:"M25.979,12.896 19.312,12.896 19.312,6.229 12.647,6.229 12.647,12.896 5.979,12.896 5.979,19.562 12.647,19.562 12.647,26.229 19.312,26.229 19.312,19.562 25.979,19.562z",arrowHead:"M15.834,29.084 15.834,16.166 2.917,16.166 29.083,2.917z",undo:"M12.981,9.073V6.817l-12.106,6.99l12.106,6.99v-2.422c3.285-0.002,9.052,0.28,9.052,2.269c0,2.78-6.023,4.263-6.023,4.263v2.132c0,0,13.53,0.463,13.53-9.823C29.54,9.134,17.952,8.831,12.981,9.073z",lockClosed:"M24.875,15.334v-4.876c0-4.894-3.981-8.875-8.875-8.875s-8.875,3.981-8.875,8.875v4.876H5.042v15.083h21.916V15.334H24.875zM10.625,10.458c0-2.964,2.411-5.375,5.375-5.375s5.375,2.411,5.375,5.375v4.876h-10.75V10.458zM18.272,26.956h-4.545l1.222-3.667c-0.782-0.389-1.324-1.188-1.324-2.119c0-1.312,1.063-2.375,2.375-2.375s2.375,1.062,2.375,2.375c0,0.932-0.542,1.73-1.324,2.119L18.272,26.956z",lockOpen:"M24.875,15.334v-4.876c0-4.894-3.981-8.875-8.875-8.875s-8.875,3.981-8.875,8.875v0.375h3.5v-0.375c0-2.964,2.411-5.375,5.375-5.375s5.375,2.411,5.375,5.375v4.876H5.042v15.083h21.916V15.334H24.875zM18.272,26.956h-4.545l1.222-3.667c-0.782-0.389-1.324-1.188-1.324-2.119c0-1.312,1.063-2.375,2.375-2.375s2.375,1.062,2.375,2.375c0,0.932-0.542,1.73-1.324,2.119L18.272,26.956z",stopSign:"M69.527,2H29.971L2,29.971v39.558L29.971,97.5h39.558L97.5,69.527V29.972L69.527,2z M95.625,68.898L68.898,95.625H31.101  L4.375,68.898V31.516v-0.414L31.102,4.375h37.796l26.728,26.727L95.625,68.898L95.625,68.898z M68.07,6.375H31.93L6.375,31.93v36.142L31.93,93.626h36.142L93.625,68.07V31.93L68.07,6.375z"}}(Raphael)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));Raphael.fn.connection=function(t){function e(t,e){function n(t){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o}for(var o,i,r,a,s=t.getTotalLength(),l=64,c=1/0,u=0;u<=s;u+=l)(a=n(r=t.getPointAtLength(u)))<c&&(o=r,i=u,c=a);for(l/=2;l>.5;){var d,h,f,p,v,g;(f=i-l)>=0&&(v=n(d=t.getPointAtLength(f)))<c?(o=d,i=f,c=v):(p=i+l)<=s&&(g=n(h=t.getPointAtLength(p)))<c?(o=h,i=p,c=g):l/=2}return{bestPoint:o,bestLength:i}}function n(t,e){var n=t.x,o=t.y,i=e.x,r=e.y,a=(n+i)/2;return["M",n,o,"C",a,o,a,r,i,r].join(" ")}function i(t,e){var n=o.default.find(t.relationships.associations,function(t){return t.child.options.id===e||t.parent.options.id===e});return n&&n.parent.options.id===e}function r(t,e){return o.default.find(t.relationships.associations,function(t){return t.child.options.id===e||t.parent.options.id===e})||!1}function a(t){return!isNaN(parseFloat(t))&&isFinite(t)}function s(){var t,e=l.parent.vect.getBBox(),n=l.child.vect.getBBox(),o=(a(e.x)&&e.x,a(e.cx)&&e.cx),i=(a(e.y)&&e.y,a(e.cy)&&e.cy),r=(a(n.x)&&n.x,a(n.cx)&&n.cx),s=(a(n.y)&&n.y,a(n.cy)&&n.cy),c=e.x,u=e.y,d=e.x2,h=e.y,f=e.x2,p=e.y2,v=e.x,g=e.y2;t=s>=(p-u)/(f-c)*(r-c)+u?s>=(h-g)/(d-v)*(r-v)+g?{x:o,y:p}:{x:c,y:i}:s>=(h-g)/(d-v)*(r-v)+g?{x:d,y:i}:{x:o,y:u};var y,_=n.x,m=n.y,x=n.x2,b=n.y,w=n.x2,k=n.y2,P=n.x,S=n.y2;return y=i>=(k-m)/(w-_)*(o-_)+m?i>=(b-S)/(x-P)*(o-P)+S?{x:r,y:k}:{x:_,y:s}:i>=(b-S)/(x-P)*(o-P)+S?{x:x,y:s}:{x:r,y:m},{child:y,parent:t}}var l={sb:Slatebox,parent:null,child:null,lineColor:"#fff",lineOpacity:1,lineWidth:20,blnStraight:!1,showParentArrow:!1,showChildArrow:!1,isAnimating:!1};o.default.extend(l,t),this.removeConnection=function(t){t.line.remove()};var c=function(){var t,a,c,u,d,h,f,p=["parent","child"];if(l.isShift&&l.isAlt&&l.activeNode===l.child.options.id){t=l.child,a=l.parent;var v=s(),g=void 0;t.options.rotate.rotationAngle&&(g=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:0,dy:0}));var y=void 0;a.options.rotate.rotationAngle&&(y=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:0,dy:0})),c=(h=e(y||a.vect,v.child)).bestPoint,d=(u=e(g||t.vect,c)).bestPoint,l.child.relationships.updateSingleAssociationWith({id:l.id},{parentPointLength:h.bestLength,childPointLength:u.bestLength}),g&&g.remove(),y&&y.remove()}else if(l.isShift&&!l.isAlt&&(l.activeNode===l.parent.options.id||l.activeNode===l.child.options.id)||o.default.isUndefined(l.parentPointLength)||o.default.isUndefined(l.childPointLength)||!l.isShift&&!l.isAlt&&l.activeNode!==l.parent.options.id&&l.activeNode!==l.child.options.id){if(!l.activeNode||l.activeNode!==l.parent.options.id&&l.activeNode!==l.child.options.id){var _=r(l.child,l.activeNode);!l.childHasMultipleParents||_&&_.parent.options.id===l.child.options.id?(t=l.parent,a=l.child):(t=l.child,a=l.parent)}else o.default.each(p,function(e){l[e].options.id===l.activeNode?t=l[e]:a=l[e]});var m=s();if(l.activeNode&&l.activeNode!==l.child.options.id&&l.activeNode!==l.parent.options.id&&i(a,l.activeNode))d=(u=e(f=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:l.currentDx,dy:l.currentDy}),m.parent)).bestPoint,f.remove();else{var x=void 0;a.options.rotate.rotationAngle&&(x=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:0,dy:0})),d=(u=e(x||a.vect,t.options.id===l.parent.options.id?m.parent:m.child)).bestPoint,x&&x.remove()}c=(h=e(f=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:l.currentDx,dy:l.currentDy}),d)).bestPoint,l.childHasMultipleParents?(l.childPointLength=h.bestLength,l.parentPointLength=u.bestLength):(l.childPointLength=u.bestLength,l.parentPointLength=h.bestLength),l.child.options.id===a.options.id?l.child.relationships.updateSingleAssociationWith({id:l.id},{childPointLength:u.bestLength,parentPointLength:h.bestLength}):l.child.relationships.updateSingleAssociationWith({id:l.id},{childPointLength:h.bestLength,parentPointLength:u.bestLength})}else if(l.isShift&&l.isAlt)if(t=l.parent,a=l.child,l.activeNode===l.parent.options.id){if(l.isUp&&(l.childHasMultipleParents||l.childPositionSaved)){var b=void 0;t.options.rotate.rotationAngle&&(b=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:0,dy:0}));var w=void 0;a.options.rotate.rotationAngle&&(w=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:0,dy:0}));var k=s();c=(h=e(b||t.vect,k.child)).bestPoint,l.parentPointLength=h.bestLength,d=(u=e(w||a.vect,k.parent)).bestPoint,l.childPointLength=u.bestLength,b&&b.remove(),w&&w.remove()}else{var P=a.rotateMoveVector({dx:l.currentDx,dy:l.currentDy}),S={action:"translate",dx:P.dx,dy:P.dy},C=a.getTransformString(S);a.vect.transform(C),c=(f=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:l.currentDx,dy:l.currentDy})).getPointAtLength(l.parentPointLength),f.remove();var A=(f=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:l.currentDx,dy:l.currentDy})).getBBox();l.child.setPosition({x:A.x,y:A.y},!1,l.activeNode,{transformString:l.child.vect.transform()}),d=f.getPointAtLength(l.childPointLength)}l.isUp||a.relationships.syncAssociations(a,function(t,e){t.relationships.updateAssociationsWith({activeNode:e.activeNode,currentDx:l.currentDx,currentDy:l.currentDy}),t.relationships.refresh()})}else{if(!l.isUp||!l.childHasMultipleParents&&!l.childPositionSaved){var M=a.rotateMoveVector({dx:l.currentDx,dy:l.currentDy}),B={action:"translate",dx:M.dx,dy:M.dy},T=a.getTransformString(B);a.vect.transform(T)}if(l.childHasMultipleParents||l.childPositionSaved){var z=s(),L=void 0;t.options.rotate.rotationAngle&&(L=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:0,dy:0}));var E=void 0;a.options.rotate.rotationAngle&&(E=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:0,dy:0})),d=(u=e(E||a.vect,z.parent)).bestPoint,l.childPointLength=u.bestLength,c=(h=e(L||t.vect,d)).bestPoint,l.parentPointLength=h.bestLength,L&&L.remove(),E&&E.remove(),l.child.options.id===a.options.id?l.child.relationships.updateSingleAssociationWith({id:l.id},{childPointLength:u.bestLength,parentPointLength:h.bestLength}):l.child.relationships.updateSingleAssociationWith({id:l.id},{childPointLength:h.bestLength,parentPointLength:u.bestLength})}else{f=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:0,dy:0});var N=s();c=(h=e(f||t.vect,N.child)).bestPoint,l.parentPointLength=h.bestLength,f.remove();var D=(f=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:l.currentDx,dy:l.currentDy})).getBBox();l.child.setPosition({x:D.x,y:D.y},!1,l.activeNode,{transformString:l.child.vect.transform()}),d=(u=e(f||a.vect,N.parent)).bestPoint,l.childPointLength=u.bestLength}}else if(t=l.parent,a=l.child,l.child.options.id===l.activeNode){var F=s(),O=void 0;l.parent.options.rotate.rotationAngle&&(O=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:0,dy:0})),c=(h=e(O||t.vect,F.child)).bestPoint,l.parentPointLength=h.bestLength,O&&O.remove(),d=(u=e(f=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:l.currentDx,dy:l.currentDy}),c)).bestPoint,l.childPointLength=u.bestLength,l.child.relationships.updateSingleAssociationWith({id:l.id},{childPointLength:u.bestLength,parentPointLength:h.bestLength})}else if(l.parent.options.id===l.activeNode){if(f=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:l.currentDx,dy:l.currentDy}),l.action,c=(h=e(f,s().child)).bestPoint,l.parentPointLength=h.bestLength,f.remove(),!l.isUp||!l.childHasMultipleParents)if(l.isAnimating)l.childIsBeingAnimated||(a.vect.animate({transform:"T"+l.currentDx+","+l.currentDy},Meteor.collabAnimationDuration||300,">",function(){l.child.relationships.updateSingleAssociationWith({id:l.id},{childIsBeingAnimated:!1})}),l.child.relationships.updateSingleAssociationWith({id:l.id},{childIsBeingAnimated:!0}));else{var j=a.rotateMoveVector({dx:l.currentDx,dy:l.currentDy}),R={action:"translate",dx:j.dx,dy:j.dy},I=a.getTransformString(R);a.vect.transform(I)}var W=(f=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:l.currentDx,dy:l.currentDy})).getBBox();l.child.setPosition({x:W.x,y:W.y},!1,l.activeNode,{transformString:l.child.vect.transform()}),d=f.getPointAtLength(l.childPointLength)}else{var H,U,q=r(l.child,l.activeNode);!l.childHasMultipleParents||q&&q.parent.options.id===l.child.options.id||(t=l.child,a=l.parent,H=l.parentPointLength,U=l.childPointLength),l.parent.options.id===a.options.id&&i(a,l.activeNode)?(d=(f=a.getTempPathWithCorrectPositionFor({pathElement:a.vect,dx:l.currentDx,dy:l.currentDy})).getPointAtLength(H||l.childPointLength),f.remove()):d=a.vect.getPointAtLength(o.default.isUndefined(H)?l.childPointLength:H),c=(f=t.getTempPathWithCorrectPositionFor({pathElement:t.vect,dx:l.currentDx,dy:l.currentDy})).getPointAtLength(o.default.isUndefined(U)?l.parentPointLength:U)}return f&&f.remove(),{path:n(c,d)}}(),u={stroke:l.lineColor,fill:"none","stroke-width":l.lineWidth,"fill-opacity":l.lineOpacity,opacity:l.lineOpacity};if((!l.isAlt||!l.isShift||l.isAlt&&l.isShift&&l.isUp)&&(u.path=c.path),l.showChildArrow?o.default.extend(u,{"arrow-end":"classic"}):o.default.extend(u,{"arrow-end":"none"}),l.showParentArrow?o.default.extend(u,{"arrow-start":"classic"}):o.default.extend(u,{"arrow-start":"none"}),void 0===l.line)o.default.extend(l,{line:this.path(c.path).attr(u)});else if(!l.isAlt||!l.isShift||l.isAlt&&l.isShift&&l.isUp)if(l.isAnimating)l.isBeingAnimated||(l.parent.relationships.updateSingleAssociationWith({id:l.id},{isBeingAnimated:!0}),l.line.animate({path:u.path},Meteor.collabAnimationDuration||300,">",function(){l.parent.relationships.updateSingleAssociationWith({id:l.id},{isBeingAnimated:!1,isAnimating:!1})}));else{l.line.remove();var d=l.child.slate.paper.path(c.path).attr(u);l.child.relationships.updateSingleAssociationWith({id:l.id},{line:d})}return l.line&&l.line.toBack(),l}},function(t,e,n){"use strict";Raphael.el.tooltip=function(t,e,n){void 0===e&&(e=80),void 0===n&&(n=20);var o=this.paper.set(),i=this.getBBox();if("text"===t.type)o.push(this.paper.rect(i.x,i.y+-1*n-10,e,n,5).attr({fill:"#fff"})),o.push(this.paper.text(i.x+5,i.y-20,"").attr({"text-anchor":"start",stroke:"#fff","font-size":13,fill:"#fff"}));else{var r=-1*e-5;o.push(this.paper.rect(i.x+r,i.y+n/2*-1,e,n,15).attr({"stroke-width":2,stroke:"#fff","z-index":9999})),o.push(this.paper.rect(i.x+r,i.y+(n/2-45),e,47,15)).attr({"stroke-width":2,fill:"90-#333-#000","z-index":9999}),o.push(this.paper.text(i.x+r+e/2,i.y+(n/2-20),"").attr({"text-anchor":"middle",stroke:"#fff","font-weight":"normal","font-family":"Verdana","font-size":11,"z-index":999}))}var a=this;return a.removed||(a.tt=o,"text"===t.type?a.tt[0].animate({stroke:"#000",fill:"#333"},200,function(){a.tt[1].attr({text:t.msg})}):a.tt[0].animate({stroke:"#000",fill:"#333"},200,function(){a.tt[2].attr({text:t.msg})})),a.tt},Raphael.el.untooltip=function(){return this.tt&&this.tt.remove(),this}},function(t,e,n){"use strict";Raphael.el.button=function(){return this.attr({fill:"90-#000-#eee"})},Raphael.el.redbutton=function(){return this.attr({fill:"90-#990000-#eee"})},Raphael.el.buttonText=function(){return this.standard().attr({fill:"#fff"})},Raphael.el.activeColor="#fffc51",Raphael.el.active=function(t,e){var n={"stroke-width":2,stroke:this.activeColor};return t?void 0===e?this.animate(n,200):this.animate(n,100,e):this.attr(n)},Raphael.el.isDisabled=function(){return"text"===this.type?"#eee"===this.attr("fill"):"#ccc"===this.attr("fill")},Raphael.el.disabled=function(t,e){var n={fill:"#ccc",stroke:"eee"},o={fill:"#eee"};return"text"===this.type?this.attr(o):this.attr(n)},Raphael.el.enabled=function(t,e){return"text"===this.type?this.buttonText():this.button()},Raphael.el.inactive=function(t,e){var n={"stroke-width":1,stroke:"#000"};return t?void 0===e?this.animate(n,200):this.animate(n,100,e):this.attr(n)},Raphael.el.standard=function(){return this.attr({"font-family":"Trebuchet MS","font-size":"13pt"})}},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));Slatebox,Raphael.el.loop=function(t){function e(){i.animate(n.pkg[0],n.duration,function(){i.animate(n.pkg[1],n.duration,function(){n.repeat&&e()})})}var n={pkg:[{"stroke-width":3},{"stroke-width":1}],duration:200,repeat:!1};o.default.extend(n,t);var i=this;return e(),this}},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));Slatebox,Raphael.st.button=function(t){var e={mousedown:null,mouseover:null,node:{}};o.default.extend(e,t);var n=this,i=[];n.emd=function(t){o.default.invoke(i,"remove"),e.mousedown.apply(this,[t,e.node])},n.emo=function(t){e.mouseover.apply(this,[t,e.node])},n.forEach(function(t){t.node.style.cursor="pointer",null!==e.mousedown&&t.mousedown(n.emd),null!==e.mouseover&&t.mouseover(n.emo)}),n.gl=function(t){i.push(this.glow())},n.eg=function(t){o.default.invoke(i,"remove")},n.kg=function(t){o.default.invoke(i,"remove"),i.push(t.glow())};var r=this[0];return n.tmover=function(t){n.kg(r)},n.tmout=function(t){o.default.invoke(i,"remove")},n[0].mouseover(n.gl),n[0].mouseout(n.eg),n[1].mouseover(n.tmover),n[1].mouseout(n.tmout),n},Slatebox,Raphael.st.unbutton=function(){var t=this;return t.forEach(function(e){e.unmousedown(t.emd),e.unmouseover(t.emo)}),t[0].unmouseover(t.gl),t[0].unmouseout(t.eg),t[1].unmouseover(t.tmover),t[1].unmouseout(t.tmout),t}},function(t,e,n){"use strict";!function(t,e){function n(t,e,n){return parseFloat(t+(e-t)*n).toFixed(3)}function o(t,e,n){return t.substr(e,n||1)}function i(t,e,n){for(var i,r,a,s=2,l=[],c=[];i=3,r=arguments[s-1],s--;)if("r"==o(r,0))for(r=r.match(/\d+/g);i--;)l.push(~~r[i]);else for(4==r.length&&(r="#"+o(r,1)+o(r,1)+o(r,2)+o(r,2)+o(r,3)+o(r,3));i--;)l.push(parseInt(o(r,1+2*i,2),16));for(;i--;)a=~~(l[i+3]+(l[i]-l[i+3])*n),c.push(a<0?0:a>255?255:a);return"rgb("+c.join(",")+")"}function r(t){var e=parseFloat(t),o=t.replace(/^[\-\d\.]+/,"");return isNaN(e)?{v:o,f:i,u:""}:{v:e,f:n,u:o}}function a(t){var e,n,o={},i=l.length;for(s.innerHTML='<div style="'+t+'"></div>',e=s.childNodes[0].style;i--;)(n=e[l[i]])&&(o[l[i]]=r(n));return o}var s=document.createElement("div"),l="backgroundColor borderBottomColor borderBottomWidth borderLeftColor borderLeftWidth borderRightColor borderRightWidth borderSpacing borderTopColor borderTopWidth bottom color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" ");e.emile=function(t,e,n){t="string"==typeof t?document.getElementById(t):t,n=n||{};var o,i,s=a(e),l=t.currentStyle?t.currentStyle:getComputedStyle(t,null),c={},u=+new Date,d=n.duration||200,h=u+d,f=n.easing||function(t){return-Math.cos(t*Math.PI)/2+.5};for(o in s)c[o]=r(l[o]);i=setInterval(function(){var e=+new Date,r=e>h?1:(e-u)/d;for(o in s){var a=n.onMove?n.onMove(o):s[o].f(c[o].v,s[o].v,f(r));t.style[o]=a+s[o].u}e>h?(clearInterval(i),n.after&&n.after()):n.during&&n.during.apply(this,[(e-u)/d])},10)}}(0,window)},function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));!function(t,e){t.addEvent(window,"resize",function(){o.default.each(t.select("div.notify"),function(e){if("true"===e.getAttribute("rel")){var n=t.windowSize(),o=t.getDimensions(e);e.style.top=n.height-o.height+"px"}})}),window.Notify=function(){var n=this;if(!(n instanceof Notify))return new Notify;var i=t.guid(),r={msg:"",hgt:50,duration:300,className:"warningBar",delayClose:0,hideClose:!1,onOpen:null,msgBar:"messageBar"+i,popFromBottom:!1};n.message=function(a){function s(){var a="<div style='text-align:left;padding:10px;float:left;width:96%;' id='notifyBarMessage_"+i+"'>"+r.msg+"</div><div style='float:right;margin-top:6px;padding-right:2px;width:4%;'><a href='javascript:' class='lnkCloseMessage' id='lnkCloseMessage_"+i+"'>X</a></div>",s=document.createElement("div");s.setAttribute("class",r.className+" notify"),s.setAttribute("rel",r.popFromBottom),s.style.height=r.hgt+"px";var l="top:0px";if(r.popFromBottom){var c=t.windowSize();s.style.top=c.height+r.hgt+"px",l="top:"+(c.height-r.hgt)+"px"}else s.style.top=-1*r.hgt+"px";s.setAttribute("id",r.msgBar),s.innerHTML=a,document.body.appendChild(s),e(t.el(r.msgBar),l,{duration:r.duration,after:function(){r.hideClose?t.el("lnkCloseMessage_"+i).style.display="none":t.el("lnkCloseMessage_"+i).onclick=function(t){t.preventDefault(),n.closeMessage()},r.delayClose&&r.delayClose>0&&setTimeout(function(){n.closeMessage()},r.delayClose),o.default.isFunction(r.onOpen)&&r.onOpen.apply(this,[t.el("notifyBarMessage_"+i),n])}})}if(o.default.extend(r,a),o.default.each(t.select("div.notify"),function(t){t.style.visibility="hidden"}),t.el(r.msgBar)&&"visible"===t.el(r.msgBar).style.visibility){var l=t.getDimensions(t.el(r.msgBar)).height;e(t.el(r.msgBar),"top:"+-1*l+"px",{duration:r.duration,after:function(){null!==t.el(r.msgBar)&&document.body.removeChild(t.el(r.msgBar)),s()}})}else s();return n},n.changeMessage=function(e){return t.el("notifyBarMessage_"+i).innerHTML=e,n},n.visible=function(){return null!==t.el(r.msgBar)},n.resize=function(n,i,a){if(null!==t.el(r.msgBar)){var s="top:"+-1*n+"px";r.popFromBottom&&(s="top:"+(t.windowSize().height-n)+"px"),e(t.el(r.msgBar),s,{duration:i,after:function(){o.default.isFunction(a)&&a.apply(this)}})}else o.default.isFunction(a)&&a.apply(this)},n.closeMessage=function(n){if(null!==t.el(r.msgBar)){var i="top:"+-1*r.hgt+"px";r.popFromBottom&&(i="top:"+(t.windowSize().height+r.hgt)+"px"),e(t.el(r.msgBar),i,{duration:r.duration,after:function(){document.body.removeChild(t.el(r.msgBar)),o.default.each(t.select("div.notify"),function(t){t.style.visibility="visible"}),o.default.isFunction(r.onClose)&&r.onClose.apply(this),o.default.isFunction(n)&&n.apply(this)}})}else o.default.isFunction(n)&&n.apply(this)}}}(Slatebox,emile)},function(t,e,n){"use strict";window.spinner=function(t,e,n,o,i,r){var a=o||12,s=r||"#fff",l=i||15,c=Math.min(e,n)||35,u=Math.max(e,n)||60,d=u+l,h=u+l,f=Raphael(t,2*u+2*l,2*u+2*l),p=[],v=[],g=2*Math.PI/a,y={stroke:s,"stroke-width":l,"stroke-linecap":"round"};Raphael.getColor.reset();for(var _=0;_<a;_++){var m=g*_-Math.PI/2,x=Math.cos(m),b=Math.sin(m);v[_]=1/a*_,p[_]=f.path([["M",d+c*x,h+c*b],["L",d+u*x,h+u*b]]).attr(y),"rainbow"==s&&p[_].attr("stroke",Raphael.getColor())}var w;return function t(){v.unshift(v.pop());for(var e=0;e<a;e++)p[e].attr("opacity",v[e]);f.safari(),w=setTimeout(t,1e3/a)}(),function(){clearTimeout(w),f.clear()}}}]);